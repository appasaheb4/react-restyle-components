"use strict";import{jsx as s,jsxs as m}from"react/jsx-runtime";import _,{useState as g,useEffect as h,useRef as U}from"react";import{Label as W}from"../../../core-components/atoms/Label/Label";import{Icon as C}from"../../Icon/Icon";import e from"../../../tc.module.css";import{cn as l}from"../../../utils";export const TextDropdownInput=_.forwardRef(({id:w,label:y,error:b,required:E,value:d,onChange:f,onBlur:u,disabled:o,dropdownItems:n=[],allowCustomInput:p=!0,placeholder:j="Select an option",name:F,className:O,labelProps:z,...A},M)=>{const[c,k]=g(!1),[t,D]=g(d||""),[N,x]=g(n),[T,i]=g(!1),v=U(null);h(()=>{n&&x(n)},[n]),h(()=>{d!==void 0&&D(d)},[d]),h(()=>{if(T&&t){const r=n.filter(a=>a.toLowerCase().includes(t.toLowerCase()));x(r)}else x(n)},[t,n,T]),h(()=>{function r(a){v.current&&!v.current.contains(a.target)&&c&&(k(!1),i(!1))}return document.addEventListener("mousedown",r),()=>{document.removeEventListener("mousedown",r)}},[c]);const S=r=>{const a=r.target.value;D(a),i(!0);const I=n.filter(K=>K.toLowerCase().includes(a.toLowerCase()));x(I),f&&f(a)},R=r=>{D(r),k(!1),i(!1),f&&f(r),u&&u(null,r)},L=()=>{o||(k(!c),i(!0))},V=()=>{o||i(!0)},q=r=>{setTimeout(()=>{i(!1)},150),u&&u(r,t)};return m("div",{className:l(e["w-full"],e.relative,O),children:[y&&s(W,{id:w,required:E,label:y,...z}),m("div",{className:l(e.flex,e["flex-row"],e["items-center"],e["leading-4"],e["p-2"],e["dark:bg-boxdark"],e["focus:outline-none"],e["focus:ring"],e.block,e["w-full"],e["shadow-sm"],e["sm:text-base"],e.border,e["rounded-md"],b?e["border-red"]:e["border-gray-300"],o&&e["cursor-not-allowed"],o&&e["opacity-50"]),ref:v,children:[s("input",{ref:M,id:w,type:"text",name:F||w,placeholder:j,value:t,disabled:o,readOnly:!p,className:l(e["w-full"],e["bg-transparent"],e["border-0"],e["appearance-none"],e["focus:outline-none"],e["focus:ring-0"],e["font-arimaRegular"],e["text-md"],o&&e["cursor-not-allowed"],o&&e["opacity-50"]),onClick:L,onChange:p?S:void 0,onFocus:V,onBlur:q,...A}),!o&&s(C,{nameIcon:c?"MdKeyboardArrowUp":"MdKeyboardArrowDown",propsIcon:{size:"16",color:"#000000"},onClick:L})]}),c&&!o&&s("div",{className:l(e["z-10"],e["w-full"],e.absolute,e["text-base"],e["list-none"],e["bg-white"],e.rounded,e["divide-y"],e["divide-gray-100"],e.shadow,e["dark:bg-gray-700"],e["max-h-60"],e["overflow-y-auto"]),children:m("ul",{className:e["py-1"],children:[N.length>0?N.map((r,a)=>s("li",{className:l(e.block,e["py-2"],e["px-4"],e["text-md"],e["hover:bg-gray-100"],e["dark:hover:bg-gray-600"],e["dark:text-gray-200"],e["font-arimaRegular"],e["cursor-pointer"],t===r&&e["bg-blue-50"],t===r&&e["text-blue-700"]),onClick:()=>R(r),children:r},a)):s("li",{className:l(e.block,e["py-2"],e["px-4"],e["text-md"],e["text-gray-500"],e["font-arimaRegular"]),children:p?"No matches found":"No options available"}),p&&t&&!n.includes(t)&&T&&s("li",{className:l(e.block,e["py-2"],e["px-4"],e["text-md"],e["hover:bg-gray-100"],e["dark:hover:bg-gray-600"],e["dark:text-gray-200"],e["font-arimaRegular"],e["cursor-pointer"],e["border-t"],e["border-gray-200"],e["bg-green-50"],e["text-green-700"]),onClick:()=>R(t),children:m("span",{className:l(e.flex,e["ml-2"],e["items-center"],e["gap-1"]),children:[s(C,{nameIcon:"MdAdd",propsIcon:{size:"16",color:"#059669"}}),'"',t,'"']})})]})}),b&&s("span",{className:l(e["text-red"],e["text-4xs"]),id:"error",children:b||`${y||"Field"} is required`})]})});TextDropdownInput.displayName="TextDropdownInput";
