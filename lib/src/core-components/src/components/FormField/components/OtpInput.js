"use strict";import{jsx as o,jsxs as S}from"react/jsx-runtime";import _,{useState as E,useEffect as K,useRef as O}from"react";import{Label as q}from"../../../core-components/atoms/Label/Label";import t from"../../../tc.module.css";import{cn as i}from"../../../utils";export const OtpInput=_.forwardRef(({id:b,label:N,error:a,required:v,value:u,onChange:n,disabled:m,otpLength:h=6,pinErrorMsg:x,pinDefaultMsg:w,className:g,labelProps:j,...P},p)=>{const[f,d]=E(u||[]),c=O([]);K(()=>{u&&d(u)},[u]);const k=(l,r)=>{const e=l.target.value,s=Number(e.trim());if(!(isNaN(s)||e.length===0)&&s>=0&&s<=9){const y=[...f];if(y[r]=s,d(y),n&&n(y),r<h-1){const R=c.current[r+1];R&&R.focus()}}},I=(l,r)=>{if(l.nativeEvent.code==="Backspace"){if(f[r]!==void 0){const e=[...f];if(e[r]=void 0,d(e),n&&n(e),r>0){const s=c.current[r-1];s&&s.focus()}}else if(r>0){const e=c.current[r-1];e&&e.focus()}}};return S("div",{className:i(t["w-full"],t.relative,g),children:[N&&o(q,{id:b,required:v,label:N,...j}),o("div",{className:i(t.flex,t["gap-2"],t["p-2"],t["text-center"]),children:Array.from({length:h},(l,r)=>o("input",{ref:e=>{e&&(c.current[r]=e),r===0&&p&&(typeof p=="function"?p(e):p.current=e)},type:"tel",disabled:m,className:i(t["text-md"],t["font-extrabold"],t["bg-transparent"],t["text-center"],t["z-20"],t.border,t["border-gray-secondary"],t["rounded-full"],m&&t["cursor-not-allowed"],m&&t["opacity-50"],a&&t["border-red-500"]),style:{width:"30px",height:"30px"},onKeyDown:e=>I(e,r),onMouseUp:()=>{if(f.join("").length<=0){const e=c.current[0];e&&e.focus()}},onClick:()=>{f.join("").length<=0&&n&&n([])},onChange:e=>k(e,r),value:f[r]||"",...P},r))}),a&&o("p",{className:i(t["mt-1"],t["text-sm"],t["text-red-600"],t["dark:text-red-400"]),children:a||x}),!a&&w&&o("p",{className:i(t["mt-1"],t["text-sm"],t["text-gray-600"],t["dark:text-gray-400"]),children:w})]})});OtpInput.displayName="OtpInput";
