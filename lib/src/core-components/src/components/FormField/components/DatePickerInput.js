"use strict";import{jsx as r,jsxs as m}from"react/jsx-runtime";import q,{useState as x,useEffect as I,useRef as z}from"react";import c from"dayjs";import{Label as H}from"../../../core-components/atoms/Label/Label";import{Icon as k}from"../../Icon/Icon";import e from"../../../tc.module.css";import{cn as n}from"../../../utils";const V=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],W=["January","February","March","April","May","June","July","August","September","October","November","December"];export const DatePickerInput=q.forwardRef(({id:S,label:f,error:N,required:O,value:o,onChange:v,disabled:h,dateFormat:D="YYYY-MM-DD",placeholder:j="Select Date",className:R,labelProps:Y,...B},G)=>{const[d,w]=x(o&&typeof o=="string"?c(o).toDate():null),[u,g]=x(!1),[a,p]=x(c(d||new Date)),b=z(null);I(()=>{if(o){const t=typeof o=="string"?c(o).toDate():o;w(t),p(c(t))}},[o]),I(()=>{const t=s=>{b.current&&!b.current.contains(s.target)&&g(!1)};return u&&document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[u]);const L=t=>{w(t),g(!1),v&&v(c(t).format(D))},P=()=>{const t=a.startOf("month"),s=a.endOf("month"),J=t.day(),_=s.date(),y=[];for(let i=0;i<J;i++)y.push(null);for(let i=1;i<=_;i++)y.push(i);return y},l=t=>{if(!t||!d)return!1;const s=a.date(t);return c(d).isSame(s,"day")},M=t=>t?a.date(t).isSame(c(),"day"):!1,T=()=>{p(a.subtract(1,"month"))},A=()=>{p(a.add(1,"month"))},E=d?c(d).format(D):j,F=()=>m("div",{ref:b,className:n(e.absolute,e["top-full"],e["left-0"],e["mt-2"],e["bg-white"],e["dark:bg-gray-800"],e.border,e["border-gray-300"],e["dark:border-gray-600"],e["rounded-lg"],e["shadow-lg"],e["p-4"],e["z-50"],e["w-80"]),children:[m("div",{className:n(e.flex,e["justify-between"],e["items-center"],e["mb-4"]),children:[r("button",{type:"button",onClick:T,className:n(e["p-2"],e["hover:bg-gray-100"],e["dark:hover:bg-gray-700"],e.rounded),children:r(k,{nameIcon:"FaChevronLeft"})}),m("div",{className:n(e["font-semibold"],e["text-gray-900"],e["dark:text-gray-100"]),children:[W[a.month()]," ",a.year()]}),r("button",{type:"button",onClick:A,className:n(e["p-2"],e["hover:bg-gray-100"],e["dark:hover:bg-gray-700"],e.rounded),children:r(k,{nameIcon:"FaChevronRight"})})]}),r("div",{className:n(e.grid,e["grid-cols-7"],e["gap-1"],e["mb-2"]),children:V.map(t=>r("div",{className:n(e["text-center"],e["text-xs"],e["font-semibold"],e["text-gray-600"],e["dark:text-gray-400"],e["py-2"]),children:t},t))}),r("div",{className:n(e.grid,e["grid-cols-7"],e["gap-1"]),children:P().map((t,s)=>r("div",{className:n(e["text-center"]),children:t?r("button",{type:"button",onClick:()=>L(a.date(t).toDate()),className:n(e["w-full"],e["py-2"],e.rounded,e["text-sm"],e["hover:bg-blue-100"],e["dark:hover:bg-blue-900"],l(t)&&e["bg-blue-500"],l(t)&&e["text-white"],l(t)&&e["hover:bg-blue-600"],M(t)&&!l(t)&&e.border,M(t)&&!l(t)&&e["border-blue-500"],!l(t)&&e["text-gray-900"],!l(t)&&e["dark:text-gray-100"]),children:t}):r("div",{className:n(e["w-full"],e["py-2"])})},s))})]}),C=()=>m("div",{className:n(e.relative,e["w-full"]),children:[m("div",{onClick:()=>!h&&g(!u),className:n(e["border-gray-300"],e["dark:border-gray-600"],e.border,e["rounded-md"],e["px-3"],e["py-2"],e.flex,e["items-center"],e["w-full"],e["cursor-pointer"],e["bg-white"],e["dark:bg-gray-800"],h&&e["cursor-not-allowed"],h&&e["opacity-50"]),children:[r("span",{className:n(e["flex-1"],e["font-arimaRegular"],d?e["text-gray-900"]:e["text-gray-400"],d?e["dark:text-gray-100"]:e["dark:text-gray-500"],e["text-base"]),children:E}),r(k,{nameIcon:"ImCalendar"})]}),u&&r(F,{})]});return m("div",{className:n(e["w-full"],R),children:[f&&r(H,{id:S,required:O,label:f,...Y,children:r(C,{})}),!f&&r(C,{}),N&&r("p",{className:n(e["mt-1"],e["text-sm"],e["text-red-600"],e["dark:text-red-400"]),children:N})]})});DatePickerInput.displayName="DatePickerInput";
