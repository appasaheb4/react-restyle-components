"use strict";import{jsx as o,jsxs as x}from"react/jsx-runtime";import _,{useState as E,useEffect as K,useRef as V}from"react";import{Label as q}from"../../../core-components/atoms/Label/Label";import e from"../../../tc.module.css";import{cn as i}from"../../../utils";export const PinInput=_.forwardRef(({id:h,label:b,error:c,required:P,value:f,onChange:n,disabled:d,pinLength:N=12,pinErrorMsg:g,pinDefaultMsg:R,className:j,labelProps:v,...S},l)=>{const[a,y]=E(f||[]),u=V([]);K(()=>{f&&y(f)},[f]);const k=(m,s)=>{const t=m.target.value,p=parseInt(t,10);if(!isNaN(p)&&p>=0&&p<=9){const r=[...a];if(r[s]=p,y(r),n&&n(r),s<N-1){const w=u.current[s+1];w&&w.focus()}}else if(t===""){const r=[...a];r[s]=void 0,y(r),n&&n(r)}},I=(m,s)=>{if(m.key==="Backspace"&&!a[s]&&s>0){const t=u.current[s-1];t&&t.focus()}};return x("div",{className:i(e["w-full"],e.relative,j),children:[b&&o(q,{id:h,required:P,label:b,...v}),o("div",{className:i(e.flex,e["space-x-1"]),children:Array.from({length:N},(m,s)=>x("div",{className:i(e.flex,e["space-x-1"],e["max-w-full"],e["items-stretch"]),children:[o("input",{ref:t=>{t&&(u.current[s]=t),s===0&&l&&(typeof l=="function"?l(t):l.current=t)},"data-testid":"inputElementPin",type:"tel",disabled:d,className:i(e["pb-2"],e.block,e["w-4"],e["px-0"],e["mt-0"],e["bg-transparent"],e["text-center"],e["border-0"],e["border-b"],e["z-20"],e["appearance-none"],e["rounded-none"],e["focus:outline-none"],e["focus:ring-0"],e["focus:border-gray-secondary"],e["border-gray-secondary"],e["font-arimaRegular"],d&&e["cursor-not-allowed"],d&&e["opacity-50"],c&&e["border-red-500"]),onKeyDown:t=>I(t,s),onMouseUp:()=>{if(a.join("").length<=0){const t=u.current[0];t&&t.focus()}},onClick:()=>{a.join("").length<=0&&n&&n([])},onChange:t=>k(t,s),value:a[s]?.toString()||"",...S}),o("div",{className:e.invisible,children:(s+1)%4===0?"ss":null})]},s))}),c&&o("span",{className:i(e["text-sm"],e["text-red"],e["text-4xs"],e["font-arimaRegular"]),id:"error",children:c||g||""}),!c&&R&&o("span",{className:i(e["text-sm"],e["text-4xs"],e["font-arimaRegular"]),id:"error",children:R})]})});PinInput.displayName="PinInput";
