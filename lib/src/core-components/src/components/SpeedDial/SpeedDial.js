"use strict";"use client";import{jsx as n,jsxs as d,Fragment as de}from"react/jsx-runtime";import{forwardRef as ue,useState as pe,useRef as me,useCallback as f,useEffect as w}from"react";import{Icon as k}from"../Icon/Icon";import{Tooltip as fe}from"../Tooltip/Tooltip";import{SpeedDialRoot as $e,SpeedDialBackdrop as be,SpeedDialFab as ge,SpeedDialActions as Ce,SpeedDialActionWrapper as ye,SpeedDialActionButton as he,SpeedDialActionLabel as N,IconWrapper as u,sizeConfig as I}from"./elements";const ke=()=>d("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[n("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),n("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),Se=()=>d("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[n("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),n("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]});export const SpeedDial=ue(function(B,p){const{actions:T,open:O,defaultOpen:j=!1,onOpenChange:$,onActionClick:x,uiConfig:R={},mainButtonConfig:W={},classNames:l={},styles:s={},disabled:b=!1,hidden:F=!1,closeOnActionClick:z=!0,closeOnClickOutside:D=!0,closeOnEscape:L=!0,className:M,style:_,ariaLabel:P}=B,{direction:r="up",size:i="medium",variant:q="filled",gap:G=12,showLabels:S=!1,showTooltips:H=!0,animationDuration:J=200,staggerDelay:g=30,showBackdrop:K=!1,backdropOpacity:Q=.3,zIndex:v=1e3}=R,{openIcon:U="MdAdd",closeIcon:V="MdClose",openIconElement:A,closeIconElement:E,backgroundColor:X,iconColor:Y,rotateOnToggle:C=!0,rotationDegrees:Z=45,ariaLabelClosed:ee="Open speed dial",ariaLabelOpen:ne="Close speed dial"}=W,y=me(null),[oe,ie]=pe(j),h=O!==void 0,o=h?O:oe,m=f(e=>{b||(h||ie(e),$?.(e))},[b,h,$]),te=f(()=>{m(!o)},[o,m]),a=f(()=>{m(!1)},[m]),re=f((e,t)=>{e.disabled||(e.onClick?.(t),x?.(e,t),z&&a())},[z,a,x]);w(()=>{if(!o||!D)return;const e=c=>{y.current&&!y.current.contains(c.target)&&a()},t=setTimeout(()=>{document.addEventListener("mousedown",e)},0);return()=>{clearTimeout(t),document.removeEventListener("mousedown",e)}},[o,D,a]),w(()=>{if(!o||!L)return;const e=t=>{t.key==="Escape"&&a()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[o,L,a]);const le=()=>{if(o){if(E)return E;if(!C)return n(u,{$size:i,children:n(k,{nameIcon:V,propsIcon:{size:I[i].iconSize,color:"currentColor"}})})}return A||(C?n(u,{$size:i,children:n(ke,{})}):n(u,{$size:i,children:n(k,{nameIcon:U,propsIcon:{size:I[i].iconSize,color:"currentColor"}})}))},se=e=>e.iconElement?n(u,{$size:i,$isAction:!0,children:e.iconElement}):n(u,{$size:i,$isAction:!0,children:n(k,{nameIcon:e.icon,propsIcon:{size:I[i].actionIconSize,color:e.iconColor||"currentColor"}})}),ae=(e,t)=>{const c=n(he,{$size:i,$isOpen:o,$index:t,$staggerDelay:g,$animationDuration:J,$customBg:e.backgroundColor,$customColor:e.iconColor,onClick:ce=>re(e,ce),disabled:e.disabled,"aria-label":e.ariaLabel||e.tooltip||e.label,className:l.action||e.className,style:{...s.action,...e.style},children:se(e)},e.id);return S&&e.label?d(ye,{$direction:r,$showLabels:S,children:[(r==="left"||r==="up")&&n(N,{$size:i,$direction:r,$isOpen:o,$index:t,$staggerDelay:g,className:l.actionLabel,style:s.actionLabel,children:e.label}),c,(r==="right"||r==="down")&&n(N,{$size:i,$direction:r,$isOpen:o,$index:t,$staggerDelay:g,className:l.actionLabel,style:s.actionLabel,children:e.label})]},e.id):H&&e.tooltip?n(fe,{content:e.tooltip,position:r==="up"||r==="down"?"left":"top",delay:100,children:c},e.id):c};return d(de,{children:[K&&n(be,{$isOpen:o,$opacity:Q,$zIndex:v,className:l.backdrop,style:s.backdrop,onClick:a}),d($e,{ref:e=>{y.current=e,typeof p=="function"?p(e):p&&(p.current=e)},$zIndex:v,$hidden:F,className:M||l.root,style:{...s.root,..._},role:"menu","aria-label":P||"Speed dial","aria-expanded":o,children:[n(ge,{$size:i,$variant:q,$isOpen:o,$rotateOnToggle:C,$rotationDegrees:Z,$customBg:X,$customColor:Y,onClick:te,disabled:b,"aria-label":o?ne:ee,className:l.fab,style:s.fab,children:le()}),n(Ce,{$direction:r,$gap:G,$isOpen:o,className:l.actions,style:s.actions,role:"menu",children:T.map((e,t)=>ae(e,t))})]})]})});SpeedDial.displayName="SpeedDial";
