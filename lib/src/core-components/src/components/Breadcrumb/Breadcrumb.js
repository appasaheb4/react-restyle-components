"use strict";"use client";import{jsx as r,jsxs as a}from"react/jsx-runtime";import d,{forwardRef as z,useEffect as y,useMemo as F,useRef as L,useState as H,useCallback as _}from"react";import{useCombinedRefs as q}from"../../utils/hooks";import{Container as K,BreadcrumbList as N,Item as B,Separator as R,SeparatorText as p,OverflowDots as G,IconWrapper as S,DropdownMenu as J,DropdownItem as P}from"./elements";const j=()=>r("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:r("polyline",{points:"9 18 15 12 9 6"})}),Q=()=>a("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[r("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),r("polyline",{points:"9 22 9 12 15 12 15 22"})]}),U=(C,t)=>{switch(C){case"chevron":return r(j,{});case"slash":return r(p,{$size:t,children:"/"});case"arrow":return r(p,{$size:t,children:"\u2192"});case"dot":return r(p,{$size:t,children:"\u2022"});default:return r(j,{})}};export const Breadcrumb=z(function({children:t,maxItems:i,showOverflowDots:E=!1,variant:l="default",size:n="medium",separatorType:u="chevron",customSeparator:D,showHomeIcon:O=!1,collapsedItems:A,onCollapsedToggle:$,ariaLabel:I,...m},M){const c=L(null),W=q(M,c),[s,v]=H(!1),h=L(null),b=A??[],w=_(()=>{const e=!s;v(e),$?.(e)},[s,$]);y(()=>{const e=o=>{h.current&&!h.current.contains(o.target)&&v(!1)};return s&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[s]);const k=F(()=>{const e=d.Children.toArray(t);return i&&e.length>i?e.slice(-i):e},[t,i]);y(()=>{if(c.current){const e=c.current.querySelector("ol")?.lastElementChild;e&&c.current.scroll?.(e.offsetLeft,0)}},[]);const g=D||U(u,n),x=d.Children.count(k);return r(K,{"data-aui":"breadcrumb","aria-label":I||m["aria-label"]||"Breadcrumb navigation",ref:W,$variant:l,$size:n,role:"navigation",...m,children:a(N,{$variant:l,$size:n,children:[E&&i&&d.Children.count(t)>i&&a(B,{$variant:l,$size:n,$isActive:!1,$isCollapsed:!0,"aria-hidden":"true",children:[r(G,{$size:n,onClick:w,role:"button",tabIndex:0,onKeyDown:e=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),w())},children:"\u2022\u2022\u2022"}),b.length>0&&r(J,{ref:h,$isOpen:s,children:b.map((e,o)=>a(P,{href:e.href||"#",children:[e.icon&&r(S,{$size:n,children:e.icon}),e.label]},o))}),r(R,{$type:u,$size:n,"aria-hidden":"true",children:g})]}),d.Children.map(k,(e,o)=>{const f=o===x-1;return a(B,{$variant:l,$size:n,$isActive:f,$isCollapsed:!1,"aria-current":f?"page":void 0,children:[O&&o===0&&r(S,{$size:n,children:r(Q,{})}),e,!f&&r(R,{$type:u,$size:n,"aria-hidden":"true",children:g})]},o)})]})})});Breadcrumb.displayName="Breadcrumb";
