"use strict";"use client";import{jsx as t,jsxs as s}from"react/jsx-runtime";import Yn,{forwardRef as Un,useState as O,useCallback as u,useMemo as me,useEffect as _,useRef as $}from"react";import{TableRoot as Qn,Toolbar as _n,ToolbarGroup as Ie,SearchInput as qn,ToolbarButton as K,TableWrapper as Gn,StyledTable as Xn,TableHeader as Zn,HeaderRow as er,HeaderCell as we,TableBody as tr,TableRow as nr,TableCell as ve,Checkbox as Et,ExpandButton as rr,ExpandedRow as or,ExpandedCell as ir,TableFooter as lr,FooterRow as ar,FooterCell as Re,PaginationWrapper as sr,PaginationInfo as dr,PaginationControls as cr,PageButton as q,PageSizeSelect as hr,QuickJumper as fr,EmptyState as pr,LoadingOverlay as ur,LoadingSpinner as gr,EditableCell as Cr,CellEditor as yr,ColumnTogglePanel as Tt,ColumnToggleHeader as Nt,ColumnToggleSearch as Lt,ColumnToggleList as Mt,ColumnToggleItem as Je,SelectionIndicator as br,SelectionCount as kr}from"./elements";import{useSortState as Sr,useFilterState as Fr,usePaginationState as xr,useRowSelection as mr,useRowExpansion as wr,useColumnVisibility as vr,useTableDebounce as Rr,sortData as $r,filterData as Ye,paginateData as Er,getNestedValue as G,exportToCSV as Tr,exportToExcel as Nr}from"./hooks";import{getFilterComponent as Lr}from"./filters";import{Tooltip as Mr}from"../Tooltip";const Pr=()=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t("circle",{cx:"11",cy:"11",r:"8"}),t("path",{d:"M21 21l-4.35-4.35",strokeLinecap:"round"})]}),jr=({size:M=14})=>t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",style:{width:M,height:M},children:t("path",{d:"M12 19V5M5 12l7-7 7 7"})}),Br=({size:M=14})=>t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",style:{width:M,height:M},children:t("path",{d:"M12 5v14M5 12l7 7 7-7"})}),Lo=()=>t("svg",{viewBox:"0 0 10 10",fill:"currentColor",children:t("path",{d:"M5 0L10 6H0L5 0z"})}),Mo=()=>t("svg",{viewBox:"0 0 10 10",fill:"currentColor",children:t("path",{d:"M5 10L0 4h10L5 10z"})}),Pt=({order:M})=>{const $e=()=>{switch(M){case"asc":return{up:16,down:10};case"desc":return{up:10,down:16};default:return{up:14,down:14}}},{up:I,down:de}=$e();return s("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",gap:2,color:"white"},children:[t(jr,{size:I}),t(Br,{size:de})]})},Wr=()=>t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:t("path",{d:"M15 18l-6-6 6-6",strokeLinecap:"round",strokeLinejoin:"round"})}),Dr=()=>t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:t("path",{d:"M9 18l6-6-6-6",strokeLinecap:"round",strokeLinejoin:"round"})}),Vr=()=>t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:t("path",{d:"M11 17l-5-5 5-5M18 17l-5-5 5-5",strokeLinecap:"round",strokeLinejoin:"round"})}),zr=()=>t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:t("path",{d:"M13 7l5 5-5 5M6 7l5 5-5 5",strokeLinecap:"round",strokeLinejoin:"round"})}),Hr=()=>t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:t("path",{d:"M9 18l6-6-6-6",strokeLinecap:"round",strokeLinejoin:"round"})}),jt=()=>t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:t("path",{d:"M18 6L6 18M6 6l12 12",strokeLinecap:"round",strokeLinejoin:"round"})}),Ar=()=>t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:t("path",{d:"M22 3H2l8 9.46V19l4 2v-8.54L22 3z",strokeLinecap:"round",strokeLinejoin:"round"})}),Or=()=>t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:t("path",{d:"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3",strokeLinecap:"round",strokeLinejoin:"round"})}),Kr=()=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t("rect",{x:"3",y:"3",width:"7",height:"18",rx:"1"}),t("rect",{x:"14",y:"3",width:"7",height:"18",rx:"1"})]}),Ir=()=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[t("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),t("path",{d:"M3 9h18M9 3v18",strokeLinecap:"round"})]}),Jr=()=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t("path",{d:"M23 4v6h-6M1 20v-6h6",strokeLinecap:"round",strokeLinejoin:"round"}),t("path",{d:"M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15",strokeLinecap:"round",strokeLinejoin:"round"})]}),Yr=()=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t("path",{d:"M6 9V2h12v7M6 18H4a2 2 0 01-2-2v-5a2 2 0 012-2h16a2 2 0 012 2v5a2 2 0 01-2 2h-2",strokeLinecap:"round",strokeLinejoin:"round"}),t("rect",{x:"6",y:"14",width:"12",height:"8"})]}),Po=()=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t("circle",{cx:"12",cy:"12",r:"10"}),t("path",{d:"M12 8v4M12 16h.01",strokeLinecap:"round",strokeLinejoin:"round"})]});export const Table=Un(function($e,I){const{id:de,data:g,columns:R,keyField:E="_id",loading:Bt=!1,loadingIndicator:Wt,pagination:ce=!0,paginationConfig:Ue,totalSize:N,remote:Qe=!0,defaultSort:Dt,sort:Vt,filterable:zt=!1,defaultFilters:Ht,filters:At,defaultShowFilters:Ot=!0,showFilters:_e,onShowFiltersChange:qe,showFilterToggle:Ge=!0,searchable:Xe=!0,searchPlaceholder:Kt="Search...",defaultSearchValue:It="",searchValue:Jt,searchDebounce:Yt=300,rowSelection:P,expandable:p,editMode:J="dblclick",showEditIcon:Ut=!1,onCellEdit:Ze,exportable:Qt=!0,exportFileName:_t="table_export",exportFormat:Ee="csv",columnToggle:qt=!1,bordered:Gt=!0,striped:Xt=!1,hover:Zt=!0,compact:x=!1,cellPadding:he,stickyHeader:et=!1,maxHeight:en,rowClassName:Te,rowStyle:Ne,classNames:b={},styles:k={},className:tn,style:nn,emptyText:rn="No data available",onChange:w,onPageChange:fe,onSortChange:tt,onFilterChange:pe,onSearch:nt,onRowClick:Le,onRowDoubleClick:Me,onClearFilters:rt,toolbar:ue,hideToolbar:on=!1,showFooter:ln=!1,caption:ot,isDelete:Ur=!1,isEditModify:Qr,isUpdate:_r,isExport:an,isSelectRow:it,getNonSelectableRows:sn,nonSelectableStyle:dn,isView:qr=!1,fileName:cn,hideExcelSheet:ge=!1,onSelectedRow:hn,selectedRowStyle:fn,selectedRowClassName:pn,onUpdateItem:X,onPageSizeChange:Ce,onFilter:Pe,clearAllFilter:un,onDelete:Gr,onEdit:Xr,onView:Zr,dynamicStylingFields:eo,fieldTypeConfig:Y,showRowNumber:Z=!1,rowNumberWidth:lt=50,rowNumberTitle:gn="#",rowNumberRender:at,toolbarPosition:to="top",toolbarLeft:Cn,toolbarRight:yn,toolbarCenter:bn,refreshable:kn=!1,onRefresh:Sn,printable:Fn=!1,onPrint:xn,size:no="medium",error:ro,onRetry:oo,skeletonLoading:io=!1,skeletonRowCount:lo=5,hideHeader:ao=!1,highlightedRowKeys:so=[],highlightRowStyle:co,highlightRowClassName:ho,onRowMouseEnter:fo,onRowMouseLeave:po,onCellClick:uo,onHeaderClick:go,...st}=$e,mn=an??Qt,je=cn??_t,D=me(()=>N!==void 0&&N>0&&N<=g.length?!1:Qe,[Qe,N,g.length]),f=it?{mode:"checkbox",selectedRowStyle:fn||P?.selectedRowStyle,selectedRowClassName:pn||P?.selectedRowClassName,...P,getCheckboxProps:e=>{const n=e[E],r=sn?.includes(n),o=P?.getCheckboxProps?.(e);return{...o,disabled:r||o?.disabled}},onChange:(e,n)=>{P?.onChange?.(e,n)}}:P,j=ce?{page:0,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:!0,pageSizeOptions:[10,20,30,50],...Ue}:Ue,Co={small:{padding:"4px 8px",fontSize:"12px"},medium:{padding:"8px 12px",fontSize:"14px"},large:{padding:"12px 16px",fontSize:"16px"}},wn=$(null),ye=$(null),dt=$(0),[vn,ct]=O(It),[Rn,$n]=O(Ot),[B,ee]=O(!1),[be,ht]=O(""),[En,Be]=O("none");_(()=>{if(!B)return;const e=n=>{ye.current&&!ye.current.contains(n.target)&&ee(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[B]);const We=_e!==void 0,De=We?_e:Rn,yo=u(()=>{const e=!De;We||$n(e),qe?.(e)},[De,We,qe]),[V,L]=O(null),[T,ke]=O(null),U=Jt??vn,v=Rr(U,Yt),{sort:S,handleSort:ft}=Sr(Dt,Vt),{filters:F,setFilter:pt,clearFilters:ut}=Fr(Ht,At),te=$(!1),Se=$("filter"),gt=$(Pe),Tn=$(null),ne=$(null),re=$(null);_(()=>{const e=n=>{re.current&&!re.current.contains(n.target)&&(ne.current=null)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),_(()=>{const e=()=>{if(ne.current&&re.current){const r=re.current.querySelector(`[data-filter-field="${ne.current}"]`);if(r&&document.activeElement!==r){r.focus();const o=r.value?.length||0;r.setSelectionRange(o,o)}}},n=[requestAnimationFrame(()=>e()),setTimeout(()=>e(),50),setTimeout(()=>e(),150)];return()=>{n.forEach(r=>{typeof r=="number"&&(cancelAnimationFrame(r),clearTimeout(r))})}},[g]);const{page:C,pageSize:m,totalPages:bo,goToPage:Ct,goToNextPage:ko,goToPrevPage:So,goToFirstPage:Fo,goToLastPage:xo,changePageSize:yt}=xr(j?.page||0,j?.pageSize||10,N??g.length),{selectedKeys:z,isSelected:Nn,toggleRow:Fe,toggleAll:bt,isAllSelected:Ve,isIndeterminate:Ln}=mr(g,f?.keyField||E,f?.mode||"none",f?.selectedRowKeys,f?.getCheckboxProps),{expandedKeys:mo,isExpanded:Mn,toggleExpand:oe}=wr(p?.keyField||E,p?.defaultExpandedRowKeys,p?.expandedRowKeys,p?.accordion),{visibleColumns:H,toggleColumn:xe,isColumnHidden:ie}=vr(R,de);_(()=>{gt.current=Pe},[Pe]);const kt=$(v),St=$(JSON.stringify(F));_(()=>{if(!te.current)return;const e=JSON.stringify(F),n=kt.current!==v,r=St.current!==e;if(!n&&!r){te.current=!1;return}kt.current=v,St.current=e;const o={};Object.keys(F).forEach(i=>{const d=F[i];d!=null&&d!==""&&(o[i]=d)});const a=Object.keys(o).length>0,c={...o};Se.current==="search"&&v&&(c.srText=v),gt.current?.(Se.current,c,C,m),te.current=!1},[v,F,C,m]),_(()=>{const e=z.size,n=dt.current;e>n?Be("up"):e<n&&Be("down"),dt.current=e;const r=setTimeout(()=>{Be("none")},300);return()=>clearTimeout(r)},[z.size]);const ze=me(()=>{if(D)return g;let e=[...g];return e=Ye(e,F,R,v),e=$r(e,S,R),ce&&(e=Er(e,C,m)),e},[g,F,S,C,m,v,D,ce,R]),le=me(()=>N!==void 0&&N>0?N:D?g.length:Ye(g,F,R,v).length,[g,F,R,v,D,N]),He=u(e=>{ct(e),nt?.(e),te.current=!0,Se.current="search",w?.({type:"search",search:e})},[nt,w]),Ae=u(e=>{if(!e.sort)return;const n=ft(e.dataField,S.order);tt?.(n),w?.({type:"sort",sort:n})},[S,ft,tt,w]),Ft=u((e,n)=>{pt(e,n);const r={...F,[e]:n};pe?.(r),te.current=!0,Se.current="filter",w?.({type:"filter",filters:r})},[F,pt,pe,w]),xt=u(()=>{ut(),ct(""),rt?.(),un?.(),pe?.({}),w?.({type:"filter",filters:{}}),Tn.current=null},[ut,rt,pe,w]),Q=u(e=>{Ct(e);const n=e+1;Ce?.(n,m),fe?.(n,m),w?.({type:"pagination",pagination:{page:n,pageSize:m}})},[Ct,m,Ce,fe,w]),Pn=u(e=>{yt(e),Ce?.(1,e),fe?.(1,e),w?.({type:"pagination",pagination:{page:1,pageSize:e}})},[yt,Ce,fe,w]),jn=u((e,n,r)=>{if(f?.mode==="single"){const o=Fe(e);o&&f?.onChange?.(o.selectedKeys,o.selectedRows)}if(p?.expandRowByClick){const o=oe(e);o&&p.onExpandChange?.(o.expandedKeys,o.expanded,e)}Le?.(e,n,r)},[P,p,Fe,oe,Le]),ae=u((e,n,r,o)=>{const a=!!e.editorRenderer;if(e.editable===void 0)return{isEditable:a};if(e.editable===!1)return{isEditable:!1};if(e.editable===!0)return{isEditable:!0};const c=G(n,e.dataField),i=e.editable(c,n,r,o);return typeof i=="boolean"?{isEditable:i}:{isEditable:!0,customEditor:i}},[]),Bn=u((e,n,r,o,a)=>{if(r.events?.onDoubleClick?.(a,e,n,r,o),J!=="none"){const{isEditable:c}=ae(r,e,n,o);c&&J==="dblclick"&&(L({row:n,field:r.dataField}),ke(G(e,r.dataField)))}Me?.(e,n,a)},[J,Me,ae]),Wn=u((e,n,r,o,a)=>{if(a&&r.events?.onClick?.(a,e,n,r,o),J==="click"){const{isEditable:c}=ae(r,e,n,o);c&&(L({row:n,field:r.dataField}),ke(G(e,r.dataField)))}},[J,ae]),Oe=u((e,n,r)=>{if(V){if(r.validator){const a=r.validator(T,e);if(a!==!0){alert(typeof a=="string"?a:"Invalid value"),L(null);return}}const o=e[E];Ze?.(T,r.dataField,e,n),X?.(T,r.dataField,o)}L(null)},[V,T,Ze,X,E]),Dn=(e,n)=>n.split(".").reduce((r,o)=>r?.[o],e),mt=u((e,n,r)=>{const o=Y?.[n],a=typeof o=="string"?{type:o}:o;switch(a?.type||"string"){case"array":return a?.fields&&a.fields.length>0?Array.isArray(e)?e.slice(0,a.maxItems||e.length).map(l=>typeof l=="object"&&a.fields?a.fields.map(y=>l[y]).filter(Boolean).join(", "):typeof l=="string"?l:"").filter(Boolean).join(a.separator||"; "):e||"":Array.isArray(e)?e.map(l=>typeof l=="object"?JSON.stringify(l):l).join("; "):e||"";case"object":if(!e||typeof e!="object")return"";const i=a?.fields||a?.keys||[],d=a?.labelMap||{};return i.length>0?i.map(l=>{const y=Dn(e,l);return y!=null?`${d[l]||l}: ${y}`:null}).filter(Boolean).join(", "):Object.entries(e).map(([l,y])=>typeof y=="boolean"?`${l}: ${y?"Yes":"No"}`:`${l}: ${y}`).join(", ");case"date":if(!e)return"";try{const l=new Date(e),y=a?.dateFormat||"YYYY-MM-DD HH:mm:ss";return l.toISOString().slice(0,19).replace("T"," ")}catch{return String(e)}case"number":return e!=null?String(Number(e)):"";case"boolean":return typeof e=="boolean"?e?"Yes":"No":"";default:return typeof e=="boolean"?e?"Yes":"No":e!=null?String(e):""}},[Y]),wt=u(async()=>{const e=D?g:Ye(g,F,R,v);let n=H.filter(o=>o.csvExport!==!1);Array.isArray(ge)&&(n=n.filter(o=>!ge.includes(o.dataField))),Y&&(n=n.filter(o=>{const a=Y[o.dataField],c=typeof a=="string"?{type:a}:a;return!(c?.hideFromExport||c?.csvExport===!1)}));const r=n.map(o=>{const a=Y?.[o.dataField],c=typeof a=="string"?{type:a}:a;return o.csvFormatter?o:c?.exportFormatter?{...o,csvFormatter:c.exportFormatter}:c?.type?{...o,csvFormatter:(i,d)=>mt(i,o.dataField,d)}:o});Ee==="excel"?await Nr(e,r,je):Tr(e,r,je)},[g,F,R,v,H,ge,Y,mt,je,D,Ee]),Vn=u((e,n)=>{n.stopPropagation();const r=Fe(e);r&&f?.onChange?.(r.selectedKeys,r.selectedRows)},[Fe,P]),zn=u(()=>{const e=bt(!Ve);e&&f?.onChange?.(e.selectedKeys,e.selectedRows)},[bt,Ve,f]),Hn=u((e,n)=>{n.stopPropagation();const r=oe(e);p?.onExpandChange?.(r.expandedKeys,r.expanded,e)},[oe,p]),se=me(()=>R.filter(e=>e.dataField!==E&&e.text.toLowerCase().includes(be.toLowerCase())),[R,E,be]),vt=u(e=>e[E],[E]),Rt=u((e,n,r,o)=>{const a=G(e,n.dataField);if(V?.row===r&&V?.field===n.dataField){if(n.editorRenderer){const i=e[E],d={value:T,onUpdate:l=>{ke(l),X?.(l,n.dataField,i),L(null)},onCancel:()=>L(null),onBlur:()=>{T!==a&&X?.(T,n.dataField,i),L(null)},row:e,column:n,rowIndex:r,columnIndex:o,rowId:i,dataField:n.dataField,onUpdateItem:l=>{X?.(l,n.dataField,i),L(null)}};return n.editorRenderer(d,T,e,n,r,o)}return t(yr,{type:n.editorType==="number"?"number":"text",value:T??"",onChange:i=>ke(i.target.value),onBlur:()=>Oe(e,r,n),onKeyDown:i=>{i.key==="Enter"&&Oe(e,r,n),i.key==="Escape"&&L(null)},className:n.editorClasses,style:n.editorStyle,autoFocus:!0})}return n.formatter?n.formatter(a,e,r,o):a==null?"":typeof a=="boolean"?a?"Yes":"No":typeof a=="object"?JSON.stringify(a):String(a)},[V,T,Oe]),An=()=>{if(on)return null;if(typeof ue=="function")return ue({searchValue:U,onSearch:He,onClearFilters:xt,onExport:wt});if(ue)return ue;const e=Object.keys(F).length>0||U;return s(_n,{className:b.toolbar,style:k.toolbar,children:[s(Ie,{children:[Cn,Xe&&s(qn,{children:[t(Pr,{}),t("input",{type:"text",value:U,onChange:n=>He(n.target.value),onFocus:()=>{ne.current=null},placeholder:Kt})]}),Xe&&t(K,{onClick:()=>He(""),disabled:!U,style:{opacity:U?1:.6},children:"Clear"}),t(K,{onClick:xt,disabled:!e,style:{opacity:e?1:.6},children:"Clear all filters"}),mn&&ge!==!0&&s(K,{onClick:wt,children:[t(Or,{}),Ee==="excel"?"Export Excel":"Export CSV"]}),Ge&&s("div",{ref:ye,style:{position:"relative"},children:[t(Mr,{content:"Show/Hide Columns",position:"bottom",children:t(K,{$active:B,onClick:()=>ee(!B),"aria-label":"Toggle column visibility",style:{padding:"0 8px"},children:t(Ar,{})})}),B&&s(Tt,{children:[s(Nt,{children:[t("span",{children:"Show/Hide Columns"}),t("button",{onClick:()=>ee(!1),children:t(jt,{})})]}),t(Lt,{children:t("input",{type:"text",value:be,onChange:n=>ht(n.target.value),placeholder:"Search columns..."})}),s(Mt,{children:[s(Je,{style:{borderBottom:"1px solid #e5e7eb",paddingBottom:8,marginBottom:4},children:[t("input",{type:"checkbox",checked:se.length>0&&se.every(n=>!ie(n.dataField)),onChange:n=>{se.forEach(r=>{n.target.checked?ie(r.dataField)&&xe(r.dataField):ie(r.dataField)||xe(r.dataField)})}}),t("span",{style:{fontWeight:600},children:"Select All"})]}),se.map(n=>s(Je,{children:[t("input",{type:"checkbox",checked:!ie(n.dataField),onChange:()=>xe(n.dataField)}),t("span",{children:n.text})]},n.dataField))]})]})]})]}),bn,s(Ie,{children:[kn&&s(K,{onClick:Sn,children:[t(Jr,{}),"Refresh"]}),Fn&&s(K,{onClick:xn,children:[t(Yr,{}),"Print"]}),qt&&s("div",{ref:Ge?void 0:ye,style:{position:"relative"},children:[s(K,{$active:B,onClick:()=>ee(!B),children:[t(Kr,{}),"Columns"]}),B&&s(Tt,{children:[s(Nt,{children:[t("span",{children:"Toggle Columns"}),t("button",{onClick:()=>ee(!1),children:t(jt,{})})]}),t(Lt,{children:t("input",{type:"text",value:be,onChange:n=>ht(n.target.value),placeholder:"Search columns..."})}),t(Mt,{children:se.map(n=>s(Je,{children:[t("input",{type:"checkbox",checked:!ie(n.dataField),onChange:()=>xe(n.dataField)}),t("span",{children:n.text})]},n.dataField))})]})]}),yn]})]})},On=()=>{if(!ce)return null;const e=Math.ceil(le/m)||1,n=le>0?C*m+1:0,r=D?g.length:ze.length,o=Math.min(C*m+r,le),a=j?.showTotal===!0?`Showing ${n} to ${o} of ${le} Results`:typeof j?.showTotal=="function"?j.showTotal(le,[n,o]):null,c=()=>{const i=[];if(e<=5)for(let l=0;l<e;l++)i.push(l);else if(C<3){for(let l=0;l<4;l++)i.push(l);i.push("..."),i.push(e-1)}else if(C>e-4){i.push(0),i.push("...");for(let l=e-4;l<e;l++)i.push(l)}else{i.push(0),i.push("...");for(let l=C-1;l<=C+1;l++)i.push(l);i.push("..."),i.push(e-1)}return i};return s(sr,{className:b.pagination,style:k.pagination,children:[s(Ie,{children:[(f?.mode==="checkbox"||it)&&z.size>0&&s(br,{onClick:()=>{const i=g.filter(d=>z.has(vt(d)));f?.onChange?.(Array.from(z),i),hn?.(i)},children:[t(kr,{$animate:En,children:z.size},z.size),t("span",{children:"Selected"})]}),j?.showSizeChanger!==!1&&t(hr,{value:m,onChange:i=>Pn(Number(i.target.value)),children:(j?.pageSizeOptions||[10,20,30,50]).map(i=>t("option",{value:i,children:i},i))})]}),s(cr,{children:[t(q,{onClick:()=>Q(0),disabled:C===0,children:t(Vr,{})}),t(q,{onClick:()=>Q(C-1),disabled:C===0,children:t(Wr,{})}),c().map((i,d)=>typeof i=="string"?t("span",{style:{padding:"0 4px",color:"white"},children:i},`ellipsis-${d}`):t(q,{$active:i===C,onClick:()=>Q(i),children:i+1},i)),t(q,{onClick:()=>Q(C+1),disabled:C>=e-1,children:t(Dr,{})}),t(q,{onClick:()=>Q(e-1),disabled:C>=e-1,children:t(zr,{})})]}),a&&t(dr,{children:a}),j?.showQuickJumper&&(()=>{const i=d=>{const l=parseInt(d.value,10);return!isNaN(l)&&l>=1&&l<=e?(Q(l-1),d.value="",!0):!1};return s(fr,{children:["Go to",t("input",{type:"number",min:1,max:e,placeholder:`1-${e}`,onKeyDown:d=>{if(d.key==="Enter"){d.preventDefault();const l=d.target;i(l)&&l.blur()}},onBlur:d=>{const l=d.target;i(l)}}),t(q,{onClick:()=>{const d=document.querySelector(`#${de} input[type="number"]`);d&&(i(d),d.blur())},style:{marginLeft:"4px",padding:"2px 8px"},children:"Go"})]})})()]})},Kn=(zt||R.some(e=>typeof e.filter=="function"||e.filterComponent||e.filter===!0))&&De;return s(Qn,{ref:e=>{typeof I=="function"?I(e):I&&(I.current=e),re.current=e},$bordered:Gt,$compact:x,className:tn||b.root,style:{...k.root,...nn,position:"relative"},"aria-label":st["aria-label"],"aria-labelledby":st["aria-labelledby"],children:[Bt&&t(ur,{className:b.loading,style:k.loading,children:Wt||t(gr,{})}),An(),t(Gn,{$maxHeight:en,$stickyHeader:et,className:b.wrapper,style:k.wrapper,children:s(Xn,{ref:wn,$striped:Xt,$hover:Zt,$compact:x,role:"grid",children:[ot&&t("caption",{className:"sr-only",children:ot}),t(Zn,{$sticky:et,className:b.header,style:k.header,children:s(er,{className:b.headerRow,style:k.headerRow,children:[f?.mode==="checkbox"&&t(we,{$align:"center",$sortable:!1,$compact:x,$width:f.columnWidth||40,children:!f.hideSelectAll&&t(Et,{checked:Ve,ref:e=>{e&&(e.indeterminate=Ln)},onChange:zn})}),p&&t(we,{$align:"center",$sortable:!1,$compact:x,$width:p.columnWidth||40}),Z&&t(we,{$align:"center",$sortable:!1,$compact:x,$width:lt,children:gn}),H.map((e,n)=>{const r=typeof e.filter=="function"||e.filter===!0||e.filterComponent||e.filterRenderer,o=r?(typeof e.filter=="function"?e.filter:null)||e.filterComponent||Lr(e.filterType||"text"):null,a=c=>Ft(e.dataField,c);return t(we,{$align:e.headerAlign||e.align||"left",$sortable:!!e.sort,$compact:x,$width:e.width,$minWidth:e.minWidth,$pinned:e.pinned,$customClass:!!e.headerClasses,className:[e.headerClasses,b.headerCell].filter(Boolean).join(" "),style:typeof e.headerStyle=="function"?e.headerStyle(e):e.headerStyle||k.headerCell,role:"columnheader","aria-sort":S.field===e.dataField?S.order==="asc"?"ascending":S.order==="desc"?"descending":"none":void 0,children:(()=>{const c=typeof e.headerStyle=="function"?e.headerStyle(e):e.headerStyle,i=e.isHeaderTitle!==!1&&e.hideHeaderText!==!0&&!(c&&c.fontSize===0),d=e.isHeaderFilterComp!==!1&&Kn&&r&&o,l=e.isHeaderSort!==!1&&e.sort;return d?s("div",{style:{display:"flex",flexDirection:"column",gap:4,width:"100%"},children:[i&&t("span",{style:{color:"white",fontWeight:600,fontSize:12,whiteSpace:"nowrap",cursor:l?"pointer":"default"},onClick:()=>l&&Ae(e),children:e.headerFormatter?e.headerFormatter(e,n):e.headerText||e.text}),s("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:6,width:"100%",minHeight:24},children:[t("div",{style:{width:l?"80%":"100%",minWidth:0,flexShrink:1,display:"flex",alignItems:"center"},onClick:y=>y.stopPropagation(),children:e.filterRenderer?e.filterRenderer(a,e):t("div",{onFocusCapture:()=>{ne.current=e.dataField},"data-filter-wrapper":e.dataField,children:t(o,{column:e,value:F[e.dataField],onChange:a,onClear:()=>Ft(e.dataField,null)},`filter-${e.dataField}`)})}),l&&t("div",{style:{width:"20%",minWidth:24,height:24,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,cursor:"pointer"},onClick:()=>Ae(e),children:e.sortCaret?e.sortCaret(S.field===e.dataField?S.order:null,e):t(Pt,{order:S.field===e.dataField?S.order:null,column:e})})]})]}):s("div",{style:{display:"flex",alignItems:"center",justifyContent:e.headerAlign||e.align||"left",gap:6,width:"100%",cursor:l?"pointer":"default"},onClick:()=>l&&Ae(e),children:[i&&t("span",{style:{color:"white",fontWeight:600,fontSize:12,whiteSpace:"nowrap"},children:e.headerFormatter?e.headerFormatter(e,n):e.headerText||e.text}),l&&t("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:e.sortCaret?e.sortCaret(S.field===e.dataField?S.order:null,e):t(Pt,{order:S.field===e.dataField?S.order:null,column:e})})]})})()},e.dataField)})]})}),t(tr,{className:b.body,style:k.body,children:ze.length===0?t("tr",{children:t("td",{colSpan:H.length+(f?.mode==="checkbox"?1:0)+(p?1:0)+(Z?1:0),children:s(pr,{className:b.empty,style:k.empty,children:[t(Ir,{}),t("span",{children:rn})]})})}):ze.map((e,n)=>{const r=vt(e),o=Nn(r),a=Mn(r),c=f?.getCheckboxProps?.(e),i=p?.rowExpandable?.(e)??!0,d=typeof Te=="function"?Te(e,n):Te,l=typeof Ne=="function"?Ne(e,n):Ne,y=o?typeof f?.selectedRowStyle=="function"?f.selectedRowStyle(e):f?.selectedRowStyle:void 0,Ke=o&&y&&(y.backgroundColor||y.background),In=c?.disabled?dn||{backgroundColor:"#f3f4f6",opacity:.7}:void 0;return s(Yn.Fragment,{children:[s(nr,{$selected:o,$clickable:!!Le||f?.mode==="single"||p?.expandRowByClick===!0,$disabled:!!c?.disabled,$hasCustomSelectedStyle:!!Ke,"data-custom-selected":Ke?"true":void 0,className:`${b.row||""} ${d||""} ${o?typeof f?.selectedRowClassName=="function"?f.selectedRowClassName(e):f?.selectedRowClassName||"":""}`,style:{...k.row,...l,...y,...In},onClick:h=>jn(e,n,h),onDoubleClick:h=>{Me?.(e,n,h)},role:"row","aria-selected":o,children:[f?.mode==="checkbox"&&t(ve,{$align:"center",$compact:x,$padding:he,children:t(Et,{checked:o,disabled:c?.disabled,onChange:h=>Vn(e,h),onClick:h=>h.stopPropagation()})}),p&&t(ve,{$align:"center",$compact:x,$padding:he,children:i&&t(rr,{$expanded:a,onClick:h=>Hn(e,h),children:p.expandIcon?p.expandIcon({expanded:a,row:e,onExpand:()=>oe(e)}):t(Hr,{})})}),Z&&t(ve,{$align:"center",$compact:x,$padding:he,style:{width:lt,color:"#6b7280",fontWeight:500},children:at?at(n+1,e):n+1+C*m}),H.map((h,A)=>{const $t=typeof h.classes=="function"?h.classes(G(e,h.dataField),e,n,A):h.classes,Jn=typeof h.style=="function"?h.style(G(e,h.dataField),e,n,A):h.style;return t(ve,{$align:h.align||"left",$compact:x,$padding:he,$pinned:h.pinned,$hasCustomClass:!!$t,className:$t||b.cell,style:{...k.cell,...Jn},onClick:W=>Wn(e,n,h,A,W),onDoubleClick:W=>{W.stopPropagation(),Bn(e,n,h,A,W)},role:"gridcell",children:(()=>{const W=ae(h,e,n,A);return W.isEditable&&J!=="none"?W.customEditor?W.customEditor:t(Cr,{$editing:V?.row===n&&V?.field===h.dataField,$showEditIcon:Ut,children:Rt(e,h,n,A)}):Rt(e,h,n,A)})()},h.dataField)})]}),p&&a&&i&&t(or,{children:t(ir,{colSpan:H.length+(f?.mode==="checkbox"?1:0)+(p?1:0)+(Z?1:0),children:p.expandedRowRender?.(e,n,a)})})]},r)})}),ln&&t(lr,{className:b.footer,style:k.footer,children:s(ar,{className:b.footerRow,style:k.footerRow,children:[f?.mode==="checkbox"&&t(Re,{$align:"center",$compact:x}),p&&t(Re,{$align:"center",$compact:x}),Z&&t(Re,{$align:"center",$compact:x}),H.map(e=>t(Re,{$align:e.align||"left",$compact:x,className:b.footerCell,style:k.footerCell,children:typeof e.footer=="function"?e.footer(e,g):e.footerFormatter?e.footerFormatter(e,g):e.footer},e.dataField))]})})]})}),On()]})});Table.displayName="Table";export default Table;
