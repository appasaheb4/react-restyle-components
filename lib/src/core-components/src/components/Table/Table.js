"use strict";"use client";import{jsx as n,jsxs as c}from"react/jsx-runtime";import Fr,{forwardRef as kr,useState as z,useCallback as u,useMemo as ce,useEffect as Q,useRef as L}from"react";import{TableRoot as xr,Toolbar as mr,ToolbarGroup as ft,SearchInput as Sr,ToolbarButton as te,TableWrapper as vr,StyledTable as wr,TableHeader as Rr,HeaderRow as $r,HeaderCell as Ke,TableBody as Er,TableRow as Tr,TableCell as Je,TableCellContent as Dr,Checkbox as _t,ExpandButton as Pr,ExpandedRow as Lr,ExpandedCell as Nr,TableFooter as Mr,FooterRow as jr,FooterCell as Ye,PaginationWrapper as Wr,PaginationInfo as zr,PaginationControls as Br,PageButton as he,PageSizeSelect as Ar,QuickJumper as Or,EmptyState as Hr,LoadingOverlay as Vr,LoadingSpinner as Ir,EditableCell as Kr,CellEditor as Jr,ColumnTogglePanel as Zt,ColumnToggleHeader as en,ColumnToggleSearch as tn,ColumnToggleList as nn,ColumnToggleItem as pt,ColumnToggleDragHandle as rn,SelectionIndicator as Yr,SelectionCount as Ur}from"./elements";import{useSortState as qr,useFilterState as Gr,usePaginationState as Qr,useRowSelection as Xr,useRowExpansion as _r,useColumnVisibility as Zr,useTableDebounce as ei,sortData as ti,filterData as gt,paginateData as ni,getNestedValue as B,exportToCSV as ri,exportToExcel as ii}from"./hooks";import{getFilterComponent as oi}from"./filters";import{Tooltip as li}from"../Tooltip";import{useColumnResize as ai,getColumnStyle as on}from"./columnResize";const si=()=>c("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n("circle",{cx:"11",cy:"11",r:"8"}),n("path",{d:"M21 21l-4.35-4.35",strokeLinecap:"round"})]}),di=({size:O=16,color:X="white"})=>n("svg",{viewBox:"0 0 16 16",fill:X,style:{width:O,height:O,display:"block"},children:n("path",{fillRule:"evenodd",d:"M8 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L7.5 2.707V14.5a.5.5 0 0 0 .5.5z"})}),ci=({size:O=16,color:X="white"})=>n("svg",{viewBox:"0 0 16 16",fill:X,style:{width:O,height:O,display:"block"},children:n("path",{fillRule:"evenodd",d:"M8 1a.5.5 0 0 1 .5.5v11.793l3.146-3.147a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 .708-.708L7.5 13.293V1.5A.5.5 0 0 1 8 1z"})}),ln=({order:O})=>{const X=()=>{switch(O){case"asc":return{up:18,down:12};case"desc":return{up:12,down:18};default:return{up:16,down:16}}},{up:ne,down:fe}=X();return c("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",gap:0},children:[n(di,{size:ne,color:"white"}),n(ci,{size:fe,color:"white"})]})},hi=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n("path",{d:"M15 18l-6-6 6-6",strokeLinecap:"round",strokeLinejoin:"round"})}),fi=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n("path",{d:"M9 18l6-6-6-6",strokeLinecap:"round",strokeLinejoin:"round"})}),pi=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n("path",{d:"M11 17l-5-5 5-5M18 17l-5-5 5-5",strokeLinecap:"round",strokeLinejoin:"round"})}),gi=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n("path",{d:"M13 7l5 5-5 5M6 7l5 5-5 5",strokeLinecap:"round",strokeLinejoin:"round"})}),ui=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n("path",{d:"M9 18l6-6-6-6",strokeLinecap:"round",strokeLinejoin:"round"})}),an=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n("path",{d:"M18 6L6 18M6 6l12 12",strokeLinecap:"round",strokeLinejoin:"round"})}),Ci=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n("path",{d:"M22 3H2l8 9.46V19l4 2v-8.54L22 3z",strokeLinecap:"round",strokeLinejoin:"round"})}),yi=()=>n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n("path",{d:"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3",strokeLinecap:"round",strokeLinejoin:"round"})}),bi=()=>c("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n("rect",{x:"3",y:"3",width:"7",height:"18",rx:"1"}),n("rect",{x:"14",y:"3",width:"7",height:"18",rx:"1"})]}),Fi=()=>c("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[n("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),n("path",{d:"M3 9h18M9 3v18",strokeLinecap:"round"})]}),ki=()=>c("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n("path",{d:"M23 4v6h-6M1 20v-6h6",strokeLinecap:"round",strokeLinejoin:"round"}),n("path",{d:"M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15",strokeLinecap:"round",strokeLinejoin:"round"})]}),xi=()=>c("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n("path",{d:"M6 9V2h12v7M6 18H4a2 2 0 01-2-2v-5a2 2 0 012-2h16a2 2 0 012 2v5a2 2 0 01-2 2h-2",strokeLinecap:"round",strokeLinejoin:"round"}),n("rect",{x:"6",y:"14",width:"12",height:"8"})]}),so=()=>c("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n("circle",{cx:"12",cy:"12",r:"10"}),n("path",{d:"M12 8v4M12 16h.01",strokeLinecap:"round",strokeLinejoin:"round"})]});export const Table=kr(function(X,ne){const{id:fe,data:C,columns:F,keyField:M="_id",loading:sn=!1,loadingIndicator:dn,pagination:we=!0,paginationConfig:ut,totalSize:A,remote:Ct=!0,defaultSort:cn,sort:hn,filterable:fn=!1,defaultFilters:pn,filters:gn,defaultShowFilters:un=!0,showFilters:yt,onShowFiltersChange:bt,showFilterToggle:Ft=!0,searchable:kt=!0,searchPlaceholder:Cn="Search...",defaultSearchValue:yn="",searchValue:bn,searchDebounce:Fn=300,rowSelection:H,expandable:g,editMode:V="dblclick",showEditIcon:kn=!1,onCellEdit:xt,exportable:xn=!0,exportFileName:mn="table_export",exportFormat:Ue="csv",columnToggle:Sn=!1,bordered:vn=!0,striped:wn=!1,hover:Rn=!0,compact:v=!1,cellPadding:Re,stickyHeader:mt=!1,maxHeight:$n,rowClassName:qe,rowStyle:Ge,classNames:k={},styles:x={},className:En,style:Tn,emptyText:Dn="No data available",onChange:D,onPageChange:$e,onSortChange:St,onFilterChange:Ee,onSearch:vt,onRowClick:Qe,onRowDoubleClick:Xe,onClearFilters:wt,toolbar:Te,hideToolbar:Pn=!1,showFooter:Ln=!1,caption:Rt,isDelete:mi=!1,isEditModify:Si,isUpdate:vi,isExport:Nn,isSelectRow:$t,getNonSelectableRows:Mn,nonSelectableStyle:jn,isView:wi=!1,fileName:Wn,hideExcelSheet:De=!1,onSelectedRow:zn,selectedRowStyle:Bn,selectedRowClassName:An,onUpdateItem:pe,onPageSizeChange:Pe,onFilter:_e,clearAllFilter:On,onDelete:Ri,onEdit:$i,onView:Ei,dynamicStylingFields:Ti,fieldTypeConfig:re,showRowNumber:ge=!1,rowNumberWidth:Et=50,rowNumberTitle:Hn="#",rowNumberRender:Tt,toolbarPosition:Di="top",toolbarLeft:Vn,toolbarRight:In,toolbarCenter:Kn,refreshable:Jn=!1,onRefresh:Yn,printable:Un=!1,onPrint:qn,size:Pi="medium",error:Li,onRetry:Ni,skeletonLoading:Mi=!1,skeletonRowCount:ji=5,hideHeader:Wi=!1,highlightedRowKeys:zi=[],highlightRowStyle:Bi,highlightRowClassName:Ai,onRowMouseEnter:Oi,onRowMouseLeave:Hi,onCellClick:Vi,onHeaderClick:Ii,resizable:j=!0,resizeConfig:Le,reorderable:$=!0,reorderConfig:Dt,...Pt}=X,Gn=Nn??xn,Ze=Wn??mn,_=ce(()=>A!==void 0&&A>0&&A<=C.length?!1:Ct,[Ct,A,C.length]),d=$t?{mode:"checkbox",selectedRowStyle:Bn||H?.selectedRowStyle,selectedRowClassName:An||H?.selectedRowClassName,...H,getCheckboxProps:e=>{const t=e[M],r=Mn?.includes(t),i=H?.getCheckboxProps?.(e);return{...i,disabled:r||i?.disabled}},onChange:(e,t)=>{H?.onChange?.(e,t)}}:H,et=ce(()=>d?d.allowEditingCells||[]:[],[d]),ie=et.length>0,oe=u(e=>ie?et.includes(e):!1,[ie,et]),I=we?{page:0,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:!0,pageSizeOptions:[10,20,30,50],...ut}:ut,Ki={small:{padding:"4px 8px",fontSize:"12px"},medium:{padding:"8px 12px",fontSize:"14px"},large:{padding:"12px 16px",fontSize:"16px"}},Qn=L(null),Ne=L(null),Lt=L(0),[Xn,Nt]=z(yn),[_n,Zn]=z(un),[K,ue]=z(!1),[Me,Mt]=z(""),[er,tt]=z("none"),[J,le]=z(null),[jt,Y]=z(null),[w,je]=z(F);Q(()=>{const e=w.map(r=>r.dataField).sort().join(","),t=F.map(r=>r.dataField).sort().join(",");if(e!==t){const r=new Map(F.map(o=>[o.dataField,o])),i=new Set(w.map(o=>o.dataField)),l=w.filter(o=>r.has(o.dataField)).map(o=>r.get(o.dataField)),h=F.filter(o=>!i.has(o.dataField));je([...l,...h])}else{const r=new Map(F.map(i=>[i.dataField,i]));je(w.map(i=>r.get(i.dataField)||i))}},[F]),Q(()=>{if(!K)return;const e=t=>{Ne.current&&!Ne.current.contains(t.target)&&ue(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[K]);const nt=yt!==void 0,rt=nt?yt:_n,Ji=u(()=>{const e=!rt;nt||Zn(e),bt?.(e)},[rt,nt,bt]),[U,E]=z(null),[W,q]=z(null),We=L(new Map);Q(()=>{We.current.clear()},[U]);const ae=bn??Xn,P=ei(ae,Fn),{sort:m,handleSort:Wt}=qr(cn,hn),{filters:S,setFilter:zt,clearFilters:Bt}=Gr(pn,gn),Ce=L(!1),ze=L("filter"),At=L(_e),tr=L(null),ye=L(null),be=L(null);Q(()=>{const e=t=>{be.current&&!be.current.contains(t.target)&&(ye.current=null)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),Q(()=>{const e=()=>{if(ye.current&&be.current){const r=be.current.querySelector(`[data-filter-field="${ye.current}"]`);if(r&&document.activeElement!==r){r.focus();const i=r.value?.length||0;r.setSelectionRange(i,i)}}},t=[requestAnimationFrame(()=>e()),setTimeout(()=>e(),50),setTimeout(()=>e(),150)];return()=>{t.forEach(r=>{typeof r=="number"&&(cancelAnimationFrame(r),clearTimeout(r))})}},[C]);const{page:y,pageSize:T,totalPages:Yi,goToPage:Ot,goToNextPage:Ui,goToPrevPage:qi,goToFirstPage:Gi,goToLastPage:Qi,changePageSize:Ht}=Qr(I?.page||0,I?.pageSize||10,A??C.length),{selectedKeys:Z,isSelected:nr,toggleRow:Be,toggleAll:Vt,isAllSelected:it,isIndeterminate:rr}=Xr(C,d?.keyField||M,d?.mode||"none",d?.selectedRowKeys,d?.getCheckboxProps),{expandedKeys:Xi,isExpanded:ir,toggleExpand:Fe}=_r(g?.keyField||M,g?.defaultExpandedRowKeys,g?.expandedRowKeys,g?.accordion),{visibleColumns:se,toggleColumn:Ae,isColumnHidden:ee}=Zr(F,fe),{columnWidths:Oe,getResizeHandle:_i,resetWidths:Zi,isResizing:It}=ai({columns:se,config:Le,enabled:j,tableId:fe}),or=ce(()=>w.filter(e=>!ee(e.dataField)),[w,ee]),ot=$?or:se;Q(()=>{At.current=_e},[_e]);const Kt=L(P),Jt=L(JSON.stringify(S));Q(()=>{if(!Ce.current)return;const e=JSON.stringify(S),t=Kt.current!==P,r=Jt.current!==e;if(!t&&!r){Ce.current=!1;return}Kt.current=P,Jt.current=e;const i={};Object.keys(S).forEach(o=>{const a=S[o];a!=null&&a!==""&&(i[o]=a)});const l=Object.keys(i).length>0,h={...i};ze.current==="search"&&P&&(h.srText=P),At.current?.(ze.current,h,y+1,T),Ce.current=!1},[P,S,y,T]),Q(()=>{const e=Z.size,t=Lt.current;e>t?tt("up"):e<t&&tt("down"),Lt.current=e;const r=setTimeout(()=>{tt("none")},300);return()=>clearTimeout(r)},[Z.size]);const lt=ce(()=>{if(_)return C;let e=[...C];return e=gt(e,S,F,P),e=ti(e,m,F),we&&(e=ni(e,y,T)),e},[C,S,m,y,T,P,_,we,F]),ke=ce(()=>A!==void 0&&A>0?A:_?C.length:gt(C,S,F,P).length,[C,S,F,P,_,A]),at=u(e=>{Nt(e),vt?.(e),Ce.current=!0,ze.current="search",D?.({type:"search",search:e})},[vt,D]),st=u(e=>{if(!e.sort)return;const t=Wt(e.dataField,m.order);St?.(t),D?.({type:"sort",sort:t})},[m,Wt,St,D]),Yt=u((e,t)=>{zt(e,t);const r={...S,[e]:t};Ee?.(r),Ce.current=!0,ze.current="filter",D?.({type:"filter",filters:r})},[S,zt,Ee,D]),Ut=u(()=>{Bt(),Nt(""),wt?.(),On?.(),Ee?.({}),D?.({type:"filter",filters:{}}),tr.current=null},[Bt,wt,Ee,D]),de=u(e=>{Ot(e);const t=e+1;Pe?.(t,T),$e?.(t,T),D?.({type:"pagination",pagination:{page:t,pageSize:T}})},[Ot,T,Pe,$e,D]),lr=u(e=>{Ht(e),Pe?.(1,e),$e?.(1,e),D?.({type:"pagination",pagination:{page:1,pageSize:e}})},[Ht,Pe,$e,D]),ar=u((e,t,r)=>{if(!d?.getCheckboxProps?.(e)?.disabled){if(d?.mode==="single"){const l=Be(e);l&&d?.onChange?.(l.selectedKeys,l.selectedRows)}if(g?.expandRowByClick){const l=Fe(e);l&&g.onExpandChange?.(l.expandedKeys,l.expanded,e)}Qe?.(e,t,r)}},[H,g,Be,Fe,Qe,d]),xe=u((e,t,r,i)=>{const l=!!e.editorRenderer;if(e.editable===void 0)return{isEditable:l};if(e.editable===!1)return{isEditable:!1};if(e.editable===!0)return{isEditable:!0};const h=B(t,e.dataField),o=e.editable(h,t,r,i);return typeof o=="boolean"?{isEditable:o}:{isEditable:!0,customEditor:o}},[]),sr=u((e,t,r,i,l)=>{if(d&&!!d.getCheckboxProps?.(e)?.disabled&&(!ie||!oe(r.dataField)))return;const{isEditable:h}=xe(r,e,t,i);r.events?.onDoubleClick?.(l,e,t,r,i),V!=="none"&&(d?!!d.getCheckboxProps?.(e)?.disabled?oe(r.dataField)&&V==="dblclick"&&(E({row:t,field:r.dataField}),q(B(e,r.dataField))):h&&V==="dblclick"&&(E({row:t,field:r.dataField}),q(B(e,r.dataField))):h&&V==="dblclick"&&(E({row:t,field:r.dataField}),q(B(e,r.dataField)))),Xe?.(e,t,l)},[V,Xe,xe,d]),dr=u((e,t,r,i,l)=>{if(d&&!!d.getCheckboxProps?.(e)?.disabled&&(!ie||!oe(r.dataField)))return;const{isEditable:h}=xe(r,e,t,i);l&&r.events?.onClick?.(l,e,t,r,i),V==="click"&&(d?!!d.getCheckboxProps?.(e)?.disabled?oe(r.dataField)&&(E({row:t,field:r.dataField}),q(B(e,r.dataField))):h&&(E({row:t,field:r.dataField}),q(B(e,r.dataField))):h&&(E({row:t,field:r.dataField}),q(B(e,r.dataField))))},[V,xe,d]),dt=u((e,t,r)=>{if(U){if(r.validator){const l=r.validator(W,e);if(l!==!0){alert(typeof l=="string"?l:"Invalid value"),E(null);return}}const i=e[M];xt?.(W,r.dataField,e,t),pe?.(W,r.dataField,i)}E(null)},[U,W,xt,pe,M]),cr=(e,t)=>t.split(".").reduce((r,i)=>r?.[i],e),qt=u((e,t,r)=>{const i=re?.[t],l=typeof i=="string"?{type:i}:i;switch(l?.type||"string"){case"array":return l?.fields&&l.fields.length>0?Array.isArray(e)?e.slice(0,l.maxItems||e.length).map(s=>typeof s=="object"&&l.fields?l.fields.map(p=>s[p]).filter(Boolean).join(", "):typeof s=="string"?s:"").filter(Boolean).join(l.separator||"; "):e||"":Array.isArray(e)?e.map(s=>typeof s=="object"?JSON.stringify(s):s).join("; "):e||"";case"object":if(!e||typeof e!="object")return"";const o=l?.fields||l?.keys||[],a=l?.labelMap||{};return o.length>0?o.map(s=>{const p=cr(e,s);return p!=null?`${a[s]||s}: ${p}`:null}).filter(Boolean).join(", "):Object.entries(e).map(([s,p])=>typeof p=="boolean"?`${s}: ${p?"Yes":"No"}`:`${s}: ${p}`).join(", ");case"date":if(!e)return"";try{const s=new Date(e),p=l?.dateFormat||"YYYY-MM-DD HH:mm:ss";return s.toISOString().slice(0,19).replace("T"," ")}catch{return String(e)}case"number":return e!=null?String(Number(e)):"";case"boolean":return typeof e=="boolean"?e?"Yes":"No":"";default:return typeof e=="boolean"?e?"Yes":"No":e!=null?String(e):""}},[re]),Gt=u(async()=>{const e=_?C:gt(C,S,F,P);let t=se.filter(i=>i.csvExport!==!1);Array.isArray(De)&&(t=t.filter(i=>!De.includes(i.dataField))),re&&(t=t.filter(i=>{const l=re[i.dataField],h=typeof l=="string"?{type:l}:l;return!(h?.hideFromExport||h?.csvExport===!1)}));const r=t.map(i=>{const l=re?.[i.dataField],h=typeof l=="string"?{type:l}:l;return i.csvFormatter?i:h?.exportFormatter?{...i,csvFormatter:h.exportFormatter}:h?.type?{...i,csvFormatter:(o,a)=>qt(o,i.dataField,a)}:i});Ue==="excel"?await ii(e,r,Ze):ri(e,r,Ze)},[C,S,F,P,se,De,re,qt,Ze,_,Ue]),hr=u((e,t)=>{t.stopPropagation();const r=Be(e);r&&d?.onChange?.(r.selectedKeys,r.selectedRows)},[Be,H]),fr=u(()=>{const e=Vt(!it);e&&d?.onChange?.(e.selectedKeys,e.selectedRows)},[Vt,it,d]),pr=u((e,t)=>{if(d?.getCheckboxProps?.(e)?.disabled)return;t.stopPropagation();const i=Fe(e);g?.onExpandChange?.(i.expandedKeys,i.expanded,e)},[Fe,g,d]),me=ce(()=>w.filter(e=>e.dataField!==M&&e.text.toLowerCase().includes(Me.toLowerCase())),[w,M,Me]),Qt=u(e=>e[M],[M]),Xt=u((e,t,r,i)=>{const l=B(e,t.dataField);if(U?.row===r&&U?.field===t.dataField){if(t.editorRenderer){const o=e[M],a=`${o??r}-${t.dataField}`;if(!We.current.has(a)){const s={value:W,onUpdate:p=>{q(p),pe?.(p,t.dataField,o),E(null)},onCancel:()=>E(null),onBlur:()=>{W!==l&&pe?.(W,t.dataField,o),E(null)},row:e,column:t,rowIndex:r,columnIndex:i,rowId:o,dataField:t.dataField,onUpdateItem:p=>{pe?.(p,t.dataField,o),E(null)}};We.current.set(a,t.editorRenderer(s,W,e,t,r,i))}return We.current.get(a)}return n(Jr,{type:t.editorType==="number"?"number":"text",value:W??"",onChange:o=>q(o.target.value),onBlur:()=>dt(e,r,t),onKeyDown:o=>{o.key==="Enter"&&dt(e,r,t),o.key==="Escape"&&E(null)},className:t.editorClasses,style:t.editorStyle,autoFocus:!0})}return t.formatter?t.formatter(l,e,r,i):l==null?"":typeof l=="boolean"?l?"Yes":"No":typeof l=="object"?JSON.stringify(l):String(l)},[U,W,dt]),gr=()=>{if(Pn)return null;if(typeof Te=="function")return Te({searchValue:ae,onSearch:at,onClearFilters:Ut,onExport:Gt});if(Te)return Te;const e=Object.keys(S).length>0||ae;return c(mr,{className:k.toolbar,style:x.toolbar,children:[c(ft,{children:[Vn,kt&&c(Sr,{children:[n(si,{}),n("input",{type:"text",value:ae,onChange:t=>at(t.target.value),onFocus:()=>{ye.current=null},placeholder:Cn})]}),kt&&n(te,{onClick:()=>at(""),disabled:!ae,style:{opacity:ae?1:.6},children:"Clear"}),n(te,{onClick:Ut,disabled:!e,style:{opacity:e?1:.6},children:"Clear all filters"}),Gn&&De!==!0&&c(te,{onClick:Gt,children:[n(yi,{}),Ue==="excel"?"Export Excel":"Export CSV"]}),Ft&&c("div",{ref:Ne,style:{position:"relative"},children:[n(li,{content:"Show/Hide Columns",position:"bottom",children:n(te,{$active:K,onClick:()=>ue(!K),"aria-label":"Toggle column visibility",style:{padding:"0 8px"},children:n(Ci,{})})}),K&&c(Zt,{children:[c(en,{children:[n("span",{children:"Show/Hide Columns"}),n("button",{onClick:()=>ue(!1),children:n(an,{})})]}),n(tn,{children:n("input",{type:"text",value:Me,onChange:t=>Mt(t.target.value),placeholder:"Search columns..."})}),c(nn,{children:[c(pt,{style:{borderBottom:"1px solid #e5e7eb",paddingBottom:8,marginBottom:4},children:[n("input",{type:"checkbox",checked:me.length>0&&me.every(t=>!ee(t.dataField)),onChange:t=>{me.forEach(r=>{t.target.checked?ee(r.dataField)&&Ae(r.dataField):ee(r.dataField)||Ae(r.dataField)})}}),n("span",{style:{fontWeight:600},children:"Select All"})]}),me.map((t,r)=>c(pt,{$reorderable:$,$isDragging:J===t.dataField,$isDragOver:jt===t.dataField,draggable:$,onDragStart:i=>{$&&(le(t.dataField),i.dataTransfer.effectAllowed="move",i.dataTransfer.setData("text/plain",t.dataField))},onDragEnd:()=>{le(null),Y(null)},onDragOver:i=>{$&&(i.preventDefault(),J&&J!==t.dataField&&Y(t.dataField))},onDragLeave:()=>{Y(null)},onDrop:i=>{if(!$)return;i.preventDefault();const l=i.dataTransfer.getData("text/plain");if(l&&l!==t.dataField){const h=w.findIndex(a=>a.dataField===l),o=w.findIndex(a=>a.dataField===t.dataField);if(h!==-1&&o!==-1){const a=[...w],[s]=a.splice(h,1);a.splice(o,0,s),je(a),Dt?.onReorder?.(a,h,o)}}le(null),Y(null)},children:[n("input",{type:"checkbox",checked:!ee(t.dataField),onChange:()=>Ae(t.dataField),onClick:i=>i.stopPropagation()}),n("span",{children:t.text}),$&&n(rn,{$isDragging:J===t.dataField,title:"Drag to reorder"})]},t.dataField))]})]})]})]}),Kn,c(ft,{children:[Jn&&c(te,{onClick:Yn,children:[n(ki,{}),"Refresh"]}),Un&&c(te,{onClick:qn,children:[n(xi,{}),"Print"]}),Sn&&c("div",{ref:Ft?void 0:Ne,style:{position:"relative"},children:[c(te,{$active:K,onClick:()=>ue(!K),children:[n(bi,{}),"Columns"]}),K&&c(Zt,{children:[c(en,{children:[n("span",{children:"Toggle Columns"}),n("button",{onClick:()=>ue(!1),children:n(an,{})})]}),n(tn,{children:n("input",{type:"text",value:Me,onChange:t=>Mt(t.target.value),placeholder:"Search columns..."})}),n(nn,{children:me.map((t,r)=>c(pt,{$reorderable:$,$isDragging:J===t.dataField,$isDragOver:jt===t.dataField,draggable:$,onDragStart:i=>{$&&(le(t.dataField),i.dataTransfer.effectAllowed="move",i.dataTransfer.setData("text/plain",t.dataField))},onDragEnd:()=>{le(null),Y(null)},onDragOver:i=>{$&&(i.preventDefault(),J&&J!==t.dataField&&Y(t.dataField))},onDragLeave:()=>{Y(null)},onDrop:i=>{if(!$)return;i.preventDefault();const l=i.dataTransfer.getData("text/plain");if(l&&l!==t.dataField){const h=w.findIndex(a=>a.dataField===l),o=w.findIndex(a=>a.dataField===t.dataField);if(h!==-1&&o!==-1){const a=[...w],[s]=a.splice(h,1);a.splice(o,0,s),je(a),Dt?.onReorder?.(a,h,o)}}le(null),Y(null)},children:[n("input",{type:"checkbox",checked:!ee(t.dataField),onChange:()=>Ae(t.dataField),onClick:i=>i.stopPropagation()}),n("span",{children:t.text}),$&&n(rn,{$isDragging:J===t.dataField,title:"Drag to reorder"})]},t.dataField))})]})]}),In]})]})},ur=()=>{if(!we)return null;const e=Math.ceil(ke/T)||1,t=ke>0?y*T+1:0,r=_?C.length:lt.length,i=Math.min(y*T+r,ke),l=I?.showTotal===!0?`Showing ${t} to ${i} of ${ke} Results`:typeof I?.showTotal=="function"?I.showTotal(ke,[t,i]):null,h=()=>{const o=[];if(e<=5)for(let s=0;s<e;s++)o.push(s);else if(y<3){for(let s=0;s<4;s++)o.push(s);o.push("..."),o.push(e-1)}else if(y>e-4){o.push(0),o.push("...");for(let s=e-4;s<e;s++)o.push(s)}else{o.push(0),o.push("...");for(let s=y-1;s<=y+1;s++)o.push(s);o.push("..."),o.push(e-1)}return o};return c(Wr,{className:k.pagination,style:x.pagination,children:[c(ft,{children:[(d?.mode==="checkbox"||$t)&&Z.size>0&&c(Yr,{onClick:()=>{const o=C.filter(a=>Z.has(Qt(a)));d?.onChange?.(Array.from(Z),o),zn?.(o)},children:[n(Ur,{$animate:er,children:Z.size},Z.size),n("span",{children:"Selected"})]}),I?.showSizeChanger!==!1&&n(Ar,{value:T,onChange:o=>lr(Number(o.target.value)),children:(I?.pageSizeOptions||[10,20,30,50]).map(o=>n("option",{value:o,children:o},o))})]}),c(Br,{children:[n(he,{onClick:()=>de(0),disabled:y===0,children:n(pi,{})}),n(he,{onClick:()=>de(y-1),disabled:y===0,children:n(hi,{})}),h().map((o,a)=>typeof o=="string"?n("span",{style:{padding:"0 4px",color:"white"},children:o},`ellipsis-${a}`):n(he,{$active:o===y,onClick:()=>de(o),children:o+1},o)),n(he,{onClick:()=>de(y+1),disabled:y>=e-1,children:n(fi,{})}),n(he,{onClick:()=>de(e-1),disabled:y>=e-1,children:n(gi,{})})]}),l&&n(zr,{children:l}),I?.showQuickJumper&&(()=>{const o=a=>{const s=parseInt(a.value,10);return!isNaN(s)&&s>=1&&s<=e?(de(s-1),a.value="",!0):!1};return c(Or,{children:["Go to",n("input",{type:"number",min:1,max:e,placeholder:`1-${e}`,onKeyDown:a=>{if(a.key==="Enter"){a.preventDefault();const s=a.target;o(s)&&s.blur()}},onBlur:a=>{const s=a.target;o(s)}}),n(he,{onClick:()=>{const a=document.querySelector(`#${fe} input[type="number"]`);a&&(o(a),a.blur())},style:{marginLeft:"4px",padding:"2px 8px"},children:"Go"})]})})()]})},Cr=(fn||F.some(e=>typeof e.filter=="function"||e.filterComponent||e.filter===!0))&&rt;return c(xr,{ref:e=>{typeof ne=="function"?ne(e):ne&&(ne.current=e),be.current=e},$bordered:vn,$compact:v,className:En||k.root,style:{...x.root,...Tn,position:"relative"},"aria-label":Pt["aria-label"],"aria-labelledby":Pt["aria-labelledby"],children:[sn&&n(Vr,{className:k.loading,style:x.loading,children:dn||n(Ir,{})}),gr(),n(vr,{$maxHeight:$n,$stickyHeader:mt,className:k.wrapper,style:x.wrapper,children:c(wr,{ref:Qn,$striped:wn,$hover:Rn,$compact:v,role:"grid",children:[Rt&&n("caption",{className:"sr-only",children:Rt}),n(Rr,{$sticky:mt,className:k.header,style:x.header,children:c($r,{className:k.headerRow,style:x.headerRow,children:[d?.mode==="checkbox"&&n(Ke,{$align:"center",$sortable:!1,$compact:v,$width:d.columnWidth||40,children:!d.hideSelectAll&&n(_t,{checked:it,ref:e=>{e&&(e.indeterminate=rr)},onChange:fr})}),g&&n(Ke,{$align:"center",$sortable:!1,$compact:v,$width:g.columnWidth||40}),ge&&n(Ke,{$align:"center",$sortable:!1,$compact:v,$width:Et,children:Hn}),ot.map((e,t)=>{const r=typeof e.filter=="function"||e.filter===!0||e.filterComponent||e.filterRenderer,i=r?(typeof e.filter=="function"?e.filter:null)||e.filterComponent||oi(e.filterType||"text"):null,l=a=>Yt(e.dataField,a),h=j?on(e,Oe,j,It):{};return c(Ke,{ref:a=>{if(a&&j){const s={current:a}}},$align:e.headerAlign||e.align||"left",$sortable:!!e.sort,$compact:v,$width:j&&Oe[e.dataField]?Oe[e.dataField]:e.width,$minWidth:e.minWidth,$pinned:e.pinned,$customClass:!!e.headerClasses,className:[e.headerClasses,k.headerCell].filter(Boolean).join(" "),style:{...typeof e.headerStyle=="function"?e.headerStyle(e):e.headerStyle||x.headerCell,...h,position:"relative"},role:"columnheader","aria-sort":m.field===e.dataField?m.order==="asc"?"ascending":m.order==="desc"?"descending":"none":void 0,"data-column":e.dataField,children:[(()=>{const a=typeof e.headerStyle=="function"?e.headerStyle(e):e.headerStyle,s=e.isHeaderTitle!==!1&&e.hideHeaderText!==!0&&!(a&&a.fontSize===0),p=e.isHeaderFilterComp!==!1&&Cr&&r&&i,b=e.isHeaderSort!==!1&&e.sort;return p?c("div",{style:{display:"flex",flexDirection:"column",gap:s?4:0,width:"100%",paddingRight:j?12:0,position:"relative",zIndex:2},children:[s&&n("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:4},children:n("span",{style:{color:"white",fontWeight:600,fontSize:12,whiteSpace:"nowrap",cursor:b?"pointer":"default",flex:1},onClick:()=>b&&st(e),children:e.headerFormatter?e.headerFormatter(e,t):e.headerText||e.text})}),c("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-start",gap:4,width:"100%",minHeight:24},children:[n("div",{style:{flex:b?"0 1 auto":1,width:b?"calc(100% - 48px)":"100%",minWidth:0,maxWidth:b?"calc(100% - 48px)":"100%",display:"flex",alignItems:"center",overflow:"hidden"},onClick:R=>R.stopPropagation(),children:e.filterRenderer?e.filterRenderer(l,e):n("div",{onFocusCapture:()=>{ye.current=e.dataField},"data-filter-wrapper":e.dataField,style:{width:"100%"},children:n(i,{column:e,value:S[e.dataField],onChange:l,onClear:()=>Yt(e.dataField,null)},`filter-${e.dataField}`)})}),b&&n("div",{style:{minWidth:40,minHeight:24,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,flexGrow:0,cursor:"pointer",marginLeft:"auto",position:"relative",overflow:"visible"},onClick:R=>{R.stopPropagation(),st(e)},title:`Sort by ${e.text}`,children:e.sortCaret?e.sortCaret(m.field===e.dataField?m.order:null,e):n(ln,{order:m.field===e.dataField?m.order:null,column:e})})]})]}):c("div",{style:{display:"flex",alignItems:"center",justifyContent:e.headerAlign||e.align||"left",gap:6,width:"100%",cursor:b?"pointer":"default",paddingRight:j?12:0,position:"relative",zIndex:2},onClick:()=>b&&st(e),children:[s&&n("span",{style:{color:"white",fontWeight:600,fontSize:12,whiteSpace:"nowrap",flex:1},children:e.headerFormatter?e.headerFormatter(e,t):e.headerText||e.text}),b&&n("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,minWidth:40,minHeight:24,position:"relative",overflow:"visible"},title:`Sort by ${e.text}`,children:e.sortCaret?e.sortCaret(m.field===e.dataField?m.order:null,e):n(ln,{order:m.field===e.dataField?m.order:null,column:e})})]})})(),j&&n("div",{style:{position:"absolute",top:0,right:0,bottom:0,width:6,cursor:"col-resize",zIndex:1,display:"flex",alignItems:"center",justifyContent:"center"},onMouseDown:a=>{a.preventDefault(),a.stopPropagation();const s=a.currentTarget.parentElement;if(s){const p=a.clientX,b=s.offsetWidth,R=e.dataField,He=N=>{const Ve=N.clientX-p,G=Math.max(50,Math.min(800,b+Ve));s.style.width=`${G}px`,s.style.minWidth=`${G}px`,s.style.maxWidth=`${G}px`,document.querySelectorAll(`[data-column="${R}"]`).forEach(Se=>{Se.style.width=`${G}px`,Se.style.minWidth=`${G}px`,Se.style.maxWidth=`${G}px`})},f=()=>{document.removeEventListener("mousemove",He),document.removeEventListener("mouseup",f),document.body.style.cursor="",document.body.style.userSelect="";const N=s.offsetWidth;Le?.onResizeEnd?.(R,N)};document.addEventListener("mousemove",He),document.addEventListener("mouseup",f),document.body.style.cursor="col-resize",document.body.style.userSelect="none",Le?.onResizeStart?.(R,b)}},children:n("div",{style:{width:3,height:"60%",background:"rgba(255,255,255,0.3)",borderRadius:2,transition:"background 0.2s"},onMouseEnter:a=>{a.currentTarget.style.background=Le?.handleHoverColor||"#3b82f6"},onMouseLeave:a=>{a.currentTarget.style.background="rgba(255,255,255,0.3)"}})})]},e.dataField)})]})}),n(Er,{className:k.body,style:x.body,children:lt.length===0?n("tr",{children:n("td",{colSpan:se.length+(d?.mode==="checkbox"?1:0)+(g?1:0)+(ge?1:0),children:c(Hr,{className:k.empty,style:x.empty,children:[n(Fi,{}),n("span",{children:Dn})]})})}):lt.map((e,t)=>{const r=Qt(e),i=nr(r),l=ir(r),h=d?.getCheckboxProps?.(e),o=g?.rowExpandable?.(e)??!0,a=typeof qe=="function"?qe(e,t):qe,s=typeof Ge=="function"?Ge(e,t):Ge,p=i?typeof d?.selectedRowStyle=="function"?d.selectedRowStyle(e):d?.selectedRowStyle:void 0,b=i&&p&&(p.backgroundColor||p.background),R=!!h?.disabled,He=R?jn||{backgroundColor:"#f3f4f6",opacity:.7}:void 0;return c(Fr.Fragment,{children:[c(Tr,{$selected:i,$clickable:!!Qe||d?.mode==="single"||g?.expandRowByClick===!0,$disabled:R,$hasCustomSelectedStyle:!!b,"data-custom-selected":b?"true":void 0,className:`${k.row||""} ${a||""} ${i?typeof d?.selectedRowClassName=="function"?d.selectedRowClassName(e):d?.selectedRowClassName||"":""}`,style:{...x.row,...s,...p,...He},onClick:f=>ar(e,t,f),onDoubleClick:f=>{R||Xe?.(e,t,f)},role:"row","aria-selected":i,children:[d?.mode==="checkbox"&&n(Je,{$align:"center",$compact:v,$padding:Re,$disabled:R,children:n(_t,{checked:i,disabled:h?.disabled,onChange:f=>hr(e,f),onClick:f=>f.stopPropagation()})}),g&&n(Je,{$align:"center",$compact:v,$padding:Re,$disabled:R,children:o&&n(Pr,{$expanded:l,onClick:f=>pr(e,f),children:g.expandIcon?g.expandIcon({expanded:l,row:e,onExpand:()=>Fe(e)}):n(ui,{})})}),ge&&n(Je,{$align:"center",$compact:v,$padding:Re,$disabled:R,style:{width:Et,color:"#6b7280",fontWeight:500},children:Tt?Tt(t+1,e):t+1+y*T}),ot.map((f,N)=>{const Ve=typeof f.classes=="function"?f.classes(B(e,f.dataField),e,t,N):f.classes,G=typeof f.style=="function"?f.style(B(e,f.dataField),e,t,N):f.style,Se=j?on(f,Oe,j,It):{},ct=xe(f,e,t,N),ht=!!h?.disabled;let Ie=ct.isEditable;d&&ht&&(ie?Ie=oe(f.dataField):Ie=!1);const yr=!!(d&&ht&&ie&&oe(f.dataField)),br=Ie&&V!=="none"?ct.customEditor?ct.customEditor:n(Kr,{$editing:U?.row===t&&U?.field===f.dataField,$showEditIcon:kn,children:Xt(e,f,t,N)}):Xt(e,f,t,N);return n(Je,{$align:f.align||"left",$compact:v,$padding:Re,$pinned:f.pinned,$hasCustomClass:!!Ve,$disabled:ht,$isEditable:Ie,$isInAllowedCells:yr,className:Ve||k.cell,style:{...x.cell,...G,...Se},"data-column":f.dataField,onClick:ve=>dr(e,t,f,N,ve),onDoubleClick:ve=>{ve.stopPropagation(),sr(e,t,f,N,ve)},role:"gridcell",children:n(Dr,{$hasFormatter:!!f.formatter,children:br})},f.dataField)})]}),g&&l&&o&&n(Lr,{children:n(Nr,{colSpan:se.length+(d?.mode==="checkbox"?1:0)+(g?1:0)+(ge?1:0),children:g.expandedRowRender?.(e,t,l)})})]},r)})}),Ln&&n(Mr,{className:k.footer,style:x.footer,children:c(jr,{className:k.footerRow,style:x.footerRow,children:[d?.mode==="checkbox"&&n(Ye,{$align:"center",$compact:v}),g&&n(Ye,{$align:"center",$compact:v}),ge&&n(Ye,{$align:"center",$compact:v}),ot.map(e=>n(Ye,{$align:e.align||"left",$compact:v,className:k.footerCell,style:x.footerCell,children:typeof e.footer=="function"?e.footer(e,C):e.footerFormatter?e.footerFormatter(e,C):e.footer},e.dataField))]})})]})}),ur()]})});Table.displayName="Table";export default Table;
