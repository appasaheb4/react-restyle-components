"use strict";import{jsx as l,jsxs as h,Fragment as w}from"react/jsx-runtime";import{useState as x,useEffect as g,useRef as N}from"react";import k from"lodash";import e from"../../../tc.module.css";import{cn as c}from"../../../utils";export const MultiSelectWithField=({displayField:r="",options:m=[],selectedItems:i=[],hasError:p=!1,onSelect:C})=>{const[s,a]=x([]),[o,d]=x(!1),b=t=>{g(()=>{function f(n){t.current&&!t.current.contains(n.target)&&o&&d(!1)}return document.addEventListener("mousedown",f),()=>{document.removeEventListener("mousedown",f)}},[t,o])};g(()=>{a(i)},[i]);const u=N(null);return b(u),l(w,{children:h("div",{className:c(e.flex,e["dark:bg-boxdark"],e["dark:text-white"],e["flex-col"],e["w-full"],e["rounded-md"],e.border,{[e["border-red"]]:p,[e["border-gray-300"]]:!p}),ref:u,children:[l("span",{className:c(e["p-2"],e["shadow-sm"]),onClick:()=>{d(!o)},children:s?.length>0?`${s?.length} Items`:"Select"}),l("div",{className:c(e.flex,e["mx-2"],o?e.show:e.hidden),children:m?m?.length>0&&l("ul",{className:c(e.flex,e["flex-col"],e["gap-1"],e["p-2"]),children:m?.map((t,f)=>h("li",{className:c(e.flex,e["items-center"]),children:[l("input",{className:c(e.flex,e["bg-black"]),type:"checkbox",checked:!k.isEmpty(s?.find(n=>n[r]?.toUpperCase()==t[r]?.toUpperCase())),onChange:()=>{k.isEmpty(s?.find(n=>n[r]?.toUpperCase()==t[r]?.toUpperCase()))?s?.length>0?a(s?.concat([t])):a([t]):a(s?.filter(n=>n[r]?.toUpperCase()!=t[r]?.toUpperCase()))},onBlur:()=>{o||C(s)}})," ",l("span",{className:c(e.flex,e["ml-2"],e["dark:text-white"],e["text-center"]),children:t[r]})]},f))}):null})]})})};
