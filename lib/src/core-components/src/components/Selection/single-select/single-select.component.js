"use strict";import{jsx as l,jsxs as v,Fragment as O}from"react/jsx-runtime";import{useState as p,useEffect as x,useRef as F}from"react";import{Icon as E}from"../../Icon/Icon";import e from"../../../tc.module.css";import{cn as i}from"../../../utils";export const SingleSelect=({options:d=[],displayKey:f="title",displayValue:h="",hasError:b=!1,className:L="",style:j={},classNames:s={},styles:a={},onSelect:g})=>{const[I,w]=p(""),[r,m]=p(!1),[c,u]=p(-1),C=t=>{x(()=>{function n(o){t.current&&!t.current.contains(o.target)&&r&&m(!1)}return document.addEventListener("mousedown",n),()=>{document.removeEventListener("mousedown",n)}},[t,r])},k=F(null);return C(k),x(()=>{if(h&&w(h),!r)return;const t=n=>{if(n.key==="ArrowDown")u(o=>o<d.length-1?o+1:0);else if(n.key==="ArrowUp")u(o=>o>0?o-1:d.length-1);else if(n.key==="Enter"&&c>=0){const o=d[c];w(o[f]),g(o),m(!1)}};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[r,c,d,f,g,h]),x(()=>{r&&u(-1)},[r]),l(O,{children:v("div",{className:i(e.flex,e["dark:bg-boxdark"],e["dark:text-white"],e["flex-col"],e["w-full"],e["rounded-md"],e.border,{[e["border-red"]]:b,[e["border-gray-300"]]:!b},L,s.container),ref:k,style:{...j,...a.container},children:[v("span",{className:i(e["p-2"],e["shadow-sm"],e.flex,e["justify-between"],e["items-center"],s.trigger),onClick:()=>{m(!r)},tabIndex:0,style:{cursor:"pointer",...a.trigger},children:[I||"Select",l("span",{className:s.icon,style:a.icon,children:r?l(E,{nameIcon:"FaChevronUp",propsIcon:{size:16}}):l(E,{nameIcon:"FaChevronDown",propsIcon:{size:16}})})]}),l("div",{className:i(e.flex,{[e.show]:r,[e.hidden]:!r},e.relative),children:d?d?.length>0&&l("div",{className:i(e.flex,e.absolute,e["rounded-sm"],e["w-full"],s.dropdown),style:{zIndex:999,top:"calc(100% + 0.5rem)",left:0,right:0,margin:0,padding:0,animation:"fadeIn 0.15s ease-out",transformOrigin:"top",...a.dropdown},children:l("ul",{className:i(e.flex,e["flex-col"],e["gap-1"],e["w-full"],e["bg-white"],e["shadow-md"],e["rounded-md"],e.border,e["border-gray-200"],e["list-none"],e["m-0"],e["p-0"],s.list),style:a.list,children:d?.map((t,n)=>l("li",{className:i(e.flex,e["gap-2"],e["p-2"],c===n&&e["bg-blue-100"],s.listItem),style:{cursor:"pointer",background:c===n?"#e0e7ff":void 0,...a.listItem},onClick:()=>{w(t[f]),g(t),m(!1)},onMouseEnter:()=>u(n),children:l("label",{className:i(e.flex,e["gap-2"]),children:l("span",{className:i(e.flex,e["h-4"],s.itemText),style:a.itemText,children:t[f]})})},n))})}):null})]})})};
