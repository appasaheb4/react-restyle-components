{"version":3,"file":"4434.fde24ae5.iframe.bundle.js","mappings":";;;AAIA;;;AAUA;;;AAKA;;;;AAMA;;;AAKA;;;AAKA;;;AAKA;;;;AAOA;;;;;AAKA;AAGA;;AAIA;;;;;;;;AAQA;;;;;;AAQA;;;;;AAOA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA;;;;;;;;;;;;;;;;AAmBA;;;;AAKA;;;;;;;;;;;;AAeA;;;;;AAOA;;AAEA;;;;;;;;AAQA;;;;;;;;;;;;;AAaA;;AAIA;;;;;;;;;;;;;;AAcA;;AAIA;AACA;;;AAGA;;AAIA;AACA;;AAIA;;;;;;;;;;;AAaA;;;AAMA;AACA;AAGA;;AAMA;;;;;AASA;;AAIA;AACA;;;;AAIA;;;;AAMA;;;AAKA;AACA;;;;;AASA;;AAIA;AASA;AACA;;;;;;;AAOA;;;;;;AAQA;;;AAGA;AAGA;;;AAGA;AAGA;;;AAKA;;AAKA;;;;;AAKA;;;;AAQA;;;;AAIA;;;;;;;;AAQA;;;;AAKA;;;AAMA;;AAIA;AACA;;AAEA;AAGA;;;;;AAKA;;;;;;AAMA;;;;;AAKA;;;;AAIA;;AAIA;;;;;AAKA;;;;;;;AAOA;;AAIA;;AASA;;;;AAIA;;;;;;;AASA;AAIA;AAGA;;;AAGA;;;;AAMA;;;;AAOA;;AAIA;AACA;;;;AAIA;;;AAKA;;;;;;;AASA;;;;;;;;AAYA;AAUA;AACA;;;;;;AAMA;AAGA;;;;AAIA;;AAKA;;;;;;AAMA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDA;;;;;;AASA;;;;;;;;;;;AAcA;;;;;;;;AAaA;;;;AAIA;AAGA;;;;;;;;;;;;;;AAcA;;;;;;AAMA;;AAEA;;AAIA;AACA;AAGA;;AAEA;AACA;AAGA;AACA;AAGA;AAGA;AACA;;AAEA;AAGA;;;;;;;;AAQA;;;;;;;AASA;;;AAKA;;;;AAMA;;;;;;;;AAQA;AACA;AACA;;AAGA;;;;;;AAMA;;;;;;;;;;;;AAeA;;;;;;AAMA;;;;;;AAMA;;AAIA;;;;;;;;;;;;;;;;;;;;AAoBA;;;;;;;AASA;;;;;;AAMA;;;;;;;;;;;;AAcA;;;;;;;;AAUA;;;AAGA;AACA;;AAEA;AAGA;;;;AAOA;;;;;;;;;;;AAgBA;;;;AAIA;;;;;;;AASA;;;;;;;;AAQA;;;;AAIA;AAGA;;;;;AAKA;;;;;;;;;;;;AAYA;;;AAGA;;;AAKA;;AAEA;;;;;;;AAOA;;;;;AAKA;;;AAKA;;;;AAMA;;;;;AASA;;;;;;AAMA;;;;AAIA;;;AAKA;;;;;AAKA;AAGA;;;;;;;;;;AAUA;;AAEA;;;;;;;;AAQA;;;;;;AAMA;;;;;;AASA;;;;;;;;AAUA;;;;;AAKA;;;;;;AAMA;;;AAGA;AAGA;AACA;;;;;;;;;AAYA;;;;;;;;;AAWA;;;;;;;;;;AAUA;;;;;;;;;ACngCA;;;;;;;;;AA+DA;;;AAAA;;;;AASA;;;;;;;;;;;;;;;;;;AAkBA;;;AAMA;;;;;AAKA;;;;;;AAMA;;AAIA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;;;AAOA;;;;;AAKA;;AAEA;;;;;;;AAOA;AACA;;;;AAIA;AACA;AACA;;;;;;;;;;;;;;;;AAgBA;;AAQA;;;;AC7DA;;;;;;;AAOA;;;;;;AAMA;;;;;AAKA;;AAEA;;;;AAIA;;;AAKA;;;;;;;AAOA;;;;;;;AAOA;;;;;AAKA;;AAEA;;AAIA;;;;;;AAMA;;;;;;;;;AASA;;;;;AAKA;;AAIA;;;;;AAKA;;;;;;;AAOA;;;;;AAKA;;AAEA;;AAIA;;;;;AAKA;;;;;;AAMA;AAGA;;AAEA;AACA;;AAGA;;;;AAIA;;;AAOA","sources":["webpack://react-restyle-components/./src/core-components/src/components/Table/elements.tsx","webpack://react-restyle-components/./src/core-components/src/components/Table/columnResize.tsx","webpack://react-restyle-components/./src/core-components/src/components/Table/filters.tsx"],"sourcesContent":["import {styled, css, keyframes} from 'styled-components';\nimport {tokens} from '../../utils/designTokens';\n\n// Animations\nconst shimmer = keyframes`\n  0% { background-position: -200% 0; }\n  100% { background-position: 200% 0; }\n`;\n\nconst fadeIn = keyframes`\n  from { opacity: 0; }\n  to { opacity: 1; }\n`;\n\nconst spin = keyframes`\n  from { transform: rotate(0deg); }\n  to { transform: rotate(360deg); }\n`;\n\nconst pulse = keyframes`\n  0% { transform: scale(1); }\n  50% { transform: scale(1.1); }\n  100% { transform: scale(1); }\n`;\n\nconst countUp = keyframes`\n  0% { transform: translateY(100%); opacity: 0; }\n  100% { transform: translateY(0); opacity: 1; }\n`;\n\nconst countDown = keyframes`\n  0% { transform: translateY(-100%); opacity: 0; }\n  100% { transform: translateY(0); opacity: 1; }\n`;\n\nconst slideIn = keyframes`\n  0% { transform: translateX(-20px); opacity: 0; }\n  100% { transform: translateX(0); opacity: 1; }\n`;\n\nexport const TableRoot = styled.div<{\n  $bordered: boolean;\n  $compact: boolean;\n}>`\n  width: 100%;\n  font-family: inherit;\n  font-size: 14px;\n  color: ${tokens.onSurface || '#1f2937'};\n  background: white;\n  border-radius: 8px;\n  overflow: hidden;\n\n  ${({$bordered}) =>\n    $bordered &&\n    css`\n      border: 1px solid ${tokens.outline || '#e5e7eb'};\n    `}\n`;\n\nexport const Toolbar = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  align-items: center;\n  justify-content: space-between;\n  gap: 8px;\n  padding: 8px 12px;\n  background: white;\n  border-bottom: 1px solid ${tokens.outline || '#e5e7eb'};\n\n  @media (max-width: 640px) {\n    flex-direction: column;\n    align-items: stretch;\n  }\n`;\n\nexport const ToolbarGroup = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  flex-wrap: wrap;\n`;\n\nexport const SearchInput = styled.div`\n  position: relative;\n  display: flex;\n  align-items: center;\n\n  input {\n    width: 220px;\n    height: 34px;\n    padding: 0 12px 0 36px;\n    border: 1px solid #e5e7eb;\n    border-radius: 6px;\n    font-size: 13px;\n    background: #f9fafb;\n    color: #374151;\n    transition: all 0.2s ease;\n\n    &:hover {\n      border-color: #d1d5db;\n      background: #ffffff;\n    }\n\n    &:focus {\n      outline: none;\n      border-color: #9ca3af;\n      background: #ffffff;\n      box-shadow: 0 0 0 3px rgba(156, 163, 175, 0.15);\n    }\n\n    &::placeholder {\n      color: #9ca3af;\n      font-size: 12px;\n    }\n\n    @media (max-width: 640px) {\n      width: 100%;\n    }\n  }\n\n  svg {\n    position: absolute;\n    left: 12px;\n    width: 14px;\n    height: 14px;\n    color: #9ca3af;\n  }\n`;\n\nexport const ToolbarButton = styled.button<{\n  $active?: boolean;\n  $variant?: 'default' | 'primary' | 'gray';\n}>`\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  gap: 4px;\n  height: 32px;\n  padding: 0 10px;\n  font-size: 12px;\n  font-weight: 500;\n  border-radius: 4px;\n  cursor: pointer;\n  transition: all 0.15s ease;\n  white-space: nowrap;\n\n  /* Default gray button style (matching existing TableBootstrap) */\n  color: white;\n  background: ${({$active}) =>\n    $active ? tokens.primary || '#3b82f6' : '#6b7280'};\n  border: none;\n\n  &:hover:not(:disabled) {\n    background: ${({$active}) =>\n      $active ? tokens.primary || '#2563eb' : '#5b6570'};\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  svg {\n    width: 14px;\n    height: 14px;\n  }\n`;\n\nexport const SelectionIndicator = styled.button<{\n  $animate?: 'up' | 'down' | 'none';\n}>`\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  padding: 8px 16px;\n  background: ${tokens.primary || '#3b82f6'};\n  border-radius: 6px;\n  border: 2px solid ${tokens.primary || '#3b82f6'};\n  outline: none;\n  color: white;\n  font-weight: 600;\n  font-size: 13px;\n  cursor: pointer;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n  transition: all 0.2s ease;\n  animation: ${slideIn} 0.3s ease-out;\n\n  &:hover {\n    border-color: white;\n  }\n\n  &:active {\n    transform: translateY(1px);\n  }\n\n  &:focus-visible {\n    border-color: white;\n    box-shadow: 0 0 0 3px\n      ${tokens.primary ? `${tokens.primary}40` : 'rgba(59, 130, 246, 0.4)'};\n  }\n`;\n\nexport const SelectionCount = styled.span<{$animate?: 'up' | 'down' | 'none'}>`\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  min-width: 26px;\n  height: 26px;\n  padding: 0 8px;\n  background: rgba(255, 255, 255, 0.2);\n  border: 1px solid rgba(255, 255, 255, 0.4);\n  border-radius: 4px;\n  font-weight: 700;\n  font-size: 14px;\n  overflow: hidden;\n\n  ${({$animate}) =>\n    $animate === 'up' &&\n    css`\n      animation:\n        ${countUp} 0.3s ease-out,\n        ${pulse} 0.3s ease-out;\n    `}\n\n  ${({$animate}) =>\n    $animate === 'down' &&\n    css`\n      animation:\n        ${countDown} 0.3s ease-out,\n        ${pulse} 0.3s ease-out;\n    `}\n`;\n\nexport const SelectionIcon = styled.span`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 20px;\n  height: 20px;\n\n  svg {\n    width: 16px;\n    height: 16px;\n  }\n`;\n\nexport const TableWrapper = styled.div<{\n  $maxHeight?: string | number;\n  $stickyHeader: boolean;\n}>`\n  width: 100%;\n  overflow-x: auto;\n  overflow-y: ${({$stickyHeader}) => ($stickyHeader ? 'auto' : 'visible')};\n  ${({$maxHeight}) =>\n    $maxHeight &&\n    css`\n      max-height: ${typeof $maxHeight === 'number'\n        ? `${$maxHeight}px`\n        : $maxHeight};\n    `}\n`;\n\nexport const StyledTable = styled.table<{\n  $striped: boolean;\n  $hover: boolean;\n  $compact: boolean;\n}>`\n  width: 100%;\n  border-collapse: collapse;\n  table-layout: auto;\n\n  ${({$striped}) =>\n    $striped &&\n    css`\n      tbody tr:nth-child(even) {\n        background: ${tokens.surface || '#f9fafb'};\n        color: ${tokens.onSurface || '#1f2937'};\n      }\n    `}\n\n  ${({$hover}) =>\n    $hover &&\n    css`\n      /* Hover effect - skip rows with custom selected style (data-custom-selected attribute) */\n      tbody tr:not([data-custom-selected='true']):hover {\n        background: #ececec !important;\n        color: ${tokens.onSurface || '#1f2937'};\n      }\n    `}\n`;\n\nexport const TableHeader = styled.thead<{$sticky: boolean}>`\n  ${({$sticky}) =>\n    $sticky &&\n    css`\n      position: sticky;\n      top: 0;\n      z-index: 10;\n    `}\n`;\n\nexport const HeaderRow = styled.tr`\n  background: #6b7280;\n`;\n\nexport const HeaderCell = styled.th<{\n  $align: string;\n  $sortable: boolean;\n  $compact: boolean;\n  $width?: string | number;\n  $minWidth?: string | number;\n  $pinned?: 'left' | 'right' | false;\n  $customClass?: boolean;\n}>`\n  padding: ${({$compact}) => ($compact ? '4px 6px' : '6px 8px')};\n  text-align: ${({$align}) => $align};\n  vertical-align: middle;\n  user-select: none;\n  white-space: nowrap;\n  border-right: 1px solid rgba(255, 255, 255, 0.3);\n\n  /* Default styles - only applied when no custom class */\n  ${({$customClass}) =>\n    !$customClass &&\n    css`\n      position: relative;\n      font-weight: 600;\n      font-size: 11px;\n      color: white;\n      background: #6b7280;\n      border-bottom: 1px solid ${tokens.outline || '#e5e7eb'};\n    `}\n\n  ${({$width}) =>\n    $width &&\n    css`\n      width: ${typeof $width === 'number' ? `${$width}px` : $width};\n    `}\n\n  ${({$minWidth}) =>\n    $minWidth &&\n    css`\n      min-width: ${typeof $minWidth === 'number'\n        ? `${$minWidth}px`\n        : $minWidth};\n    `}\n\n  ${({$pinned, $customClass}) =>\n    $pinned &&\n    !$customClass &&\n    css`\n      position: sticky;\n      ${$pinned}: 0;\n      z-index: 11;\n    `}\n\n  /* Add left border separator when custom class is used (e.g., sticky action column) */\n  ${({$customClass}) =>\n    $customClass &&\n    css`\n      border-left: 2px solid #d1d5db;\n      border-bottom: 2px solid #d1d5db;\n    `}\n`;\n\nexport const SortIcon = styled.span<{$active: boolean; $direction?: string}>`\n  display: inline-flex;\n  flex-direction: column;\n  gap: 1px;\n  opacity: ${({$active}) => ($active ? 1 : 0.5)};\n  vertical-align: middle;\n\n  svg {\n    width: 8px;\n    height: 8px;\n\n    &:first-child {\n      opacity: ${({$active, $direction}) =>\n        $active && $direction === 'asc' ? 1 : 0.4};\n    }\n\n    &:last-child {\n      opacity: ${({$active, $direction}) =>\n        $active && $direction === 'desc' ? 1 : 0.4};\n    }\n  }\n`;\n\nexport const FilterRow = styled.tr`\n  background: #6b7280;\n`;\n\nexport const FilterCell = styled.td<{$compact: boolean}>`\n  padding: ${({$compact}) => ($compact ? '2px 4px' : '4px 6px')};\n  vertical-align: middle;\n  border-bottom: 1px solid ${tokens.outline || '#e5e7eb'};\n`;\n\nexport const FilterInput = styled.input`\n  width: 100%;\n  height: 24px;\n  padding: 0 8px;\n  font-size: 11px;\n  border: 1px solid ${tokens.outline || '#e2e8f0'};\n  border-radius: 3px;\n  background: white;\n  transition: all 0.15s ease;\n\n  &:hover {\n    border-color: ${tokens.primary || '#94a3b8'};\n  }\n\n  &:focus {\n    outline: none;\n    border-color: ${tokens.primary || '#3b82f6'};\n  }\n\n  &::placeholder {\n    color: ${tokens.onSurface ? `${tokens.onSurface}40` : '#9ca3af'};\n  }\n`;\n\nexport const FilterSelect = styled.select`\n  width: 100%;\n  height: 28px;\n  padding: 0 8px;\n  font-size: 12px;\n  border: 1px solid ${tokens.outline || '#d1d5db'};\n  border-radius: 4px;\n  background: white;\n  cursor: pointer;\n\n  &:focus {\n    outline: none;\n    border-color: ${tokens.primary || '#3b82f6'};\n  }\n`;\n\nexport const TableBody = styled.tbody``;\n\nexport const TableRow = styled.tr<{\n  $selected: boolean;\n  $clickable: boolean;\n  $disabled: boolean;\n  $hasCustomSelectedStyle?: boolean;\n}>`\n  transition: background 0.15s ease;\n  color: ${tokens.onSurface || '#1f2937'};\n  background: white;\n\n  /* Hover effect - only apply when not selected with custom style */\n  ${({$hasCustomSelectedStyle}) =>\n    !$hasCustomSelectedStyle &&\n    css`\n      &:hover {\n        background: #ececec !important;\n      }\n    `}\n\n  /* Default selected styling - only when no custom style is provided */\n  ${({$selected, $hasCustomSelectedStyle}) =>\n    $selected &&\n    !$hasCustomSelectedStyle &&\n    css`\n      background: ${tokens.primary\n        ? `${tokens.primary}10`\n        : '#fef3c7'} !important;\n      color: ${tokens.onSurface || '#1f2937'};\n\n      &:hover {\n        background: ${tokens.primary\n          ? `${tokens.primary}15`\n          : '#fde68a'} !important;\n      }\n    `}\n  \n  ${({$clickable, $disabled}) =>\n    $clickable &&\n    !$disabled &&\n    css`\n      cursor: pointer;\n    `}\n  \n  ${({$disabled}) =>\n    $disabled &&\n    css`\n      opacity: 0.5;\n      background: ${tokens.surface || '#e5e7eb'} !important;\n      color: ${tokens.onSurface || '#1f2937'};\n      cursor: not-allowed;\n\n      &:hover {\n        background: ${tokens.surface || '#e5e7eb'} !important;\n      }\n    `}\n`;\n\nexport const TableCellContent = styled.div.attrs({\n  className: 'tc-table-cell-content',\n})<{$hasFormatter?: boolean}>`\n  display: flex;\n  width: 100%;\n  min-width: 0;\n  align-items: stretch;\n  gap: 0;\n\n  ${({$hasFormatter}) =>\n    !$hasFormatter &&\n    css`\n      display: block;\n    `}\n\n  > * {\n    width: 100%;\n    min-width: 0;\n  }\n`;\n\nexport const TableCell = styled.td<{\n  $align: string;\n  $compact: boolean;\n  $pinned?: 'left' | 'right' | false;\n  $padding?: string;\n  $hasCustomClass?: boolean;\n  $disabled?: boolean;\n  $isEditable?: boolean;\n  $isInAllowedCells?: boolean;\n}>`\n  padding: ${({$padding, $compact}) => $padding || ($compact ? '2px' : '2px')};\n  text-align: ${({$align}) => $align};\n  border-bottom: 1px solid #d1d5db;\n  border-right: 1px solid #9ca3af;\n  vertical-align: middle;\n  font-size: 12px;\n\n  ${({$hasCustomClass}) =>\n    !$hasCustomClass &&\n    css`\n      color: ${tokens.onSurface || '#1f2937'};\n      background: transparent;\n    `}\n\n  ${({$pinned, $hasCustomClass}) =>\n    $pinned &&\n    !$hasCustomClass &&\n    css`\n      position: sticky;\n      ${$pinned}: 0;\n      background: white;\n      z-index: 1;\n    `}\n\n  /* Add left border separator when custom class is used (e.g., sticky action column) */\n  ${({$hasCustomClass}) =>\n    $hasCustomClass &&\n    css`\n      border-left: 2px solid #d1d5db;\n    `}\n\n  /* Ensure formatter content displays properly */\n  /* Use a dedicated wrapper to allow formatter content to stretch full width */\n  > .tc-table-cell-content {\n    display: flex;\n    align-items: stretch;\n    width: 100%;\n    min-width: 0;\n    gap: 0;\n  }\n\n  > .tc-table-cell-content > * {\n    width: 100%;\n    min-width: 0;\n  }\n\n  /* Default inline layout for legacy direct children */\n  > :not(.tc-table-cell-content) {\n    display: inline-block;\n    vertical-align: middle;\n  }\n\n  /* Preserve flex layouts - these take precedence */\n  > [class*='flex'],\n  > [style*='display: flex'],\n  > [style*='display:flex'],\n  > div[class*='flex'],\n  > div[style*='display: flex'],\n  > div[style*='display:flex'] {\n    display: flex !important;\n  }\n\n  /* Preserve grid layouts */\n  > [class*='grid'],\n  > [style*='display: grid'],\n  > [style*='display:grid'] {\n    display: grid !important;\n  }\n\n  /* Preserve block layouts */\n  > [class*='block'],\n  > [style*='display: block'],\n  > [style*='display:block'] {\n    display: block !important;\n  }\n\n  /* Disabled state - prevent clicks and show not-allowed cursor */\n  /* Only apply pointer-events: none if row is disabled AND column is NOT effectively editable */\n  ${({$disabled, $isEditable}) =>\n    $disabled &&\n    !$isEditable &&\n    css`\n      cursor: not-allowed;\n      pointer-events: none;\n    `}\n\n  /* If row is disabled but column is effectively editable, ensure proper width and interaction */\n  ${({$disabled, $isEditable}) =>\n    $disabled &&\n    $isEditable &&\n    css`\n      cursor: default;\n      pointer-events: auto !important;\n      opacity: 1 !important;\n      width: auto !important;\n      min-width: 0 !important;\n      max-width: none !important;\n      box-sizing: border-box;\n    `}\n  \n  /* Remove opacity for allowed columns when row is disabled and ensure proper width */\n  ${({$disabled, $isInAllowedCells}) =>\n    $disabled &&\n    $isInAllowedCells &&\n    css`\n      opacity: 1 !important;\n      pointer-events: auto !important;\n      width: auto !important;\n      min-width: 0 !important;\n      max-width: none !important;\n      box-sizing: border-box;\n    `}\n`;\n\nexport const Checkbox = styled.input.attrs({type: 'checkbox'})`\n  width: 16px;\n  height: 16px;\n  cursor: pointer;\n  accent-color: ${tokens.primary || '#3b82f6'};\n`;\n\nexport const ExpandButton = styled.button<{$expanded: boolean}>`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 24px;\n  height: 24px;\n  padding: 0;\n  border: none;\n  background: transparent;\n  cursor: pointer;\n  border-radius: 4px;\n  transition: all 0.15s ease;\n\n  &:hover {\n    background: ${tokens.surface || '#f3f4f6'};\n  }\n\n  svg {\n    width: 16px;\n    height: 16px;\n    color: ${tokens.onSurface ? `${tokens.onSurface}70` : '#6b7280'};\n    transition: transform 0.2s ease;\n    transform: ${({$expanded}) => ($expanded ? 'rotate(90deg)' : 'rotate(0)')};\n  }\n`;\n\nexport const ExpandedRow = styled.tr`\n  animation: ${fadeIn} 0.2s ease;\n`;\n\nexport const ExpandedCell = styled.td`\n  padding: 16px;\n  background: ${tokens.surface || '#f9fafb'};\n  border-bottom: 1px solid ${tokens.outline || '#e5e7eb'};\n`;\n\nexport const TableFooter = styled.tfoot`\n  background: ${tokens.surface || '#f3f4f6'};\n`;\n\nexport const FooterRow = styled.tr``;\n\nexport const FooterCell = styled.td<{$align: string; $compact: boolean}>`\n  padding: ${({$compact}) => ($compact ? '8px 12px' : '12px 16px')};\n  text-align: ${({$align}) => $align};\n  font-weight: 600;\n  border-top: 2px solid ${tokens.outline || '#e5e7eb'};\n`;\n\nexport const PaginationWrapper = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  align-items: center;\n  justify-content: space-between;\n  gap: 12px;\n  padding: 12px 16px;\n  background: #6b7280;\n  border-top: 1px solid ${tokens.outline || '#e5e7eb'};\n  color: white;\n\n  @media (max-width: 640px) {\n    flex-direction: column;\n    align-items: stretch;\n  }\n`;\n\nexport const PaginationInfo = styled.div`\n  font-size: 13px;\n  color: white;\n`;\n\nexport const PaginationControls = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 4px;\n`;\n\nexport const PageButton = styled.button<{$active?: boolean}>`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-width: 32px;\n  height: 32px;\n  padding: 0 8px;\n  font-size: 13px;\n  font-weight: ${({$active}) => ($active ? 600 : 400)};\n  color: ${({$active}) => ($active ? 'white' : 'white')};\n  background: ${({$active}) =>\n    $active ? tokens.primary || '#3b82f6' : 'transparent'};\n  border: 1px solid\n    ${({$active}) => ($active ? 'transparent' : 'rgba(255,255,255,0.3)')};\n  border-radius: 4px;\n  cursor: pointer;\n  transition: all 0.15s ease;\n\n  &:hover:not(:disabled) {\n    background: ${({$active}) =>\n      $active ? tokens.primary || '#2563eb' : 'rgba(255,255,255,0.1)'};\n  }\n\n  &:disabled {\n    opacity: 0.4;\n    cursor: not-allowed;\n  }\n\n  svg {\n    width: 16px;\n    height: 16px;\n  }\n`;\n\nexport const PageSizeSelect = styled.select`\n  height: 32px;\n  padding: 0 24px 0 8px;\n  font-size: 13px;\n  color: #1f2937;\n  background: white;\n  border: 1px solid ${tokens.outline || '#d1d5db'};\n  border-radius: 4px;\n  cursor: pointer;\n\n  &:focus {\n    outline: none;\n    border-color: ${tokens.primary || '#3b82f6'};\n  }\n`;\n\nexport const QuickJumper = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-size: 13px;\n  color: white;\n\n  input {\n    width: 50px;\n    height: 32px;\n    padding: 0 8px;\n    text-align: center;\n    font-size: 13px;\n    border: 1px solid rgba(255, 255, 255, 0.3);\n    border-radius: 4px;\n    background: transparent;\n    color: white;\n\n    &:focus {\n      outline: none;\n      border-color: ${tokens.primary || '#3b82f6'};\n    }\n\n    &::placeholder {\n      color: rgba(255, 255, 255, 0.5);\n    }\n  }\n`;\n\nexport const EmptyState = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 48px 24px;\n  color: ${tokens.onSurface ? `${tokens.onSurface}60` : '#6b7280'};\n\n  svg {\n    width: 48px;\n    height: 48px;\n    margin-bottom: 16px;\n    opacity: 0.5;\n  }\n\n  span {\n    font-size: 14px;\n  }\n`;\n\nexport const LoadingOverlay = styled.div`\n  position: absolute;\n  inset: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: rgba(255, 255, 255, 0.8);\n  z-index: 20;\n`;\n\nexport const LoadingSpinner = styled.div`\n  width: 32px;\n  height: 32px;\n  border: 3px solid ${tokens.outline || '#e5e7eb'};\n  border-top-color: ${tokens.primary || '#3b82f6'};\n  border-radius: 50%;\n  animation: ${spin} 0.8s linear infinite;\n`;\n\nexport const EditableCell = styled.div<{\n  $editing: boolean;\n  $showEditIcon?: boolean;\n}>`\n  position: relative;\n  min-height: 24px;\n\n  ${({$editing, $showEditIcon = false}) =>\n    !$editing &&\n    $showEditIcon &&\n    css`\n      &:hover::after {\n        content: '✏️';\n        position: absolute;\n        right: -4px;\n        top: 50%;\n        transform: translateY(-50%);\n        font-size: 12px;\n        opacity: 0.5;\n      }\n    `}\n`;\n\nexport const CellEditor = styled.input`\n  width: 100%;\n  padding: 4px 8px;\n  font-size: inherit;\n  border: 2px solid ${tokens.primary || '#3b82f6'};\n  border-radius: 4px;\n  background: white;\n\n  &:focus {\n    outline: none;\n  }\n`;\n\nexport const ColumnTogglePanel = styled.div`\n  position: absolute;\n  top: 100%;\n  right: 0;\n  width: 280px;\n  max-height: 400px;\n  overflow-y: auto;\n  background: white;\n  border: 1px solid ${tokens.outline || '#e5e7eb'};\n  border-radius: 8px;\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);\n  z-index: 100;\n  animation: ${fadeIn} 0.15s ease;\n`;\n\nexport const ColumnToggleHeader = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 12px 16px;\n  border-bottom: 1px solid ${tokens.outline || '#e5e7eb'};\n\n  span {\n    font-weight: 600;\n    font-size: 14px;\n  }\n\n  button {\n    padding: 4px;\n    border: none;\n    background: none;\n    cursor: pointer;\n    color: ${tokens.onSurface ? `${tokens.onSurface}60` : '#6b7280'};\n\n    &:hover {\n      color: ${tokens.onSurface || '#1f2937'};\n    }\n  }\n`;\n\nexport const ColumnToggleSearch = styled.div`\n  padding: 8px 16px;\n  border-bottom: 1px solid ${tokens.outline || '#e5e7eb'};\n\n  input {\n    width: 100%;\n    height: 32px;\n    padding: 0 12px;\n    font-size: 13px;\n    border: 1px solid ${tokens.outline || '#d1d5db'};\n    border-radius: 6px;\n\n    &:focus {\n      outline: none;\n      border-color: ${tokens.primary || '#3b82f6'};\n    }\n  }\n`;\n\nexport const ColumnToggleList = styled.div`\n  padding: 8px 0;\n  max-height: 300px;\n  overflow-y: auto;\n`;\n\nexport const ColumnToggleItem = styled.label<{\n  $isDragging?: boolean;\n  $isDragOver?: boolean;\n  $reorderable?: boolean;\n}>`\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 8px 16px;\n  cursor: ${({$reorderable}) => ($reorderable ? 'grab' : 'pointer')};\n  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n  position: relative;\n  user-select: none;\n\n  &:hover {\n    background: ${tokens.surface || '#f3f4f6'};\n  }\n\n  /* Dragging state */\n  ${({$isDragging}) =>\n    $isDragging &&\n    css`\n      opacity: 0.4;\n      transform: scale(0.98);\n      background: ${tokens.primary || '#3b82f6'}10;\n      cursor: grabbing;\n    `}\n\n  /* Drag over state */\n  ${({$isDragOver}) =>\n    $isDragOver &&\n    css`\n      background: ${tokens.primary || '#3b82f6'}15;\n      transform: translateY(2px);\n\n      &::before {\n        content: '';\n        position: absolute;\n        top: 0;\n        left: 8px;\n        right: 8px;\n        height: 2px;\n        background: ${tokens.primary || '#3b82f6'};\n        border-radius: 1px;\n        animation: ${fadeIn} 0.15s ease;\n      }\n    `}\n\n  input {\n    width: 16px;\n    height: 16px;\n    cursor: pointer;\n    accent-color: ${tokens.primary || '#3b82f6'};\n    flex-shrink: 0;\n  }\n\n  span {\n    font-size: 13px;\n    color: ${tokens.onSurface || '#374151'};\n    flex: 1;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n`;\n\n// Drag handle icon for reorderable items\nexport const ColumnToggleDragHandle = styled.div<{\n  $isDragging?: boolean;\n}>`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 20px;\n  height: 20px;\n  margin-left: auto;\n  cursor: grab;\n  color: ${tokens.onSurface ? `${tokens.onSurface}40` : '#9ca3af'};\n  transition: all 0.2s ease;\n  flex-shrink: 0;\n\n  &:hover {\n    color: ${tokens.primary || '#3b82f6'};\n    transform: scale(1.1);\n  }\n\n  &:active {\n    cursor: grabbing;\n    color: ${tokens.primary || '#3b82f6'};\n  }\n\n  ${({$isDragging}) =>\n    $isDragging &&\n    css`\n      color: ${tokens.primary || '#3b82f6'};\n      animation: ${pulse} 0.6s ease-in-out infinite;\n    `}\n\n  /* Grip dots pattern */\n  &::before {\n    content: '⠿';\n    font-size: 14px;\n    letter-spacing: -2px;\n  }\n`;\n\n// Animated list container\nexport const ColumnToggleListAnimated = styled.div`\n  padding: 8px 0;\n  max-height: 300px;\n  overflow-y: auto;\n\n  /* Smooth reorder animation */\n  & > * {\n    transition: transform 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n  }\n`;\n\nexport const ResizeHandle = styled.div`\n  position: absolute;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  width: 4px;\n  cursor: col-resize;\n  background: transparent;\n\n  &:hover {\n    background: ${tokens.primary || '#3b82f6'};\n  }\n`;\n","/**\n * Column Resize Feature\n * \n * This file contains the column resizing functionality for the Table component.\n * It can be easily enabled/disabled via props without affecting core table logic.\n * \n * Features:\n * - Drag to resize columns\n * - Min/Max width constraints\n * - Double-click to auto-fit column width\n * - Persist column widths (optional)\n * \n * Usage:\n * <Table\n *   resizable={true}\n *   resizeConfig={{\n *     minWidth: 50,\n *     maxWidth: 500,\n *     onResize: (columnWidths) => console.log(columnWidths),\n *   }}\n * />\n */\n\nimport React, {\n  useRef,\n  useState,\n  useCallback,\n  useEffect,\n  useMemo,\n} from 'react';\nimport {styled, css, keyframes} from 'styled-components';\nimport {TableColumn} from './types';\n\n// ============================================================================\n// Animations\n// ============================================================================\n\nconst pulseGlow = keyframes`\n  0%, 100% { \n    box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.4);\n  }\n  50% { \n    box-shadow: 0 0 8px 2px rgba(59, 130, 246, 0.6);\n  }\n`;\n\nconst slideIn = keyframes`\n  from { \n    transform: scaleY(0);\n    opacity: 0;\n  }\n  to { \n    transform: scaleY(1);\n    opacity: 1;\n  }\n`;\n\nconst shimmer = keyframes`\n  0% { background-position: -200% 0; }\n  100% { background-position: 200% 0; }\n`;\n\n// ============================================================================\n// Types\n// ============================================================================\n\nexport interface ColumnResizeConfig {\n  /** Minimum column width in pixels (default: 50) */\n  minWidth?: number;\n  /** Maximum column width in pixels (default: 800) */\n  maxWidth?: number;\n  /** Enable double-click to auto-fit width (default: true) */\n  autoFit?: boolean;\n  /** Callback when column is resized */\n  onResize?: (columnWidths: Record<string, number>) => void;\n  /** Callback when resize starts */\n  onResizeStart?: (dataField: string, width: number) => void;\n  /** Callback when resize ends */\n  onResizeEnd?: (dataField: string, width: number) => void;\n  /** Initial column widths */\n  defaultWidths?: Record<string, number>;\n  /** Handle color */\n  handleColor?: string;\n  /** Handle hover color */\n  handleHoverColor?: string;\n  /** Handle width in pixels (default: 4) */\n  handleWidth?: number;\n}\n\nexport interface UseColumnResizeProps<T> {\n  columns: TableColumn<T>[];\n  config?: ColumnResizeConfig;\n  enabled?: boolean;\n  tableId?: string;\n}\n\nexport interface UseColumnResizeReturn {\n  columnWidths: Record<string, number>;\n  getResizeHandle: (dataField: string, headerRef: React.RefObject<HTMLElement>) => React.ReactNode;\n  resetWidths: () => void;\n  setColumnWidth: (dataField: string, width: number) => void;\n  isResizing: boolean;\n  resizingColumn: string | null;\n}\n\n// ============================================================================\n// Styled Components\n// ============================================================================\n\nexport const ResizeHandle = styled.div<{\n  $isResizing: boolean;\n  $handleColor?: string;\n  $handleHoverColor?: string;\n  $handleWidth?: number;\n}>`\n  position: absolute;\n  top: 0;\n  right: -2px;\n  width: ${({$handleWidth}) => ($handleWidth || 8) + 4}px;\n  height: 100%;\n  cursor: col-resize;\n  background: transparent;\n  z-index: 10;\n  user-select: none;\n  touch-action: none;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  /* Visible handle bar */\n  &::after {\n    content: '';\n    position: absolute;\n    top: 20%;\n    width: 3px;\n    height: 60%;\n    background: ${({$isResizing, $handleColor, $handleHoverColor}) =>\n      $isResizing\n        ? $handleHoverColor || '#3b82f6'\n        : $handleColor || 'rgba(255, 255, 255, 0.25)'};\n    border-radius: 2px;\n    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n    transform: scaleY(${({$isResizing}) => ($isResizing ? 1 : 0.7)});\n  }\n\n  /* Hover effect - expand and glow */\n  &:hover::after {\n    background: ${({$handleHoverColor}) => $handleHoverColor || '#3b82f6'};\n    transform: scaleY(1);\n    box-shadow: 0 0 8px rgba(59, 130, 246, 0.5);\n  }\n\n  /* Active/resizing state */\n  ${({$isResizing}) =>\n    $isResizing &&\n    css`\n      &::after {\n        animation: ${pulseGlow} 1s ease-in-out infinite;\n        transform: scaleY(1.1);\n      }\n\n      &::before {\n        content: '';\n        position: fixed;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        cursor: col-resize;\n        z-index: 9999;\n        background: rgba(59, 130, 246, 0.02);\n      }\n    `}\n\n  /* Grip dots pattern */\n  &::before {\n    content: '';\n    position: absolute;\n    width: 4px;\n    height: 12px;\n    background-image: radial-gradient(\n      circle,\n      rgba(255, 255, 255, 0.4) 1px,\n      transparent 1px\n    );\n    background-size: 4px 4px;\n    opacity: 0;\n    transition: opacity 0.2s ease;\n  }\n\n  &:hover::before {\n    opacity: 1;\n  }\n`;\n\nexport const ResizeLine = styled.div<{\n  $left: number;\n  $visible: boolean;\n  $color?: string;\n}>`\n  position: fixed;\n  top: 0;\n  left: ${({$left}) => $left}px;\n  width: 2px;\n  height: 100vh;\n  pointer-events: none;\n  z-index: 10000;\n  opacity: ${({$visible}) => ($visible ? 1 : 0)};\n  transition: opacity 0.15s ease, transform 0.1s ease;\n  transform: ${({$visible}) => ($visible ? 'scaleX(1)' : 'scaleX(0)')};\n  transform-origin: center;\n\n  /* Gradient line with glow effect */\n  background: linear-gradient(\n    to bottom,\n    transparent 0%,\n    ${({$color}) => $color || '#3b82f6'} 5%,\n    ${({$color}) => $color || '#3b82f6'} 95%,\n    transparent 100%\n  );\n  box-shadow: \n    0 0 10px ${({$color}) => $color || '#3b82f6'},\n    0 0 20px ${({$color}) => ($color || '#3b82f6') + '80'},\n    0 0 30px ${({$color}) => ($color || '#3b82f6') + '40'};\n\n  /* Animated shimmer effect */\n  &::after {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: -2px;\n    right: -2px;\n    bottom: 0;\n    background: linear-gradient(\n      to bottom,\n      transparent,\n      rgba(255, 255, 255, 0.3),\n      transparent\n    );\n    animation: ${slideIn} 0.3s ease-out;\n  }\n`;\n\n// ============================================================================\n// Hook: useColumnResize\n// ============================================================================\n\nexport function useColumnResize<T>({\n  columns,\n  config = {},\n  enabled = true,\n  tableId,\n}: UseColumnResizeProps<T>): UseColumnResizeReturn {\n  const {\n    minWidth = 50,\n    maxWidth = 800,\n    autoFit = true,\n    onResize,\n    onResizeStart,\n    onResizeEnd,\n    defaultWidths = {},\n    handleColor,\n    handleHoverColor,\n    handleWidth = 4,\n  } = config;\n\n  // Initialize column widths - Column-level width takes FIRST priority\n  const initialWidths = useMemo(() => {\n    const widths: Record<string, number> = {};\n    columns.forEach((col) => {\n      // Priority 1: Column-level width (user-defined in column)\n      if (typeof col.width === 'number') {\n        widths[col.dataField] = col.width;\n      } else if (typeof col.width === 'string' && col.width.endsWith('px')) {\n        widths[col.dataField] = parseInt(col.width, 10);\n      }\n      // Priority 2: defaultWidths from resizeConfig (only if column width not set)\n      else if (defaultWidths[col.dataField]) {\n        widths[col.dataField] = defaultWidths[col.dataField];\n      }\n    });\n    return widths;\n  }, [columns, defaultWidths]);\n\n  const [columnWidths, setColumnWidths] = useState<Record<string, number>>(initialWidths);\n  const [isResizing, setIsResizing] = useState(false);\n  const [resizingColumn, setResizingColumn] = useState<string | null>(null);\n\n  // Refs for drag tracking\n  const startXRef = useRef<number>(0);\n  const startWidthRef = useRef<number>(0);\n  const currentColumnRef = useRef<string | null>(null);\n  const headerRefMap = useRef<Map<string, React.RefObject<HTMLElement>>>(new Map());\n\n  // Update widths when columns change - Column-level width takes FIRST priority\n  useEffect(() => {\n    setColumnWidths((prev) => {\n      const newWidths = {...prev};\n      columns.forEach((col) => {\n        // Only add if not already set (user hasn't resized it)\n        if (!(col.dataField in newWidths)) {\n          // Priority 1: Column-level width\n          if (typeof col.width === 'number') {\n            newWidths[col.dataField] = col.width;\n          } else if (typeof col.width === 'string' && col.width.endsWith('px')) {\n            newWidths[col.dataField] = parseInt(col.width, 10);\n          }\n          // Priority 2: defaultWidths from resizeConfig\n          else if (defaultWidths[col.dataField]) {\n            newWidths[col.dataField] = defaultWidths[col.dataField];\n          }\n        }\n      });\n      return newWidths;\n    });\n  }, [columns, defaultWidths]);\n\n  // Handle mouse move during resize\n  const handleMouseMove = useCallback(\n    (e: MouseEvent) => {\n      if (!currentColumnRef.current) return;\n\n      const deltaX = e.clientX - startXRef.current;\n      let newWidth = startWidthRef.current + deltaX;\n\n      // Apply min/max constraints\n      const column = columns.find(\n        (col) => col.dataField === currentColumnRef.current\n      );\n      const colMinWidth =\n        typeof column?.minWidth === 'number'\n          ? column.minWidth\n          : typeof column?.minWidth === 'string' && column.minWidth.endsWith('px')\n          ? parseInt(column.minWidth, 10)\n          : minWidth;\n      const colMaxWidth =\n        typeof column?.maxWidth === 'number'\n          ? column.maxWidth\n          : typeof column?.maxWidth === 'string' && column.maxWidth.endsWith('px')\n          ? parseInt(column.maxWidth, 10)\n          : maxWidth;\n\n      newWidth = Math.max(colMinWidth, Math.min(colMaxWidth, newWidth));\n\n      setColumnWidths((prev) => ({\n        ...prev,\n        [currentColumnRef.current!]: newWidth,\n      }));\n    },\n    [columns, minWidth, maxWidth]\n  );\n\n  // Handle mouse up (end resize)\n  const handleMouseUp = useCallback(() => {\n    if (currentColumnRef.current) {\n      const finalWidth = columnWidths[currentColumnRef.current];\n      onResizeEnd?.(currentColumnRef.current, finalWidth);\n      onResize?.(columnWidths);\n    }\n\n    setIsResizing(false);\n    setResizingColumn(null);\n    currentColumnRef.current = null;\n\n    document.removeEventListener('mousemove', handleMouseMove);\n    document.removeEventListener('mouseup', handleMouseUp);\n    document.body.style.cursor = '';\n    document.body.style.userSelect = '';\n  }, [columnWidths, handleMouseMove, onResize, onResizeEnd]);\n\n  // Handle mouse down (start resize)\n  const handleMouseDown = useCallback(\n    (\n      e: React.MouseEvent,\n      dataField: string,\n      headerRef: React.RefObject<HTMLElement>\n    ) => {\n      if (!enabled) return;\n\n      e.preventDefault();\n      e.stopPropagation();\n\n      const headerEl = headerRef.current;\n      if (!headerEl) return;\n\n      const currentWidth = headerEl.offsetWidth;\n      startXRef.current = e.clientX;\n      startWidthRef.current = currentWidth;\n      currentColumnRef.current = dataField;\n\n      setIsResizing(true);\n      setResizingColumn(dataField);\n      onResizeStart?.(dataField, currentWidth);\n\n      document.addEventListener('mousemove', handleMouseMove);\n      document.addEventListener('mouseup', handleMouseUp);\n      document.body.style.cursor = 'col-resize';\n      document.body.style.userSelect = 'none';\n    },\n    [enabled, handleMouseMove, handleMouseUp, onResizeStart]\n  );\n\n  // Handle double-click for auto-fit\n  const handleDoubleClick = useCallback(\n    (e: React.MouseEvent, dataField: string) => {\n      if (!enabled || !autoFit) return;\n\n      e.preventDefault();\n      e.stopPropagation();\n\n      // Get all cells for this column and find the max content width\n      const cells = document.querySelectorAll(\n        `[data-column=\"${dataField}\"]`\n      );\n      let maxContentWidth = minWidth;\n\n      cells.forEach((cell) => {\n        // Create a temporary span to measure text width\n        const span = document.createElement('span');\n        span.style.visibility = 'hidden';\n        span.style.position = 'absolute';\n        span.style.whiteSpace = 'nowrap';\n        span.style.font = window.getComputedStyle(cell).font;\n        span.textContent = (cell as HTMLElement).innerText;\n        document.body.appendChild(span);\n        maxContentWidth = Math.max(maxContentWidth, span.offsetWidth + 24); // Add padding\n        document.body.removeChild(span);\n      });\n\n      // Apply constraints\n      maxContentWidth = Math.min(maxContentWidth, maxWidth);\n\n      setColumnWidths((prev) => {\n        const newWidths = {...prev, [dataField]: maxContentWidth};\n        onResize?.(newWidths);\n        return newWidths;\n      });\n\n      onResizeEnd?.(dataField, maxContentWidth);\n    },\n    [enabled, autoFit, minWidth, maxWidth, onResize, onResizeEnd]\n  );\n\n  // Get resize handle component\n  const getResizeHandle = useCallback(\n    (\n      dataField: string,\n      headerRef: React.RefObject<HTMLElement>\n    ): React.ReactNode => {\n      if (!enabled) return null;\n\n      headerRefMap.current.set(dataField, headerRef);\n\n      return (\n        <ResizeHandle\n          $isResizing={resizingColumn === dataField}\n          $handleColor={handleColor}\n          $handleHoverColor={handleHoverColor}\n          $handleWidth={handleWidth}\n          onMouseDown={(e) => handleMouseDown(e, dataField, headerRef)}\n          onDoubleClick={(e) => handleDoubleClick(e, dataField)}\n          onClick={(e) => e.stopPropagation()}\n        />\n      );\n    },\n    [\n      enabled,\n      resizingColumn,\n      handleColor,\n      handleHoverColor,\n      handleWidth,\n      handleMouseDown,\n      handleDoubleClick,\n    ]\n  );\n\n  // Reset all widths\n  const resetWidths = useCallback(() => {\n    setColumnWidths(initialWidths);\n    onResize?.(initialWidths);\n  }, [initialWidths, onResize]);\n\n  // Set specific column width\n  const setColumnWidth = useCallback(\n    (dataField: string, width: number) => {\n      const constrainedWidth = Math.max(minWidth, Math.min(maxWidth, width));\n      setColumnWidths((prev) => {\n        const newWidths = {...prev, [dataField]: constrainedWidth};\n        onResize?.(newWidths);\n        return newWidths;\n      });\n    },\n    [minWidth, maxWidth, onResize]\n  );\n\n  return {\n    columnWidths,\n    getResizeHandle,\n    resetWidths,\n    setColumnWidth,\n    isResizing,\n    resizingColumn,\n  };\n}\n\n// ============================================================================\n// Helper: Get column style with resize width\n// ============================================================================\n\nexport function getColumnStyle<T>(\n  column: TableColumn<T>,\n  columnWidths: Record<string, number>,\n  resizable: boolean,\n  isResizing?: boolean\n): React.CSSProperties {\n  const style: React.CSSProperties = {};\n\n  // Use resized width if available\n  if (resizable && columnWidths[column.dataField]) {\n    style.width = columnWidths[column.dataField];\n    style.minWidth = columnWidths[column.dataField];\n    style.maxWidth = columnWidths[column.dataField];\n  } else {\n    // Use column-defined widths\n    if (column.width) {\n      style.width = column.width;\n    }\n    if (column.minWidth) {\n      style.minWidth = column.minWidth;\n    }\n    if (column.maxWidth) {\n      style.maxWidth = column.maxWidth;\n    }\n  }\n\n  // Add smooth transition when not actively resizing (for auto-fit double-click)\n  if (resizable && !isResizing) {\n    style.transition = 'width 0.2s cubic-bezier(0.4, 0, 0.2, 1)';\n  }\n\n  return style;\n}\n\n// ============================================================================\n// Component: ResizableHeaderCell\n// ============================================================================\n\ninterface ResizableHeaderCellProps {\n  children: React.ReactNode;\n  dataField: string;\n  resizable: boolean;\n  getResizeHandle: (\n    dataField: string,\n    headerRef: React.RefObject<HTMLElement>\n  ) => React.ReactNode;\n  style?: React.CSSProperties;\n  className?: string;\n}\n\nexport const ResizableHeaderCell: React.FC<ResizableHeaderCellProps> = ({\n  children,\n  dataField,\n  resizable,\n  getResizeHandle,\n  style,\n  className,\n}) => {\n  const headerRef = useRef<HTMLTableCellElement>(null);\n\n  return (\n    <th\n      ref={headerRef}\n      style={{...style, position: 'relative'}}\n      className={className}\n      data-column={dataField}\n    >\n      {children}\n      {resizable && getResizeHandle(dataField, headerRef as React.RefObject<HTMLElement>)}\n    </th>\n  );\n};\n\n// ============================================================================\n// Export\n// ============================================================================\n\nexport default {\n  useColumnResize,\n  getColumnStyle,\n  ResizeHandle,\n  ResizeLine,\n  ResizableHeaderCell,\n};\n\n","'use client';\n\nimport React, {useState, useCallback, useEffect, useRef} from 'react';\nimport {styled, css} from 'styled-components';\nimport {tokens} from '../../utils/designTokens';\nimport {TableFilterProps} from './types';\nimport {useDebouncedValue} from '../../utils/hooks/useDebouncedValue';\n\n/**\n * Text filter options for factory function pattern\n */\nexport interface TextFilterOptions {\n  /** Placeholder text for the input */\n  placeholder?: string;\n  /** CSS class name(s) for the input */\n  className?: string;\n  /** Inline style for the input */\n  style?: React.CSSProperties;\n  /** Default value for the filter */\n  defaultValue?: string;\n  /** Debounce delay in milliseconds */\n  delay?: number;\n  /** Comparator type */\n  comparator?: 'like' | 'eq' | 'ne';\n  /** Case sensitive filtering */\n  caseSensitive?: boolean;\n  /** Callback to get filter instance for external control */\n  getFilter?: (filter: TextFilterInstance) => void;\n  /** Callback when filter value changes */\n  onFilter?: (value: string) => void;\n  /** Input ID */\n  id?: string;\n  /** Disabled state */\n  disabled?: boolean;\n}\n\n/**\n * Filter instance returned by getFilter callback\n */\nexport interface TextFilterInstance {\n  /** Current filter value */\n  value: string;\n  /** Set filter value programmatically */\n  setValue: (value: string) => void;\n  /** Clear the filter */\n  clear: () => void;\n}\n\n/**\n * Number filter options for factory function pattern\n */\nexport interface NumberFilterOptions {\n  /** Placeholder text for the input */\n  placeholder?: string;\n  /** CSS class name(s) for the input */\n  className?: string;\n  /** Inline style for the input */\n  style?: React.CSSProperties;\n  /** Default value for the filter */\n  defaultValue?: {number: string; comparator: string};\n  /** Debounce delay in milliseconds */\n  delay?: number;\n  /** Default comparator */\n  defaultComparator?: '=' | '!=' | '>' | '>=' | '<' | '<=';\n  /** Allow decimal numbers */\n  allowDecimal?: boolean;\n  /** Callback to get filter instance for external control */\n  getFilter?: (filter: NumberFilterInstance) => void;\n  /** Callback when filter value changes */\n  onFilter?: (value: {number: string; comparator: string} | null) => void;\n  /** Input ID */\n  id?: string;\n  /** Disabled state */\n  disabled?: boolean;\n  /** Hide comparator select */\n  hideComparator?: boolean;\n  /** Available comparators */\n  comparators?: Array<'=' | '!=' | '>' | '>=' | '<' | '<='>;\n}\n\n/**\n * Number filter instance returned by getFilter callback\n */\nexport interface NumberFilterInstance {\n  /** Current filter value */\n  value: {number: string; comparator: string} | null;\n  /** Set filter value programmatically */\n  setValue: (value: {number: string; comparator: string} | null) => void;\n  /** Clear the filter */\n  clear: () => void;\n}\n\n/**\n * Select filter options for factory function pattern\n */\nexport interface SelectFilterOptions {\n  /** Placeholder text (shown as first option) */\n  placeholder?: string;\n  /** CSS class name(s) for the select */\n  className?: string;\n  /** Inline style for the select */\n  style?: React.CSSProperties;\n  /** Default selected value */\n  defaultValue?: string;\n  /** Debounce delay in milliseconds */\n  delay?: number;\n  /** Options for the select */\n  options?: Array<{value: string; label: string}>;\n  /** Callback to get filter instance for external control */\n  getFilter?: (filter: SelectFilterInstance) => void;\n  /** Callback when filter value changes */\n  onFilter?: (value: string | null) => void;\n  /** Select ID */\n  id?: string;\n  /** Disabled state */\n  disabled?: boolean;\n  /** Allow multiple selection */\n  multiple?: boolean;\n}\n\n/**\n * Select filter instance returned by getFilter callback\n */\nexport interface SelectFilterInstance {\n  /** Current filter value */\n  value: string | null;\n  /** Set filter value programmatically */\n  setValue: (value: string | null) => void;\n  /** Clear the filter */\n  clear: () => void;\n}\n\n/**\n * Date filter options for factory function pattern\n */\nexport interface DateFilterOptions {\n  /** CSS class name(s) for the input */\n  className?: string;\n  /** Inline style for the input */\n  style?: React.CSSProperties;\n  /** Default value for the filter */\n  defaultValue?: {\n    startDate?: string;\n    endDate?: string;\n    comparator?: string;\n    diffFlag?: boolean;\n  };\n  /** Default comparator */\n  defaultComparator?: '=' | '>=' | '<';\n  /** Enable range mode by default */\n  defaultRangeMode?: boolean;\n  /** Callback to get filter instance for external control */\n  getFilter?: (filter: DateFilterInstance) => void;\n  /** Callback when filter value changes */\n  onFilter?: (value: any) => void;\n  /** Input ID */\n  id?: string;\n  /** Disabled state */\n  disabled?: boolean;\n  /** Date format (for display) */\n  dateFormat?: string;\n  /** Min date */\n  minDate?: string;\n  /** Max date */\n  maxDate?: string;\n}\n\n/**\n * Date filter instance returned by getFilter callback\n */\nexport interface DateFilterInstance {\n  /** Current filter value */\n  value: any;\n  /** Set filter value programmatically */\n  setValue: (value: any) => void;\n  /** Clear the filter */\n  clear: () => void;\n}\n\n// Styled components for filters\nconst FilterContainer = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 3px;\n`;\n\nconst FilterInputBase = styled.input`\n  width: 100%;\n  height: 22px;\n  padding: 0 5px;\n  font-size: 10px;\n  font-weight: normal;\n  color: #000000;\n  border: 1px solid ${tokens.outline || '#e2e8f0'};\n  border-radius: 2px;\n  background: white;\n  transition: all 0.15s ease;\n\n  &:hover {\n    border-color: ${tokens.primary || '#94a3b8'};\n  }\n\n  &:focus {\n    outline: none;\n    border-color: ${tokens.primary || '#3b82f6'};\n    box-shadow: 0 0 0 1px\n      ${tokens.primary ? `${tokens.primary}20` : '#3b82f620'};\n  }\n\n  &::placeholder {\n    color: ${tokens.onSurface ? `${tokens.onSurface}50` : '#94a3af'};\n    font-size: 9px;\n  }\n`;\n\nconst FilterSelectBase = styled.select`\n  width: 100%;\n  height: 22px;\n  padding: 0 5px;\n  font-size: 10px;\n  font-weight: normal;\n  color: #000000;\n  border: 1px solid ${tokens.outline || '#e2e8f0'};\n  border-radius: 2px;\n  background: white;\n  cursor: pointer;\n  transition: all 0.15s ease;\n\n  &:hover {\n    border-color: ${tokens.primary || '#94a3b8'};\n  }\n\n  &:focus {\n    outline: none;\n    border-color: ${tokens.primary || '#3b82f6'};\n    box-shadow: 0 0 0 1px\n      ${tokens.primary ? `${tokens.primary}20` : '#3b82f620'};\n  }\n`;\n\nconst ComparatorSelect = styled.select`\n  width: 38px;\n  height: 22px;\n  padding: 0 2px;\n  font-size: 9px;\n  font-weight: normal;\n  border: 1px solid ${tokens.outline || '#e2e8f0'};\n  border-radius: 2px;\n  background: white;\n  cursor: pointer;\n  flex-shrink: 0;\n  text-align: center;\n  transition: all 0.15s ease;\n\n  &:hover {\n    border-color: ${tokens.primary || '#94a3b8'};\n  }\n\n  &:focus {\n    outline: none;\n    border-color: ${tokens.primary || '#3b82f6'};\n  }\n`;\n\nconst DateInput = styled.input`\n  flex: 1;\n  height: 22px;\n  padding: 0 4px;\n  font-size: 10px;\n  border: 1px solid ${tokens.outline || '#e2e8f0'};\n  border-radius: 2px;\n  background: white;\n  min-width: 80px;\n  transition: all 0.15s ease;\n\n  &:hover {\n    border-color: ${tokens.primary || '#94a3b8'};\n  }\n\n  &:focus {\n    outline: none;\n    border-color: ${tokens.primary || '#3b82f6'};\n    box-shadow: 0 0 0 1px\n      ${tokens.primary ? `${tokens.primary}20` : '#3b82f620'};\n  }\n`;\n\nconst ToggleButton = styled.button<{$active: boolean}>`\n  height: 22px;\n  padding: 0 5px;\n  font-size: 9px;\n  font-weight: normal;\n  border: 1px solid ${tokens.outline || '#e2e8f0'};\n  border-radius: 2px;\n  cursor: pointer;\n  transition: all 0.15s ease;\n  white-space: nowrap;\n\n  ${({$active}) =>\n    $active\n      ? css`\n          background: ${tokens.primary || '#3b82f6'};\n          color: white;\n          border-color: ${tokens.primary || '#3b82f6'};\n        `\n      : css`\n          background: white;\n          color: ${tokens.onSurface || '#374151'};\n\n          &:hover {\n            background: #f8fafc;\n            border-color: ${tokens.primary || '#94a3b8'};\n          }\n        `}\n`;\n\n/**\n * Internal Text filter component with options support\n */\nconst TextFilterComponent: React.FC<\n  TableFilterProps & {options?: TextFilterOptions}\n> = ({column, value, onChange, options}) => {\n  const {\n    placeholder,\n    className,\n    style,\n    defaultValue,\n    delay = 500,\n    getFilter,\n    onFilter,\n    id,\n    disabled,\n  } = options || {};\n\n  // Local state for immediate input updates (maintains focus)\n  const [internalValue, setInternalValue] = useState(\n    value || defaultValue || ''\n  );\n  const internalValueRef = useRef(internalValue);\n  const inputRef = useRef<HTMLInputElement>(null);\n  const onChangeRef = useRef(onChange);\n  const onFilterRef = useRef(onFilter);\n  // Track if the last change was from user input (internal) vs external (e.g., clear all)\n  const lastInternalValueRef = useRef(internalValue);\n\n  // Keep refs in sync\n  useEffect(() => {\n    internalValueRef.current = internalValue;\n  }, [internalValue]);\n\n  useEffect(() => {\n    onChangeRef.current = onChange;\n    onFilterRef.current = onFilter;\n  }, [onChange, onFilter]);\n\n  // Sync internal value when external value changes (e.g., from clear all filters)\n  // Only sync when external value differs from what we last sent to parent\n  useEffect(() => {\n    const externalValue = value || '';\n    // Only sync if external value is different from what we last propagated\n    // This prevents overwriting user input while they're typing\n    if (externalValue !== lastInternalValueRef.current) {\n      setInternalValue(externalValue);\n      lastInternalValueRef.current = externalValue;\n    }\n  }, [value]);\n\n  // Debounce the internal value\n  const [debouncedValue] = useDebouncedValue(internalValue, {wait: delay});\n\n  // Propagate debounced value to parent\n  useEffect(() => {\n    // Update the ref to track what we're sending to parent\n    lastInternalValueRef.current = debouncedValue || '';\n    onChangeRef.current(debouncedValue || null);\n    onFilterRef.current?.(debouncedValue);\n  }, [debouncedValue]);\n\n  // Provide filter instance via getFilter callback - only on mount\n  useEffect(() => {\n    if (getFilter) {\n      getFilter({\n        get value() {\n          return internalValueRef.current;\n        },\n        setValue: (newValue: string) => {\n          setInternalValue(newValue);\n          onChangeRef.current(newValue || null);\n          onFilterRef.current?.(newValue);\n        },\n        clear: () => {\n          setInternalValue('');\n          onChangeRef.current(null);\n          onFilterRef.current?.('');\n        },\n      });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [getFilter]);\n\n  // Track if input should be focused (user is actively typing)\n  const hasFocusRef = useRef(false);\n\n  // Simple change handler - just update local state\n  const handleChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    setInternalValue(e.target.value);\n  }, []);\n\n  // Track focus state\n  const handleFocus = useCallback(() => {\n    hasFocusRef.current = true;\n  }, []);\n\n  const handleBlur = useCallback(() => {\n    hasFocusRef.current = false;\n  }, []);\n\n  // Restore focus after re-renders if it was focused\n  useEffect(() => {\n    if (hasFocusRef.current && inputRef.current) {\n      // Use requestAnimationFrame to ensure DOM is ready\n      requestAnimationFrame(() => {\n        if (hasFocusRef.current && inputRef.current) {\n          inputRef.current.focus();\n        }\n      });\n    }\n  });\n\n  const inputStyle: React.CSSProperties = {\n    fontWeight: 400,\n    ...style,\n  };\n\n  // If custom className is provided, use plain input to allow full CSS control\n  if (className) {\n    return (\n      <input\n        ref={inputRef}\n        type=\"text\"\n        id={id}\n        data-filter-field={column.dataField}\n        value={internalValue}\n        onChange={handleChange}\n        onFocus={handleFocus}\n        onBlur={handleBlur}\n        placeholder={\n          placeholder || column.filterPlaceholder || `Filter ${column.text}...`\n        }\n        className={className}\n        style={{\n          width: '100%',\n          fontWeight: 400,\n          ...style,\n        }}\n        disabled={disabled}\n      />\n    );\n  }\n\n  return (\n    <FilterInputBase\n      ref={inputRef}\n      type=\"text\"\n      id={id}\n      data-filter-field={column.dataField}\n      value={internalValue}\n      onChange={handleChange}\n      onFocus={handleFocus}\n      onBlur={handleBlur}\n      placeholder={\n        placeholder || column.filterPlaceholder || `Filter ${column.text}...`\n      }\n      style={inputStyle}\n      disabled={disabled}\n    />\n  );\n};\n\n/**\n * Text filter - can be used as a component or factory function\n *\n * @example\n * // As a factory function with options\n * filter: TextFilter({\n *   placeholder: 'Search...',\n *   className: 'my-custom-class',\n *   getFilter: (filter) => { myFilterRef = filter; },\n * })\n *\n * @example\n * // As a component (for direct usage)\n * <TextFilter column={column} value={value} onChange={onChange} />\n */\nexport function TextFilter(\n  options: TextFilterOptions\n): React.FC<TableFilterProps>;\nexport function TextFilter(props: TableFilterProps): React.ReactElement;\nexport function TextFilter(\n  optionsOrProps: TextFilterOptions | TableFilterProps\n): React.FC<TableFilterProps> | React.ReactElement {\n  // Check if it's being used as a factory function (options object without column/value/onChange)\n  if (\n    !('column' in optionsOrProps) &&\n    !('value' in optionsOrProps) &&\n    !('onChange' in optionsOrProps)\n  ) {\n    // Factory function usage - return a component\n    const options = optionsOrProps as TextFilterOptions;\n    const FilterWithOptions: React.FC<TableFilterProps> = (props) => (\n      <TextFilterComponent {...props} options={options} />\n    );\n    FilterWithOptions.displayName = 'TextFilter';\n    return FilterWithOptions;\n  }\n\n  // Direct component usage\n  const props = optionsOrProps as TableFilterProps;\n  return <TextFilterComponent {...props} />;\n}\n\n/**\n * Internal Number filter component with options support\n */\nconst NumberFilterComponent: React.FC<\n  TableFilterProps & {options?: NumberFilterOptions}\n> = ({column, value, onChange, options}) => {\n  const {\n    placeholder,\n    className,\n    style,\n    defaultValue,\n    delay = 500,\n    defaultComparator = '=',\n    allowDecimal = true,\n    getFilter,\n    onFilter,\n    id,\n    disabled,\n    hideComparator,\n    comparators = ['=', '!=', '>', '>=', '<', '<='],\n  } = options || {};\n\n  // Local state for immediate input updates (maintains focus)\n  const [number, setNumber] = useState(\n    value?.number || defaultValue?.number || ''\n  );\n  const [comparator, setComparator] = useState(\n    value?.comparator || defaultValue?.comparator || defaultComparator\n  );\n  const numberRef = useRef(number);\n  const comparatorRef = useRef(comparator);\n  const inputRef = useRef<HTMLInputElement>(null);\n  const onChangeRef = useRef(onChange);\n  const onFilterRef = useRef(onFilter);\n  // Track last value sent to parent to prevent sync loops\n  const lastNumberRef = useRef(number);\n  const lastComparatorRef = useRef(comparator);\n\n  // Keep refs in sync with state\n  useEffect(() => {\n    numberRef.current = number;\n    comparatorRef.current = comparator;\n  }, [number, comparator]);\n\n  useEffect(() => {\n    onChangeRef.current = onChange;\n    onFilterRef.current = onFilter;\n  }, [onChange, onFilter]);\n\n  // Sync internal value when external value changes (e.g., from clear all filters)\n  useEffect(() => {\n    const externalNumber = value?.number || '';\n    const externalComparator = value?.comparator || defaultComparator;\n    // Only sync if different from what we last sent to parent\n    if (externalNumber !== lastNumberRef.current) {\n      setNumber(externalNumber);\n      lastNumberRef.current = externalNumber;\n    }\n    if (externalComparator !== lastComparatorRef.current) {\n      setComparator(externalComparator);\n      lastComparatorRef.current = externalComparator;\n    }\n  }, [value, defaultComparator]);\n\n  // Debounce the number value\n  const [debouncedNumber] = useDebouncedValue(number, {wait: delay});\n\n  // Propagate debounced value to parent\n  useEffect(() => {\n    // Update refs to track what we're sending to parent\n    lastNumberRef.current = debouncedNumber || '';\n    lastComparatorRef.current = comparatorRef.current;\n    const newValue = debouncedNumber\n      ? {number: debouncedNumber, comparator: comparatorRef.current}\n      : null;\n    onChangeRef.current(newValue);\n    onFilterRef.current?.(newValue);\n  }, [debouncedNumber]);\n\n  // Provide filter instance via getFilter callback - only on mount\n  useEffect(() => {\n    if (getFilter) {\n      getFilter({\n        get value() {\n          return numberRef.current\n            ? {number: numberRef.current, comparator: comparatorRef.current}\n            : null;\n        },\n        setValue: (newValue) => {\n          if (newValue) {\n            setNumber(newValue.number);\n            setComparator(newValue.comparator);\n            onChangeRef.current(newValue);\n            onFilterRef.current?.(newValue);\n          } else {\n            setNumber('');\n            onChangeRef.current(null);\n            onFilterRef.current?.(null);\n          }\n        },\n        clear: () => {\n          setNumber('');\n          setComparator(defaultComparator);\n          onChangeRef.current(null);\n          onFilterRef.current?.(null);\n        },\n      });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [getFilter]);\n\n  // Track if input should be focused\n  const hasFocusRef = useRef(false);\n\n  // Track focus state\n  const handleFocus = useCallback(() => {\n    hasFocusRef.current = true;\n  }, []);\n\n  const handleBlur = useCallback(() => {\n    hasFocusRef.current = false;\n  }, []);\n\n  // Restore focus after re-renders if it was focused\n  useEffect(() => {\n    if (hasFocusRef.current && inputRef.current) {\n      requestAnimationFrame(() => {\n        if (hasFocusRef.current && inputRef.current) {\n          inputRef.current.focus();\n        }\n      });\n    }\n  });\n\n  // Handle comparator change - trigger immediate filter update\n  const handleComparatorChange = useCallback(\n    (newComparator: string) => {\n      setComparator(newComparator);\n      if (number) {\n        const newValue = {number, comparator: newComparator};\n        onChangeRef.current(newValue);\n        onFilterRef.current?.(newValue);\n      }\n    },\n    [number]\n  );\n\n  const comparatorSymbols: Record<string, string> = {\n    '=': '=',\n    '!=': '≠',\n    '>': '>',\n    '>=': '≥',\n    '<': '<',\n    '<=': '≤',\n  };\n\n  const inputStyle: React.CSSProperties = {\n    flex: 1,\n    fontWeight: 400,\n    ...style,\n  };\n\n  const inputProps = {\n    type: 'text' as const,\n    id,\n    'data-filter-field': column.dataField,\n    value: number,\n    onChange: (e: React.ChangeEvent<HTMLInputElement>) => {\n      const val = e.target.value;\n      const pattern = allowDecimal ? /^[0-9.,]*$/ : /^[0-9]*$/;\n      if (pattern.test(val)) {\n        setNumber(val);\n      }\n    },\n    onFocus: handleFocus,\n    onBlur: handleBlur,\n    placeholder: placeholder || column.filterPlaceholder || 'Number...',\n    disabled,\n  };\n\n  return (\n    <FilterContainer>\n      {!hideComparator && (\n        <ComparatorSelect\n          value={comparator}\n          onChange={(e) => handleComparatorChange(e.target.value)}\n          disabled={disabled}\n        >\n          {comparators.map((comp) => (\n            <option key={comp} value={comp}>\n              {comparatorSymbols[comp] || comp}\n            </option>\n          ))}\n        </ComparatorSelect>\n      )}\n      {className ? (\n        <input\n          ref={inputRef}\n          {...inputProps}\n          className={className}\n          style={{flex: 1, width: '100%', fontWeight: 400, ...style}}\n        />\n      ) : (\n        <FilterInputBase ref={inputRef} {...inputProps} style={inputStyle} />\n      )}\n    </FilterContainer>\n  );\n};\n\n/**\n * Number filter - can be used as a component or factory function\n *\n * @example\n * // As a factory function with options\n * filter: NumberFilter({\n *   placeholder: 'Enter amount...',\n *   className: 'my-custom-class',\n *   defaultComparator: '>=',\n *   getFilter: (filter) => { myFilterRef = filter; },\n * })\n */\nexport function NumberFilter(\n  options: NumberFilterOptions\n): React.FC<TableFilterProps>;\nexport function NumberFilter(props: TableFilterProps): React.ReactElement;\nexport function NumberFilter(\n  optionsOrProps: NumberFilterOptions | TableFilterProps\n): React.FC<TableFilterProps> | React.ReactElement {\n  if (\n    !('column' in optionsOrProps) &&\n    !('value' in optionsOrProps) &&\n    !('onChange' in optionsOrProps)\n  ) {\n    const options = optionsOrProps as NumberFilterOptions;\n    const FilterWithOptions: React.FC<TableFilterProps> = (props) => (\n      <NumberFilterComponent {...props} options={options} />\n    );\n    FilterWithOptions.displayName = 'NumberFilter';\n    return FilterWithOptions;\n  }\n\n  const props = optionsOrProps as TableFilterProps;\n  return <NumberFilterComponent {...props} />;\n}\n\n/**\n * Internal Date filter component with options support\n */\nconst DateFilterComponent: React.FC<\n  TableFilterProps & {options?: DateFilterOptions}\n> = ({column, value, onChange, options}) => {\n  const {\n    className,\n    style,\n    defaultValue,\n    defaultComparator = '=',\n    defaultRangeMode = false,\n    getFilter,\n    onFilter,\n    id,\n    disabled,\n    minDate,\n    maxDate,\n  } = options || {};\n\n  // Local state for immediate updates\n  const [startDate, setStartDate] = useState(\n    value?.startDate || defaultValue?.startDate || ''\n  );\n  const [endDate, setEndDate] = useState(\n    value?.endDate || defaultValue?.endDate || ''\n  );\n  const [diffFlag, setDiffFlag] = useState(\n    value?.diffFlag ?? defaultValue?.diffFlag ?? defaultRangeMode\n  );\n  const [comparator, setComparator] = useState(\n    value?.comparator || defaultValue?.comparator || defaultComparator\n  );\n  const stateRef = useRef({startDate, endDate, diffFlag, comparator});\n  const onChangeRef = useRef(onChange);\n  const onFilterRef = useRef(onFilter);\n  // Track last values sent to parent to prevent sync loops\n  const lastValuesRef = useRef({\n    startDate,\n    endDate,\n    diffFlag,\n    comparator,\n  });\n\n  // Keep refs in sync with state\n  useEffect(() => {\n    stateRef.current = {startDate, endDate, diffFlag, comparator};\n  }, [startDate, endDate, diffFlag, comparator]);\n\n  useEffect(() => {\n    onChangeRef.current = onChange;\n    onFilterRef.current = onFilter;\n  }, [onChange, onFilter]);\n\n  // Sync internal value when external value changes (e.g., from clear all filters)\n  useEffect(() => {\n    const externalStartDate = value?.startDate || '';\n    const externalEndDate = value?.endDate || '';\n    const externalDiffFlag = value?.diffFlag ?? defaultRangeMode;\n    const externalComparator = value?.comparator || defaultComparator;\n    // Only sync if different from what we last sent to parent\n    if (externalStartDate !== lastValuesRef.current.startDate) {\n      setStartDate(externalStartDate);\n      lastValuesRef.current.startDate = externalStartDate;\n    }\n    if (externalEndDate !== lastValuesRef.current.endDate) {\n      setEndDate(externalEndDate);\n      lastValuesRef.current.endDate = externalEndDate;\n    }\n    if (externalDiffFlag !== lastValuesRef.current.diffFlag) {\n      setDiffFlag(externalDiffFlag);\n      lastValuesRef.current.diffFlag = externalDiffFlag;\n    }\n    if (externalComparator !== lastValuesRef.current.comparator) {\n      setComparator(externalComparator);\n      lastValuesRef.current.comparator = externalComparator;\n    }\n  }, [value, defaultRangeMode, defaultComparator]);\n\n  // Debounce the date values\n  const [debouncedStartDate] = useDebouncedValue(startDate, {wait: 500});\n  const [debouncedEndDate] = useDebouncedValue(endDate, {wait: 500});\n\n  // Propagate debounced value to parent\n  useEffect(() => {\n    // Update refs to track what we're sending to parent\n    lastValuesRef.current = {\n      startDate: debouncedStartDate,\n      endDate: debouncedEndDate,\n      diffFlag,\n      comparator,\n    };\n    const newValue =\n      debouncedStartDate || debouncedEndDate\n        ? {\n            startDate: debouncedStartDate,\n            endDate: debouncedEndDate,\n            diffFlag,\n            comparator,\n          }\n        : null;\n    onChangeRef.current(newValue);\n    onFilterRef.current?.(newValue);\n  }, [debouncedStartDate, debouncedEndDate, diffFlag, comparator]);\n\n  // Provide filter instance via getFilter callback - only on mount\n  useEffect(() => {\n    if (getFilter) {\n      getFilter({\n        get value() {\n          const {\n            startDate: s,\n            endDate: e,\n            diffFlag: d,\n            comparator: c,\n          } = stateRef.current;\n          return s || e\n            ? {startDate: s, endDate: e, diffFlag: d, comparator: c}\n            : null;\n        },\n        setValue: (newValue) => {\n          if (newValue) {\n            setStartDate(newValue.startDate || '');\n            setEndDate(newValue.endDate || '');\n            setDiffFlag(newValue.diffFlag ?? defaultRangeMode);\n            setComparator(newValue.comparator || defaultComparator);\n            onChangeRef.current(newValue);\n            onFilterRef.current?.(newValue);\n          } else {\n            setStartDate('');\n            setEndDate('');\n            onChangeRef.current(null);\n            onFilterRef.current?.(null);\n          }\n        },\n        clear: () => {\n          setStartDate('');\n          setEndDate('');\n          setDiffFlag(defaultRangeMode);\n          setComparator(defaultComparator);\n          onChangeRef.current(null);\n          onFilterRef.current?.(null);\n        },\n      });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [getFilter]);\n\n  // Simple change handlers - just update local state\n  const handleStartDateChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      setStartDate(e.target.value);\n    },\n    []\n  );\n\n  const handleEndDateChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      setEndDate(e.target.value);\n    },\n    []\n  );\n\n  const handleDiffFlagChange = useCallback(() => {\n    setDiffFlag((prev) => !prev);\n  }, []);\n\n  const handleComparatorChange = useCallback(\n    (e: React.ChangeEvent<HTMLSelectElement>) => {\n      setComparator(e.target.value);\n    },\n    []\n  );\n\n  return (\n    <FilterContainer className={className} style={style}>\n      <ToggleButton\n        $active={diffFlag}\n        onClick={handleDiffFlagChange}\n        title=\"Date range mode\"\n        disabled={disabled}\n      >\n        {diffFlag ? 'Range' : 'Single'}\n      </ToggleButton>\n\n      {!diffFlag && (\n        <ComparatorSelect\n          value={comparator}\n          onChange={handleComparatorChange}\n          disabled={disabled}\n          style={{fontWeight: 400}}\n        >\n          <option value=\"=\">=</option>\n          <option value=\">=\">&ge;</option>\n          <option value=\"<\">&lt;</option>\n        </ComparatorSelect>\n      )}\n\n      <DateInput\n        type=\"date\"\n        id={id}\n        value={startDate}\n        onChange={handleStartDateChange}\n        disabled={disabled}\n        min={minDate}\n        max={maxDate}\n        style={{fontWeight: 400}}\n      />\n\n      {diffFlag && (\n        <>\n          <span style={{color: '#6b7280', fontSize: 12, fontWeight: 400}}>\n            to\n          </span>\n          <DateInput\n            type=\"date\"\n            value={endDate}\n            onChange={handleEndDateChange}\n            disabled={disabled}\n            min={minDate}\n            max={maxDate}\n            style={{fontWeight: 400}}\n          />\n        </>\n      )}\n    </FilterContainer>\n  );\n};\n\n/**\n * Date filter - can be used as a component or factory function\n *\n * @example\n * // As a factory function with options\n * filter: DateFilter({\n *   defaultRangeMode: true,\n *   minDate: '2020-01-01',\n *   getFilter: (filter) => { myFilterRef = filter; },\n * })\n */\nexport function DateFilter(\n  options: DateFilterOptions\n): React.FC<TableFilterProps>;\nexport function DateFilter(props: TableFilterProps): React.ReactElement;\nexport function DateFilter(\n  optionsOrProps: DateFilterOptions | TableFilterProps\n): React.FC<TableFilterProps> | React.ReactElement {\n  if (\n    !('column' in optionsOrProps) &&\n    !('value' in optionsOrProps) &&\n    !('onChange' in optionsOrProps)\n  ) {\n    const options = optionsOrProps as DateFilterOptions;\n    const FilterWithOptions: React.FC<TableFilterProps> = (props) => (\n      <DateFilterComponent {...props} options={options} />\n    );\n    FilterWithOptions.displayName = 'DateFilter';\n    return FilterWithOptions;\n  }\n\n  const props = optionsOrProps as TableFilterProps;\n  return <DateFilterComponent {...props} />;\n}\n\n/**\n * Internal Select filter component with options support\n */\nconst SelectFilterComponent: React.FC<\n  TableFilterProps & {options?: SelectFilterOptions}\n> = ({column, value, onChange, options}) => {\n  const {\n    placeholder = 'All',\n    className,\n    style,\n    defaultValue,\n    delay = 300,\n    options: customOptions,\n    getFilter,\n    onFilter,\n    id,\n    disabled,\n  } = options || {};\n\n  // Local state for immediate updates\n  const [selectedValue, setSelectedValue] = useState(\n    value || defaultValue || ''\n  );\n  const selectedValueRef = useRef(selectedValue);\n  const onChangeRef = useRef(onChange);\n  const onFilterRef = useRef(onFilter);\n  // Track last value sent to parent to prevent sync loops\n  const lastValueRef = useRef(selectedValue);\n\n  // Keep refs in sync with state\n  useEffect(() => {\n    selectedValueRef.current = selectedValue;\n  }, [selectedValue]);\n\n  useEffect(() => {\n    onChangeRef.current = onChange;\n    onFilterRef.current = onFilter;\n  }, [onChange, onFilter]);\n\n  // Sync internal value when external value changes (e.g., from clear all filters)\n  useEffect(() => {\n    const externalValue = value || '';\n    // Only sync if different from what we last sent to parent\n    if (externalValue !== lastValueRef.current) {\n      setSelectedValue(externalValue);\n      lastValueRef.current = externalValue;\n    }\n  }, [value]);\n\n  // Debounce the selected value\n  const [debouncedValue] = useDebouncedValue(selectedValue, {wait: delay});\n\n  // Propagate debounced value to parent\n  useEffect(() => {\n    // Update ref to track what we're sending to parent\n    lastValueRef.current = debouncedValue || '';\n    onChangeRef.current(debouncedValue || null);\n    onFilterRef.current?.(debouncedValue || null);\n  }, [debouncedValue]);\n\n  // Provide filter instance via getFilter callback - only on mount\n  useEffect(() => {\n    if (getFilter) {\n      getFilter({\n        get value() {\n          return selectedValueRef.current || null;\n        },\n        setValue: (newValue) => {\n          setSelectedValue(newValue || '');\n          onChangeRef.current(newValue);\n          onFilterRef.current?.(newValue);\n        },\n        clear: () => {\n          setSelectedValue('');\n          onChangeRef.current(null);\n          onFilterRef.current?.(null);\n        },\n      });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [getFilter]);\n\n  // Simple change handler - just update local state\n  const handleChange = useCallback(\n    (e: React.ChangeEvent<HTMLSelectElement>) => {\n      setSelectedValue(e.target.value);\n    },\n    []\n  );\n\n  // Use custom options if provided, otherwise fall back to column.filterOptions\n  const selectOptions = customOptions || column.filterOptions || [];\n\n  const selectContent = (\n    <>\n      <option value=\"\">{placeholder}</option>\n      {selectOptions.map((opt) => (\n        <option key={opt.value} value={opt.value}>\n          {opt.label}\n        </option>\n      ))}\n    </>\n  );\n\n  // If custom className is provided, use plain select to allow full CSS control\n  if (className) {\n    return (\n      <select\n        id={id}\n        value={selectedValue}\n        onChange={handleChange}\n        className={className}\n        style={{width: '100%', fontWeight: 400, ...style}}\n        disabled={disabled}\n      >\n        {selectContent}\n      </select>\n    );\n  }\n\n  return (\n    <FilterSelectBase\n      id={id}\n      value={selectedValue}\n      onChange={handleChange}\n      style={{fontWeight: 400, ...style}}\n      disabled={disabled}\n    >\n      {selectContent}\n    </FilterSelectBase>\n  );\n};\n\n/**\n * Select filter - can be used as a component or factory function\n *\n * @example\n * // As a factory function with options\n * filter: SelectFilter({\n *   placeholder: 'Select status...',\n *   options: [{value: 'active', label: 'Active'}, {value: 'inactive', label: 'Inactive'}],\n *   getFilter: (filter) => { myFilterRef = filter; },\n * })\n */\nexport function SelectFilter(\n  options: SelectFilterOptions\n): React.FC<TableFilterProps>;\nexport function SelectFilter(props: TableFilterProps): React.ReactElement;\nexport function SelectFilter(\n  optionsOrProps: SelectFilterOptions | TableFilterProps\n): React.FC<TableFilterProps> | React.ReactElement {\n  if (\n    !('column' in optionsOrProps) &&\n    !('value' in optionsOrProps) &&\n    !('onChange' in optionsOrProps)\n  ) {\n    const options = optionsOrProps as SelectFilterOptions;\n    const FilterWithOptions: React.FC<TableFilterProps> = (props) => (\n      <SelectFilterComponent {...props} options={options} />\n    );\n    FilterWithOptions.displayName = 'SelectFilter';\n    return FilterWithOptions;\n  }\n\n  const props = optionsOrProps as TableFilterProps;\n  return <SelectFilterComponent {...props} />;\n}\n\n/**\n * Get filter component based on type\n */\nexport const getFilterComponent = (\n  type: string\n): React.FC<TableFilterProps> => {\n  switch (type) {\n    case 'number':\n      return NumberFilter;\n    case 'date':\n    case 'dateRange':\n      return DateFilter;\n    case 'select':\n      return SelectFilter;\n    default:\n      return TextFilter;\n  }\n};\n"],"names":[],"sourceRoot":""}