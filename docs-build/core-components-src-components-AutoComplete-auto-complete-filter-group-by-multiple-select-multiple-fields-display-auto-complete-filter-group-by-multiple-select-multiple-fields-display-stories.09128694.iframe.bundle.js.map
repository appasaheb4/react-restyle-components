{"version":3,"file":"core-components-src-components-AutoComplete-auto-complete-filter-group-by-multiple-select-multiple-fields-display-auto-complete-filter-group-by-multiple-select-multiple-fields-display-stories.09128694.iframe.bundle.js","mappings":";;;;AAyGA","sources":["webpack://react-restyle-components/./src/core-components/src/components/AutoComplete/auto-complete-filter-group-by-multiple-select-multiple-fields-display/auto-complete-filter-group-by-multiple-select-multiple-fields-display.stories.tsx"],"sourcesContent":["import type {Meta, StoryObj} from '@storybook/react';\nimport {\n  AutoCompleteFilterGroupByMultipleSelectMultipleFieldsDisplay,\n  AutoCompleteFilterGroupByMultipleSelectMultipleFieldsDisplayProps,\n} from './auto-complete-filter-group-by-multiple-select-multiple-fields-display.component';\nimport {useState} from 'react';\nimport React from 'react';\nimport {action} from '@storybook/addon-actions';\nimport {styled} from 'styled-components';\n\nconst Wrapper = styled.div`\n  width: 100%;\n  padding: 20px;\n  max-width: 800px;\n`;\n\nconst meta: Meta<\n  typeof AutoCompleteFilterGroupByMultipleSelectMultipleFieldsDisplay\n> = {\n  title:\n    'Components/AutoComplete/AutoCompleteFilterGroupByMultipleSelectMultipleFieldsDisplay',\n  component: AutoCompleteFilterGroupByMultipleSelectMultipleFieldsDisplay,\n  tags: ['autodocs'],\n  parameters: {\n    componentSubtitle: `import { AutoCompleteFilterGroupByMultipleSelectMultipleFieldsDisplay } from 'react-restyle-components'`,\n    layout: 'centered',\n    docs: {\n      description: {\n        component:\n          'An advanced grouped autocomplete multi-select component for selecting departments organized by labs with filtering and group management capabilities. Features include group-based selection with \"All/None\" buttons, individual item selection, search filtering across multiple fields, and comprehensive visual feedback.',\n      },\n    },\n  },\n  decorators: [\n    (Story) => (\n      <Wrapper>\n        <Story />\n      </Wrapper>\n    ),\n  ],\n  argTypes: {\n    uniqueField: {\n      control: 'text',\n      description: 'Field to use as unique identifier for items',\n      defaultValue: '_id',\n    },\n    isSelectedStringArray: {\n      control: 'boolean',\n      description: 'Whether selected items are stored as string array of IDs',\n      defaultValue: false,\n    },\n    loader: {\n      control: 'boolean',\n      description: 'Show loading spinner in the input field',\n      defaultValue: false,\n    },\n    placeholder: {\n      control: 'text',\n      description: 'Placeholder text for the search input',\n      defaultValue: 'Search...',\n    },\n    hasError: {\n      control: 'boolean',\n      description: 'Show error state with red border',\n      defaultValue: false,\n    },\n    disable: {\n      control: 'boolean',\n      description: 'Disable the entire component',\n      defaultValue: false,\n    },\n    isUpperCase: {\n      control: 'boolean',\n      description: 'Transform search input to uppercase',\n      defaultValue: false,\n    },\n    showGroupHeaders: {\n      control: 'boolean',\n      description: 'Show headers for each group (lab)',\n      defaultValue: true,\n    },\n    collapsibleGroups: {\n      control: 'boolean',\n      description: 'Allow groups to be collapsed/expanded',\n      defaultValue: false,\n    },\n    data: {\n      description:\n        'Data object containing list (grouped items), selected items, and display configuration',\n    },\n    onFilter: {\n      description: 'Callback fired when user types in search field',\n    },\n    onUpdate: {\n      description: 'Callback fired when selection is updated (on blur/close)',\n    },\n    onSelect: {\n      description: 'Callback fired when individual item is selected/deselected',\n    },\n    onBlur: {\n      description: 'Callback fired when input field loses focus',\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<\n  typeof AutoCompleteFilterGroupByMultipleSelectMultipleFieldsDisplay\n>;\n\n// Sample grouped lab/department data structure\nconst sampleGroupedData = {\n  GFL: [\n    {\n      _id: '66ea7f1fce9360f262a122f4',\n      lab: 'GFL',\n      code: 'OTHER',\n      name: 'OTHER',\n      shortName: null,\n      hod: 'Dr Sachin Jain',\n      authorizedSignatory: ['DRSACHIN', 'KARTHIKA'],\n      companyCode: 'GENEFLOW',\n      status: 'A',\n      __typename: 'Department',\n    },\n    {\n      _id: '66c3796b902f4bc2eaadc4e2',\n      lab: 'GFL',\n      code: 'HOME COLLECTION',\n      name: 'HOME COLLECTION',\n      shortName: null,\n      hod: 'Dr Sachin Jain',\n      authorizedSignatory: [],\n      companyCode: 'GENEFLOW',\n      status: 'A',\n      __typename: 'Department',\n    },\n    {\n      _id: '66c37918902f4bc2eaadc4c5',\n      lab: 'GFL',\n      code: 'LOGISTIC',\n      name: 'LOGISTIC',\n      shortName: null,\n      hod: 'Dr Sachin Jain',\n      authorizedSignatory: [],\n      companyCode: 'GENEFLOW',\n      status: 'A',\n      __typename: 'Department',\n    },\n    {\n      _id: '66c378e7902f4bc2eaadc4aa',\n      lab: 'GFL',\n      code: 'ACCESSIONING',\n      name: 'ACCESSIONING',\n      shortName: '',\n      hod: 'Dr Sachin Jain',\n      authorizedSignatory: [],\n      companyCode: 'GENEFLOW',\n      status: 'A',\n      __typename: 'Department',\n    },\n    {\n      _id: '66c378bc902f4bc2eaadc48a',\n      lab: 'GFL',\n      code: 'PHLEBOTOMY',\n      name: 'PHLEBOTOMY',\n      shortName: 'PHLEBO',\n      hod: 'Dr Sachin Jain',\n      authorizedSignatory: [],\n      companyCode: 'GENEFLOW',\n      status: 'A',\n      __typename: 'Department',\n    },\n    {\n      _id: '66963059d2342606f43638a0',\n      lab: 'GFL',\n      code: 'SPECIAL CHEMISTRY',\n      name: 'SPECIAL CHEMISTRY',\n      shortName: null,\n      hod: 'DR SACHIN JAIN',\n      authorizedSignatory: ['DRSACHIN', 'KARTHIKA'],\n      companyCode: 'GENEFLOW',\n      status: 'A',\n      __typename: 'Department',\n    },\n    {\n      _id: '665171cca262903d12cb9384',\n      lab: 'GFL',\n      code: 'MOLECULAR',\n      name: 'MOLECULAR',\n      shortName: null,\n      hod: 'DR SACHIN JAIN',\n      authorizedSignatory: ['DRSACHIN'],\n      companyCode: 'GENEFLOW',\n      status: 'A',\n      __typename: 'Department',\n    },\n    {\n      _id: '665171aea262903d12cb935a',\n      lab: 'GFL',\n      code: 'CYTOGENETIC',\n      name: 'CYTOGENETIC',\n      shortName: null,\n      hod: 'DR SACHIN JAIN',\n      authorizedSignatory: ['DRSACHIN'],\n      companyCode: 'GENEFLOW',\n      status: 'A',\n      __typename: 'Department',\n    },\n    {\n      _id: '6651718ea262903d12cb9330',\n      lab: 'GFL',\n      code: 'FLOWCYTOMETRY',\n      name: 'FLOWCYTOMETRY',\n      shortName: null,\n      hod: 'Dr Sachin Jain',\n      authorizedSignatory: ['DRSACHIN'],\n      companyCode: 'GENEFLOW',\n      status: 'A',\n      __typename: 'Department',\n    },\n    {\n      _id: '6651715aa262903d12cb92dc',\n      lab: 'GFL',\n      code: 'HEMATOLOGY',\n      name: 'HEMATOLOGY',\n      shortName: null,\n      hod: 'DR SACHIN JAIN',\n      authorizedSignatory: ['DRSACHIN'],\n      companyCode: 'GENEFLOW',\n      status: 'A',\n      __typename: 'Department',\n    },\n  ],\n  LPL: [\n    {\n      _id: '66517175a262903d12cb9309',\n      lab: 'LPL',\n      code: 'HISTOPATHOLOGY',\n      name: 'HISTOPATHOLOGY',\n      shortName: null,\n      hod: 'DR SACHIN JAIN',\n      authorizedSignatory: ['DRSACHIN'],\n      companyCode: 'GENEFLOW',\n      status: 'A',\n      __typename: 'Department',\n    },\n    {\n      _id: '664872cd00e9a75b78f9d54c',\n      lab: 'LPL',\n      code: 'ONCOLOGY',\n      name: 'ONCOLOGY',\n      shortName: null,\n      hod: 'DR SACHIN JAIN',\n      authorizedSignatory: ['DRSACHIN'],\n      companyCode: 'GENEFLOW',\n      status: 'A',\n      __typename: 'Department',\n    },\n  ],\n};\n\n// Enhanced template with comprehensive functionality\nconst Template = (\n  args: AutoCompleteFilterGroupByMultipleSelectMultipleFieldsDisplayProps\n) => {\n  const [selectedItems, setSelectedItems] = useState(args.data.selected || []);\n  const [filteredData, setFilteredData] = useState(args.data);\n\n  const handleFilter = (value: string) => {\n    action('onFilter')(value);\n    if (value.trim() === '') {\n      // Reset to original data when search is empty\n      setFilteredData(args.data);\n    } else {\n      // Filter the grouped data\n      const filteredGroups: Record<string, any[]> = {};\n\n      Object.keys(args.data.list).forEach((groupKey) => {\n        const groupItems = args.data.list[groupKey] || [];\n        const filteredGroupItems = groupItems.filter(\n          (item: any) =>\n            args.data.displayKey?.some((key: string) =>\n              item[key]?.toString().toLowerCase().includes(value.toLowerCase())\n            ) ||\n            item.code?.toLowerCase().includes(value.toLowerCase()) ||\n            item.name?.toLowerCase().includes(value.toLowerCase()) ||\n            item.hod?.toLowerCase().includes(value.toLowerCase())\n        );\n\n        if (filteredGroupItems.length > 0) {\n          filteredGroups[groupKey] = filteredGroupItems;\n        }\n      });\n\n      setFilteredData({\n        ...args.data,\n        list: filteredGroups,\n      });\n    }\n  };\n  console.log({selectedItems});\n\n  return (\n    <AutoCompleteFilterGroupByMultipleSelectMultipleFieldsDisplay\n      {...args}\n      data={{\n        ...filteredData,\n        selected: selectedItems,\n      }}\n      onSelect={(items) => {\n        console.log({items});\n      }}\n      onFilter={handleFilter}\n      onBlur={(e) => {\n        action('onBlur')(e);\n      }}\n    />\n  );\n};\n\n// Documentation/Overview story (appears first)\nexport const Documentation: Story = {\n  name: 'Documentation',\n  render: Template,\n  args: {\n    uniqueField: '_id',\n    placeholder: 'Search departments...',\n    data: {\n      list: {\n        GFL: [\n          {\n            _id: '66ea7f1fce9360f262a122f4',\n            lab: 'GFL',\n            code: 'OTHER',\n            name: 'OTHER',\n            hod: 'Dr Sachin Jain',\n          },\n          {\n            _id: '66c3796b902f4bc2eaadc4e2',\n            lab: 'GFL',\n            code: 'HOME COLLECTION',\n            name: 'HOME COLLECTION',\n            hod: 'Dr Sachin Jain',\n          },\n        ],\n      },\n      selected: [],\n      displayKey: ['code', 'name'],\n    },\n    showGroupHeaders: true,\n    collapsibleGroups: false,\n    loader: false,\n    hasError: false,\n    disable: false,\n    isUpperCase: false,\n    isSelectedStringArray: false,\n  },\n  parameters: {\n    docs: {\n      source: {\n        code: `\nimport { AutoCompleteFilterGroupByMultipleSelectMultipleFieldsDisplay } from 'react-restyle-components';\n\n<AutoCompleteFilterGroupByMultipleSelectMultipleFieldsDisplay\n  uniqueField=\"_id\"\n  placeholder=\"Search departments...\"\n  data={{\n    list: {\n      GFL: [\n        {_id: '1', lab: 'GFL', code: 'OTHER', name: 'OTHER', hod: 'Dr Sachin Jain'},\n        {_id: '2', lab: 'GFL', code: 'HOME COLLECTION', name: 'HOME COLLECTION', hod: 'Dr Sachin Jain'},\n      ],\n    },\n    selected: [],\n    displayKey: ['code', 'name'],\n  }}\n  showGroupHeaders={true}\n  collapsibleGroups={false}\n  onFilter={(value) => console.log(value)}\n  onSelect={(items) => console.log(items)}\n  onUpdate={(items) => console.log(items)}\n/>\n        `,\n        language: 'tsx',\n      },\n      description: {\n        story:\n          'Overview of the AutoCompleteFilterGroupByMultipleSelectMultipleFieldsDisplay component with default configuration. This component provides a grouped autocomplete multi-select with filtering, group management, and bulk selection capabilities.',\n      },\n    },\n    order: 0,\n  },\n};\n\n// Basic story with comprehensive functionality\nexport const Basic: Story = {\n  render: Template,\n  args: {\n    uniqueField: '_id',\n    placeholder: 'Search ...',\n    data: {\n      list: sampleGroupedData,\n      selected: [],\n      displayKey: ['code', 'name'],\n    },\n    showGroupHeaders: true,\n    collapsibleGroups: false,\n    loader: false,\n    hasError: false,\n    disable: false,\n    isUpperCase: false,\n    isSelectedStringArray: false,\n  },\n  parameters: {\n    docs: {\n      description: {\n        story: `\n**Basic Grouped Multi-Select Autocomplete**\n\nThis story demonstrates the core functionality of the grouped autocomplete component with lab/department data:\n\n**Key Features:**\n- üè• **Grouped Display**: Departments organized by labs (GFL, LPL)\n- ‚úÖ **Multi-Selection**: Select/deselect individual items or entire groups\n- üîç **Smart Search**: Search across department codes, names, and HOD names\n- ‚ö° **Bulk Actions**: \"All\" and \"None\" buttons for each lab group\n- üìä **Real-time Statistics**: Live count of selections and filtering\n- üéØ **Visual Feedback**: Clear indication of selected items and groups\n\n**How to Test:**\n1. Click the input to open the dropdown\n2. Use individual checkboxes to select departments\n3. Try the \"All\" button to select all departments in a lab\n4. Use the \"None\" button to deselect all departments in a lab\n5. Search for specific departments using the search field\n6. Observe the selection summary and statistics updating in real-time\n\n**Data Structure:**\nThe component expects data in the format:\n\\`\\`\\`javascript\n{\n  list: {\n    \"LAB_NAME\": [array of department objects],\n    \"LAB_NAME_2\": [array of department objects]\n  },\n  selected: [array of selected department objects],\n  displayKey: ['field1', 'field2'] // fields to show in dropdown\n}\n\\`\\`\\`\n        `,\n      },\n    },\n  },\n};\n"],"names":[],"sourceRoot":""}