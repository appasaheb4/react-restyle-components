"use strict";(self.webpackChunkreact_restyle_components=self.webpackChunkreact_restyle_components||[]).push([[9392],{"./src/core-components/src/molecules/auto-complete-filter-multi-select-selected-top-display/auto-complete-filter-multi-select-selected-top-display.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Basic:()=>Basic,__namedExportsOrder:()=>__namedExportsOrder,default:()=>auto_complete_filter_multi_select_selected_top_display_stories});var react=__webpack_require__("./node_modules/react/index.js"),lodash=__webpack_require__("./node_modules/lodash/lodash.js"),lodash_default=__webpack_require__.n(lodash),icons_component=__webpack_require__("./src/core-components/src/atoms/icons/icons.component.tsx"),lib=__webpack_require__("./node_modules/@techabl/core-utils/lib/index.js"),tc_module=__webpack_require__("./src/core-components/src/tc.module.css"),tc_module_default=__webpack_require__.n(tc_module),utility_util=__webpack_require__("./src/core-components/src/utils/utility.util.ts");const AutoCompleteFilterMultiSelectSelectedTopDisplay=({uniqueField="_id",placeholder="Search...",data,hasError=!1,disable=!1,isUpperCase=!1,name,onFilter,onUpdate,onSelect,onBlur,dynamicCheck="panelCode"})=>{const[value,setValue]=(0,react.useState)(""),[options,setOptions]=(0,react.useState)(),[originalOptions,setOriginalOptions]=(0,react.useState)(),[isListOpen,setIsListOpen]=(0,react.useState)(!1),wrapperRef=(0,react.useRef)(null);var ref;ref=wrapperRef,(0,react.useEffect)((()=>{function handleClickOutside(event){ref.current&&!ref.current.contains(event.target)&&isListOpen&&(originalOptions&&options&&isListOpen&&onUpdate&&onUpdate(data.selected),setIsListOpen(!1),setValue(""))}return document.addEventListener("mousedown",handleClickOutside),()=>{document.removeEventListener("mousedown",handleClickOutside)}}),[ref,isListOpen]);let count=0;const getSelectedItem=(selectedItem,list)=>{if(0===count){const finalList=list?.filter(((item,index)=>(item.selected=!1,selectedItem&&selectedItem.length>0?selectedItem?.find(((sItem,index)=>{sItem[uniqueField]===item[uniqueField]&&(item.selected=!0)})):item.selected=!1,count++,item)));list=finalList}return list};(0,react.useEffect)((()=>{setOriginalOptions(getSelectedItem(data.selected,data.list)),setOptions(getSelectedItem(data.selected,data.list))}),[data,data.selected]);return react.createElement(react.Fragment,null,react.createElement("div",{ref:wrapperRef,className:(0,utility_util.cn)(tc_module_default()["w-full"],tc_module_default().relative)},react.createElement("div",{className:(0,utility_util.cn)(tc_module_default().flex,tc_module_default()["items-center"],tc_module_default()["leading-4"],tc_module_default()["p-2"],tc_module_default()["focus:outline-none"],tc_module_default()["focus:ring"],tc_module_default()["w-full"],tc_module_default()["shadow-sm"],tc_module_default()["sm:text-base"],tc_module_default().border,tc_module_default()["rounded-md"],{[tc_module_default()["border-red"]]:hasError,[tc_module_default()["border-gray-300"]]:!hasError})},react.createElement("input",{placeholder,disabled:disable,name,value:isListOpen?isUpperCase?value?.toUpperCase():value:`${data.selected&&data.selected.length||0} Items`,className:(0,utility_util.cn)(tc_module_default()["w-full"],tc_module_default()["focus:outline-none"],tc_module_default()["bg-none"]),onKeyUp:e=>{if(8===(e.which?e.which:e.keyCode)){const search=e.target.value;(0,lib.debounce)((()=>{onFilter&&onFilter(search)}))}},onChange:e=>{const search=e.target.value;setValue(search),(0,lib.debounce)((()=>{onFilter&&onFilter(search)}))},onClick:()=>setIsListOpen(!0),onBlur:e=>onBlur&&onBlur(e)}),isListOpen?react.createElement(icons_component.I,{nameIcon:"FaChevronUp"}):react.createElement(icons_component.I,{nameIcon:"FaChevronDown"})),options&&isListOpen?options?.length>0?react.createElement("div",{className:(0,utility_util.cn)(tc_module_default()["mt-1"],tc_module_default().absolute,tc_module_default()["bg-gray-100"],tc_module_default()["p-2"],tc_module_default()["rounded-sm"],tc_module_default()["z-500"]),style:{zIndex:80,width:"100%"}},react.createElement("ul",null,data.selected?.map(((item,index)=>react.createElement(react.Fragment,{key:index},react.createElement("li",{key:index,className:(0,utility_util.cn)(tc_module_default()["text-gray-400"],tc_module_default().flex,tc_module_default()["items-center"])},react.createElement("label",{className:(0,utility_util.cn)(tc_module_default().flex)},react.createElement("input",{type:"checkbox",checked:!0,onChange:()=>onSelect({...item,selected:!0},!0)})," ",react.createElement("span",{className:(0,utility_util.cn)(tc_module_default()["ml-2"],tc_module_default()["mt-1"],tc_module_default()["text-black"])},data.displayKey.map((key=>`${item[key]}\n                              `)).join(" - ")))))))),react.createElement("hr",null),react.createElement("ul",{className:(0,utility_util.cn)(tc_module_default()["p-2"],tc_module_default()["rounded-sm"])},react.createElement("div",null,react.createElement("div",{style:{height:"auto",maxHeight:"300px"}},options?.map(((item,index)=>react.createElement(react.Fragment,{key:index},0==lodash_default().some(data.selected,{[dynamicCheck]:item[dynamicCheck]})&&react.createElement("li",{key:index,className:(0,utility_util.cn)(tc_module_default()["text-gray-400"],tc_module_default().flex,tc_module_default()["items-center"])},react.createElement("label",{className:(0,utility_util.cn)(tc_module_default().flex)},react.createElement("input",{type:"checkbox",checked:item.selected,onChange:()=>onSelect(item)})," ",react.createElement("span",{className:(0,utility_util.cn)(tc_module_default()["ml-2"],tc_module_default()["mt-1"],tc_module_default()["text-black"])},data.displayKey.map((key=>`${item[key]}\n                                          `)).join(" - "))))))))))):react.createElement("span",{className:(0,utility_util.cn)(tc_module_default()["text-gray-400"],tc_module_default()["p-2"])},"Item not found!"):null))};try{AutoCompleteFilterMultiSelectSelectedTopDisplay.displayName="AutoCompleteFilterMultiSelectSelectedTopDisplay",AutoCompleteFilterMultiSelectSelectedTopDisplay.__docgenInfo={description:"",displayName:"AutoCompleteFilterMultiSelectSelectedTopDisplay",props:{uniqueField:{defaultValue:{value:"_id"},description:"",name:"uniqueField",required:!1,type:{name:"string"}},loader:{defaultValue:null,description:"",name:"loader",required:!1,type:{name:"boolean"}},placeholder:{defaultValue:{value:"Search..."},description:"",name:"placeholder",required:!1,type:{name:"string"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"any"}},hasError:{defaultValue:{value:"false"},description:"",name:"hasError",required:!1,type:{name:"boolean"}},disable:{defaultValue:{value:"false"},description:"",name:"disable",required:!1,type:{name:"boolean"}},isUpperCase:{defaultValue:{value:"false"},description:"",name:"isUpperCase",required:!1,type:{name:"boolean"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},onFilter:{defaultValue:null,description:"",name:"onFilter",required:!1,type:{name:"((value: string) => void)"}},onUpdate:{defaultValue:null,description:"",name:"onUpdate",required:!0,type:{name:"(item: any) => void"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!0,type:{name:"(item: any, isSelectedRemove?: boolean | undefined) => any"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!1,type:{name:"((e: any) => void)"}},dynamicCheck:{defaultValue:{value:"panelCode"},description:"",name:"dynamicCheck",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/core-components/src/molecules/auto-complete-filter-multi-select-selected-top-display/auto-complete-filter-multi-select-selected-top-display.component.tsx#AutoCompleteFilterMultiSelectSelectedTopDisplay"]={docgenInfo:AutoCompleteFilterMultiSelectSelectedTopDisplay.__docgenInfo,name:"AutoCompleteFilterMultiSelectSelectedTopDisplay",path:"src/core-components/src/molecules/auto-complete-filter-multi-select-selected-top-display/auto-complete-filter-multi-select-selected-top-display.component.tsx#AutoCompleteFilterMultiSelectSelectedTopDisplay"})}catch(__react_docgen_typescript_loader_error){}const auto_complete_filter_multi_select_selected_top_display_stories={title:"Core Components/Molecules/AutoCompleteFilterMultiSelectSelectedTopDisplay",component:AutoCompleteFilterMultiSelectSelectedTopDisplay,tags:["autodocs"],parameters:{componentSubtitle:"import { AutoCompleteFilterMultiSelectSelectedTopDisplay } from 'react-restyle-components'"}},Basic=(args=>{const[selectedItems,setSelectedItems]=(0,react.useState)(args.data.selected),[filteredData,setFilteredData]=(0,react.useState)(args.data);return react.createElement("div",{style:{minHeight:"20vh"}},react.createElement(AutoCompleteFilterMultiSelectSelectedTopDisplay,{...args,data:{...filteredData,selected:selectedItems},onSelect:item=>{console.log({item});const updatedSelectedItems=selectedItems.includes(item)?selectedItems?.filter((selectedItem=>selectedItem!==item)):[...selectedItems,item];setSelectedItems(updatedSelectedItems),args.onSelect(updatedSelectedItems)},onFilter:value=>{if(""===value.trim())setFilteredData(args.data);else{const filteredOptions=args.data?.list?.filter((item=>item.description.toLowerCase().includes(value.toLowerCase())));setFilteredData({...args.data,list:filteredOptions})}},onUpdate:data=>{setFilteredData(data)}}))}).bind({});Basic.args={data:{list:[{_id:"66532a99bbfed4eea86eae23",code:82,description:"Fiction",libraryCode:"FIC"},{_id:"6652b6d8bcef7f713cb547d4",code:81,description:"Non-Fiction",libraryCode:"NF"},{_id:"66532a99bbfed4eea86eae24",code:83,description:"Science",libraryCode:"SCI"},{_id:"66532a99bbfed4eea86eae25",code:84,description:"History",libraryCode:"HIS"},{_id:"66532a99bbfed4eea86eae26",code:85,description:"Biography",libraryCode:"BIO"},{_id:"66532a99bbfed4eea86eae27",code:86,description:"Children",libraryCode:"CHD"},{_id:"66532a99bbfed4eea86eae28",code:87,description:"Mystery",libraryCode:"MYS"},{_id:"66532a99bbfed4eea86eae29",code:88,description:"Romance",libraryCode:"ROM"},{_id:"66532a99bbfed4eea86eae30",code:89,description:"Fantasy",libraryCode:"FAN"},{_id:"66532a99bbfed4eea86eae31",code:90,description:"Adventure",libraryCode:"ADV"}],selected:[],displayKey:["libraryCode","description"]},onUpdate:item=>{console.log({item})},onSelect:item=>{console.log({item})}};const __namedExportsOrder=["Basic"];Basic.parameters={...Basic.parameters,docs:{...Basic.parameters?.docs,source:{originalSource:"(args: AutoCompleteFilterMultiSelectSelectedTopDisplayProps) => {\n  const [selectedItems, setSelectedItems] = useState(args.data.selected);\n  const [filteredData, setFilteredData] = useState(args.data);\n  const handleUpdate = item => {\n    console.log({\n      item\n    });\n    const updatedSelectedItems = selectedItems.includes(item) ? selectedItems?.filter(selectedItem => selectedItem !== item) : [...selectedItems, item];\n    setSelectedItems(updatedSelectedItems);\n    args.onSelect(updatedSelectedItems);\n  };\n  return <div style={{\n    minHeight: '20vh'\n  }}>\n      <AutoCompleteFilterMultiSelectSelectedTopDisplay {...args} data={{\n      ...filteredData,\n      selected: selectedItems\n    }} onSelect={handleUpdate} onFilter={value => {\n      if (value.trim() === '') {\n        // Reset to original data when search is empty\n        setFilteredData(args.data);\n      } else {\n        const filteredOptions = args.data?.list?.filter((item: {\n          description: string;\n        }) => item.description.toLowerCase().includes(value.toLowerCase()));\n        setFilteredData({\n          ...args.data,\n          list: filteredOptions\n        });\n      }\n    }} onUpdate={data => {\n      setFilteredData(data);\n    }} />\n    </div>;\n}",...Basic.parameters?.docs?.source}}};try{Basic.displayName="Basic",Basic.__docgenInfo={description:"",displayName:"Basic",props:{uniqueField:{defaultValue:null,description:"",name:"uniqueField",required:!1,type:{name:"string"}},loader:{defaultValue:null,description:"",name:"loader",required:!1,type:{name:"boolean"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"any"}},hasError:{defaultValue:null,description:"",name:"hasError",required:!1,type:{name:"boolean"}},disable:{defaultValue:null,description:"",name:"disable",required:!1,type:{name:"boolean"}},isUpperCase:{defaultValue:null,description:"",name:"isUpperCase",required:!1,type:{name:"boolean"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},onFilter:{defaultValue:null,description:"",name:"onFilter",required:!1,type:{name:"((value: string) => void)"}},onUpdate:{defaultValue:null,description:"",name:"onUpdate",required:!0,type:{name:"(item: any) => void"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!0,type:{name:"(item: any, isSelectedRemove?: boolean | undefined) => any"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!1,type:{name:"((e: any) => void)"}},dynamicCheck:{defaultValue:null,description:"",name:"dynamicCheck",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/core-components/src/molecules/auto-complete-filter-multi-select-selected-top-display/auto-complete-filter-multi-select-selected-top-display.stories.tsx#Basic"]={docgenInfo:Basic.__docgenInfo,name:"Basic",path:"src/core-components/src/molecules/auto-complete-filter-multi-select-selected-top-display/auto-complete-filter-multi-select-selected-top-display.stories.tsx#Basic"})}catch(__react_docgen_typescript_loader_error){}}}]);