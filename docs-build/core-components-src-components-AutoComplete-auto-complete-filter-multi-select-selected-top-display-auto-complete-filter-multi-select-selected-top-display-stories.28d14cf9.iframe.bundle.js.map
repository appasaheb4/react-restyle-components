{"version":3,"file":"core-components-src-components-AutoComplete-auto-complete-filter-multi-select-selected-top-display-auto-complete-filter-multi-select-selected-top-display-stories.28d14cf9.iframe.bundle.js","mappings":";;;;AAkFA","sources":["webpack://react-restyle-components/./src/core-components/src/components/AutoComplete/auto-complete-filter-multi-select-selected-top-display/auto-complete-filter-multi-select-selected-top-display.stories.tsx"],"sourcesContent":["import type {Meta, StoryObj} from '@storybook/react';\nimport {\n  AutoCompleteFilterMultiSelectSelectedTopDisplay,\n  AutoCompleteFilterMultiSelectSelectedTopDisplayProps,\n} from './auto-complete-filter-multi-select-selected-top-display.component';\nimport {useState} from 'react';\nimport React from 'react';\nimport {action} from '@storybook/addon-actions';\nimport {styled} from 'styled-components';\n\nconst Wrapper = styled.div`\n  width: 100%;\n  padding: 20px;\n  max-width: 800px;\n`;\n\nconst meta: Meta<typeof AutoCompleteFilterMultiSelectSelectedTopDisplay> = {\n  title:\n    'Components/AutoComplete/AutoCompleteFilterMultiSelectSelectedTopDisplay',\n  component: AutoCompleteFilterMultiSelectSelectedTopDisplay,\n  tags: ['autodocs'],\n  parameters: {\n    componentSubtitle: `import { AutoCompleteFilterMultiSelectSelectedTopDisplay } from 'react-restyle-components'`,\n    layout: 'centered',\n    docs: {\n      description: {\n        component:\n          'A multi-select autocomplete component with selected items displayed at the top. Features include bulk select/deselect actions, search filtering, and organized display of selected vs available items.',\n      },\n    },\n  },\n  decorators: [\n    (Story) => (\n      <Wrapper>\n        <Story />\n      </Wrapper>\n    ),\n  ],\n  argTypes: {\n    uniqueField: {\n      control: 'text',\n      description: 'Field to use as unique identifier for items',\n      defaultValue: '_id',\n    },\n    loader: {\n      control: 'boolean',\n      description: 'Show loading spinner',\n      defaultValue: false,\n    },\n    placeholder: {\n      control: 'text',\n      description: 'Placeholder text for search input',\n      defaultValue: 'Search...',\n    },\n    hasError: {\n      control: 'boolean',\n      description: 'Show error state with red border',\n      defaultValue: false,\n    },\n    disable: {\n      control: 'boolean',\n      description: 'Disable the component',\n      defaultValue: false,\n    },\n    isUpperCase: {\n      control: 'boolean',\n      description: 'Transform search input to uppercase',\n      defaultValue: false,\n    },\n    showSelectAllSection: {\n      control: 'boolean',\n      description: 'Show quick action buttons section',\n      defaultValue: true,\n    },\n    dynamicCheck: {\n      control: 'text',\n      description: 'Field used for dynamic checking/comparison',\n      defaultValue: 'panelCode',\n    },\n  },\n};\n\nexport default meta;\ntype Story = StoryObj<typeof AutoCompleteFilterMultiSelectSelectedTopDisplay>;\n\n// Documentation/Overview story (appears first)\nexport const Documentation: Story = {\n  name: 'Documentation',\n  render: (args) => {\n    const [selectedItems, setSelectedItems] = useState(\n      args.data.selected || []\n    );\n    const [allItems] = useState([\n      {_id: '1', panelCode: 'CBC', name: 'Complete Blood Count', category: 'Hematology'},\n      {_id: '2', panelCode: 'BMP', name: 'Basic Metabolic Panel', category: 'Chemistry'},\n      {_id: '3', panelCode: 'LIPID', name: 'Lipid Panel', category: 'Chemistry'},\n    ]);\n    const [filteredData, setFilteredData] = useState(args.data);\n\n    const handleSelect = (items: any[]) => {\n      if (!items || !Array.isArray(items)) return;\n      if (items.length === 1) {\n        const item = items[0];\n        const isCurrentlySelected = selectedItems.some(\n          (selected) =>\n            selected[args.uniqueField || '_id'] ===\n            item[args.uniqueField || '_id']\n        );\n        let updatedSelected;\n        if (isCurrentlySelected) {\n          updatedSelected = selectedItems.filter(\n            (selected) =>\n              selected[args.uniqueField || '_id'] !==\n              item[args.uniqueField || '_id']\n          );\n        } else {\n          updatedSelected = [...selectedItems, item];\n        }\n        setSelectedItems(updatedSelected);\n      }\n      action('onSelect')(items);\n    };\n\n    const handleUpdate = (items: any[]) => {\n      setSelectedItems(items || []);\n      action('onUpdate')(items);\n    };\n\n    const handleFilter = (value: string) => {\n      action('onFilter')(value);\n      if (value.trim() === '') {\n        setFilteredData({\n          ...args.data,\n          list: allItems,\n        });\n      } else {\n        const filteredList = allItems.filter(\n          (item: any) =>\n            args.data.displayKey?.some((key: string) =>\n              item[key]?.toString().toLowerCase().includes(value.toLowerCase())\n            ) ||\n            item.panelCode?.toLowerCase().includes(value.toLowerCase()) ||\n            item.name?.toLowerCase().includes(value.toLowerCase())\n        );\n        setFilteredData({\n          ...args.data,\n          list: filteredList,\n        });\n      }\n    };\n\n    return (\n      <AutoCompleteFilterMultiSelectSelectedTopDisplay\n        {...args}\n        data={{\n          ...filteredData,\n          selected: selectedItems,\n        }}\n        onSelect={handleSelect}\n        onUpdate={handleUpdate}\n        onFilter={handleFilter}\n        onBlur={(e) => {\n          action('onBlur')(e);\n        }}\n      />\n    );\n  },\n  args: {\n    uniqueField: '_id',\n    loader: false,\n    placeholder: 'Search panels...',\n    hasError: false,\n    disable: false,\n    isUpperCase: false,\n    showSelectAllSection: true,\n    dynamicCheck: 'panelCode',\n    data: {\n      list: [\n        {_id: '1', panelCode: 'CBC', name: 'Complete Blood Count', category: 'Hematology'},\n        {_id: '2', panelCode: 'BMP', name: 'Basic Metabolic Panel', category: 'Chemistry'},\n        {_id: '3', panelCode: 'LIPID', name: 'Lipid Panel', category: 'Chemistry'},\n      ],\n      selected: [],\n      displayKey: ['panelCode', 'name'],\n    },\n  },\n  parameters: {\n    docs: {\n      source: {\n        code: `\nimport { AutoCompleteFilterMultiSelectSelectedTopDisplay } from 'react-restyle-components';\n\n<AutoCompleteFilterMultiSelectSelectedTopDisplay\n  uniqueField=\"_id\"\n  placeholder=\"Search panels...\"\n  data={{\n    list: [\n      {_id: '1', panelCode: 'CBC', name: 'Complete Blood Count', category: 'Hematology'},\n      {_id: '2', panelCode: 'BMP', name: 'Basic Metabolic Panel', category: 'Chemistry'},\n      {_id: '3', panelCode: 'LIPID', name: 'Lipid Panel', category: 'Chemistry'},\n    ],\n    selected: [],\n    displayKey: ['panelCode', 'name'],\n  }}\n  showSelectAllSection={true}\n  onSelect={(items) => console.log(items)}\n  onUpdate={(items) => console.log(items)}\n  onFilter={(value) => console.log(value)}\n/>\n        `,\n        language: 'tsx',\n      },\n      description: {\n        story:\n          'Overview of the AutoCompleteFilterMultiSelectSelectedTopDisplay component with default configuration. This component provides a multi-select autocomplete with selected items displayed at the top, bulk actions, and search filtering.',\n      },\n    },\n    order: 0,\n  },\n};\n\n// Sample data for testing\nconst sampleData = [\n  {\n    _id: '1',\n    panelCode: 'CBC',\n    name: 'Complete Blood Count',\n    category: 'Hematology',\n  },\n  {\n    _id: '2',\n    panelCode: 'BMP',\n    name: 'Basic Metabolic Panel',\n    category: 'Chemistry',\n  },\n  {\n    _id: '3',\n    panelCode: 'LIPID',\n    name: 'Lipid Panel',\n    category: 'Chemistry',\n  },\n  {\n    _id: '4',\n    panelCode: 'TSH',\n    name: 'Thyroid Stimulating Hormone',\n    category: 'Endocrinology',\n  },\n  {\n    _id: '5',\n    panelCode: 'HBA1C',\n    name: 'Hemoglobin A1C',\n    category: 'Chemistry',\n  },\n  {\n    _id: '6',\n    panelCode: 'PSA',\n    name: 'Prostate Specific Antigen',\n    category: 'Tumor Markers',\n  },\n  {\n    _id: '7',\n    panelCode: 'URINE',\n    name: 'Urinalysis Complete',\n    category: 'Urinalysis',\n  },\n  {\n    _id: '8',\n    panelCode: 'PT',\n    name: 'Prothrombin Time',\n    category: 'Coagulation',\n  },\n];\n\nexport const Basic: Story = {\n  render: (args) => {\n    const [selectedItems, setSelectedItems] = useState(\n      args.data.selected || []\n    );\n    const [allItems, setAllItems] = useState(sampleData);\n    const [filteredData, setFilteredData] = useState(args.data);\n\n    const handleSelect = (items: any[]) => {\n      console.log('handleSelect called with:', items);\n\n      if (!items || !Array.isArray(items)) return;\n\n      // Handle individual item selection/deselection\n      if (items.length === 1) {\n        const item = items[0];\n        const isCurrentlySelected = selectedItems.some(\n          (selected) =>\n            selected[args.uniqueField || '_id'] ===\n            item[args.uniqueField || '_id']\n        );\n\n        let updatedSelected;\n        if (isCurrentlySelected) {\n          // Remove item if currently selected\n          updatedSelected = selectedItems.filter(\n            (selected) =>\n              selected[args.uniqueField || '_id'] !==\n              item[args.uniqueField || '_id']\n          );\n        } else {\n          // Add item if not currently selected\n          updatedSelected = [...selectedItems, item];\n        }\n\n        setSelectedItems(updatedSelected);\n        console.log('Individual selection updated:', updatedSelected.length);\n      }\n      // Handle bulk selection/deselection\n      else if (items.length === sampleData.length) {\n        if (items.every((item) => item.selected)) {\n          // Select all\n          setSelectedItems([...sampleData]);\n          console.log('Select all executed');\n        } else if (items.every((item) => !item.selected)) {\n          // Deselect all\n          setSelectedItems([]);\n          console.log('Deselect all executed');\n        }\n      }\n\n      action('onSelect')(items);\n    };\n\n    const handleUpdate = (items: any[]) => {\n      console.log('handleUpdate called with:', items);\n      setSelectedItems(items || []);\n      action('onUpdate')(items);\n    };\n\n    const handleFilter = (value: string) => {\n      console.log('Filter value:', value);\n      action('onFilter')(value);\n\n      if (value.trim() === '') {\n        setFilteredData({\n          ...args.data,\n          list: allItems,\n        });\n      } else {\n        const filteredList = allItems.filter(\n          (item: any) =>\n            args.data.displayKey?.some((key: string) =>\n              item[key]?.toString().toLowerCase().includes(value.toLowerCase())\n            ) ||\n            item.panelCode?.toLowerCase().includes(value.toLowerCase()) ||\n            item.name?.toLowerCase().includes(value.toLowerCase()) ||\n            item.category?.toLowerCase().includes(value.toLowerCase())\n        );\n\n        setFilteredData({\n          ...args.data,\n          list: filteredList,\n        });\n      }\n    };\n\n    return (\n      <AutoCompleteFilterMultiSelectSelectedTopDisplay\n        {...args}\n        data={{\n          ...filteredData,\n          selected: selectedItems,\n        }}\n        onSelect={handleSelect}\n        onUpdate={handleUpdate}\n        onFilter={handleFilter}\n        onBlur={(e) => {\n          action('onBlur')(e);\n        }}\n      />\n    );\n  },\n  args: {\n    uniqueField: '_id',\n    placeholder: 'Search medical panels...',\n    data: {\n      list: sampleData,\n      selected: [],\n      displayKey: ['panelCode', 'name'],\n    },\n    showSelectAllSection: true,\n    loader: false,\n    hasError: false,\n    disable: false,\n    isUpperCase: false,\n    dynamicCheck: 'panelCode',\n  },\n  parameters: {\n    docs: {\n      description: {\n        story: `\n**Basic Multi-Select with Selected Items at Top**\n\nThis story demonstrates the core functionality of the multi-select component:\n\n**Features:**\n- üîç Search filtering across multiple fields\n- ‚úÖ Multi-selection with checkboxes  \n- ‚ö° Quick \"Select All\" and \"Clear All\" actions\n- üìä Real-time selection count display\n- üîù Selected items displayed at the top\n- üìú Scrollable sections for better organization\n\n**How to Test:**\n1. Click the input to open the dropdown\n2. Use \"Select All\" to select all items\n3. Use \"Clear All\" to deselect all items\n4. Select individual items using checkboxes\n5. Search for specific items using the search field\n6. Observe selected items appear at the top section\n\n**Component Behavior:**\n- \\`onSelect\\` receives an array of items\n- Individual selections pass array with 1 item\n- Bulk selections pass array with all items marked as selected/deselected\n\n**Data Structure:**\n\\`\\`\\`javascript\n{\n  list: [array of items],\n  selected: [array of selected items],\n  displayKey: ['field1', 'field2'] // fields to display\n}\n\\`\\`\\`\n        `,\n      },\n    },\n  },\n};\n"],"names":[],"sourceRoot":""}