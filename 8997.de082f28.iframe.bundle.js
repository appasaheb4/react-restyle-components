"use strict";(self.webpackChunkreact_restyle_components=self.webpackChunkreact_restyle_components||[]).push([[8997],{"./src/core-components/src/components/AutoComplete/auto-complete-filter-group-by-multiple-select-multiple-fields-display/auto-complete-filter-group-by-multiple-select-multiple-fields-display.component.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{K:()=>AutoCompleteFilterGroupByMultipleSelectMultipleFieldsDisplay});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_Icon_Icon__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/core-components/src/components/Icon/Icon.tsx"),_tc_module_css__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/core-components/src/tc.module.css"),_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_tc_module_css__WEBPACK_IMPORTED_MODULE_2__),_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/core-components/src/utils/index.ts"),_techabl_core_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@techabl/core-utils/lib/index.js");const AutoCompleteFilterGroupByMultipleSelectMultipleFieldsDisplay=({uniqueField="_id",groupByField,selectionConfig={},displayConfig={},uiConfig={},loader=!1,placeholder="Search...",data,hasError=!1,disable=!1,isUpperCase=!1,name,groupByDetails,onFilter,onUpdate,onSelect,onBlur,className,style,filterDebounceDelay=300})=>{const{isSelectedStringArray=!1,maxSelection,onSelectionChange}=selectionConfig,{displayKeys,displaySeparator=" - ",fallbackKeys=["name","code"],renderItem,renderGroupName}=displayConfig,{showGroupHeaders=!0,collapsibleGroups=!1,showSelectAllButtons=!0,showSelectedSection=!0,selectedPlaceholder,emptyStateMessage="No results found",emptyStateDescription="Try adjusting your search terms"}=uiConfig,groupField=groupByField||groupByDetails?.groupByName||"lab",defaultGroupName=groupByDetails?.defaultGroupName||"Default",totalItemName=groupByDetails?.totalItemName||"department",getItemDisplayText=item=>{if(renderItem){const rendered=renderItem(item);if("string"==typeof rendered)return rendered}return(displayKeys||data.displayKey||fallbackKeys).map((key=>item[key])).filter(Boolean).join(displaySeparator)||"Unnamed Item"},[value,setValue]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(""),[groupedOptions,setGroupedOptions]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({}),[originalGroupedOptions,setOriginalGroupedOptions]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({}),[selectedItems,setSelectedItems]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]),[collapsedGroups,setCollapsedGroups]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(new Set),[isListOpen,setIsListOpen]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),[totalItems,setTotalItems]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0),getSelectedGroups=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((()=>Object.keys(originalGroupedOptions).reduce(((acc,groupKey)=>{const selectedItems=(originalGroupedOptions[groupKey]||[]).filter((item=>item.selected));return selectedItems.length>0&&(acc[groupKey]=selectedItems),acc}),{})),[originalGroupedOptions]),prevGroupedOptionsRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(groupedOptions);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{const prevGroupedOptions=prevGroupedOptionsRef.current;if(JSON.stringify(prevGroupedOptions)!==JSON.stringify(groupedOptions)){const list=Array.isArray(groupedOptions)?groupedOptions.flat(Number.POSITIVE_INFINITY):Object.values(groupedOptions).flat(Number.POSITIVE_INFINITY);onUpdate&&onUpdate(list),prevGroupedOptionsRef.current=groupedOptions}}),[groupedOptions,onUpdate]);const wrapperRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);var ref;ref=wrapperRef,(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{function handleClickOutside(event){if(ref.current&&!ref.current.contains(event.target)&&isListOpen){const selectedGroups=getSelectedGroups();onSelect&&onSelect(selectedGroups),setIsListOpen(!1),setValue("")}}return document.addEventListener("mousedown",handleClickOutside),()=>{document.removeEventListener("mousedown",handleClickOutside)}}),[ref,isListOpen,getSelectedGroups,onSelect]);const processGroupedData=(groupedData,selectedItems)=>{const processedGroups={};let totalCount=0;return Object.keys(groupedData).forEach((groupKey=>{const processedItems=(groupedData[groupKey]||[]).map((item=>{totalCount++;const isSelected=!!(selectedItems&&selectedItems.length>0)&&selectedItems.some((sItem=>isSelectedStringArray?sItem===item[uniqueField]:sItem[uniqueField]===item[uniqueField]));return{...item,selected:isSelected}}));processedGroups[groupKey]=processedItems})),setTotalItems(totalCount),processedGroups};(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{let processedData={};if(data.list&&Array.isArray(data.list)){const grouped=data.list.reduce(((groups,item)=>{const groupKey=item?.[groupField]||defaultGroupName;return groups[groupKey]||(groups[groupKey]=[]),groups[groupKey].push(item),groups}),{});processedData=processGroupedData(grouped,data.selected||[])}else"object"==typeof data.list&&null!==data.list&&(processedData=processGroupedData(data.list,data.selected||[]));setOriginalGroupedOptions(processedData),setGroupedOptions(processedData);const allSelected=[];Object.keys(processedData).forEach((groupKey=>{const selectedInGroup=(processedData[groupKey]||[]).filter((item=>item.selected));allSelected.push(...selectedInGroup)})),setSelectedItems(Array.isArray(data?.selected)&&!isSelectedStringArray?data.selected:allSelected)}),[data,data.selected,isSelectedStringArray,uniqueField,groupField,defaultGroupName]);const debouncedFilter=react__WEBPACK_IMPORTED_MODULE_0__.useMemo((()=>(0,_techabl_core_utils__WEBPACK_IMPORTED_MODULE_4__.debounce)((search=>{onFilter&&onFilter(search)}),filterDebounceDelay)),[onFilter,filterDebounceDelay]),handleGroupSelectAll=(groupName,groupItems,selectAll)=>{const updatedGroupItems=groupItems.map((item=>({...item,selected:selectAll})));if(setGroupedOptions((prev=>({...prev,[groupName]:updatedGroupItems}))),setOriginalGroupedOptions((prev=>({...prev,[groupName]:updatedGroupItems}))),selectAll){const newSelectedItems=[...selectedItems];groupItems.forEach((item=>{-1===newSelectedItems.findIndex((selected=>selected[uniqueField]===item[uniqueField]))&&newSelectedItems.push({...item,selected:!0})})),setSelectedItems(newSelectedItems)}else{const newSelectedItems=selectedItems.filter((selectedItem=>!groupItems.some((groupItem=>groupItem[uniqueField]===selectedItem[uniqueField]))));setSelectedItems(newSelectedItems)}},getSelectedCount=()=>selectedItems?.length;return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{onSelectionChange&&onSelectionChange(getSelectedGroups())}),[groupedOptions,onSelectionChange,getSelectedGroups]),react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{ref:wrapperRef,className:(0,_utils__WEBPACK_IMPORTED_MODULE_3__.cn)(_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["w-full"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default().relative,className),style},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:(0,_utils__WEBPACK_IMPORTED_MODULE_3__.cn)(_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default().flex,_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["items-center"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["leading-4"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["p-2"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["focus:outline-none"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["focus:ring"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["w-full"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["shadow-sm"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["sm:text-base"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default().border,_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["rounded-md"],{[_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["border-red"]]:hasError,[_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["border-gray-300"]]:!hasError},_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["bg-white"])},react__WEBPACK_IMPORTED_MODULE_0__.createElement("input",{placeholder,disabled:disable,name,value:isListOpen?isUpperCase?value?.toUpperCase():value:getSelectedCount()>0?"function"==typeof selectedPlaceholder?selectedPlaceholder(getSelectedCount()):selectedPlaceholder||`${getSelectedCount()} Items Selected`:placeholder,className:(0,_utils__WEBPACK_IMPORTED_MODULE_3__.cn)(_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["w-full"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["focus:outline-none"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["bg-transparent"]),onKeyUp:e=>{if(8===(e.which?e.which:e.keyCode)){const search=e.currentTarget.value;debouncedFilter(search)}},onChange:e=>{const search=e.target.value;setValue(search),debouncedFilter(search)},onClick:()=>setIsListOpen(!0),onBlur:e=>onBlur&&onBlur(e)}),loader?react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:(0,_utils__WEBPACK_IMPORTED_MODULE_3__.cn)(_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["animate-spin"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["w-4"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["h-4"])},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_1__.I,{nameIcon:"FaSpinner",propsIcon:{size:16,color:"#666"}})):react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_1__.I,{nameIcon:isListOpen?"FaChevronUp":"FaChevronDown",propsIcon:{size:16,color:"#000000"}})),isListOpen&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:(0,_utils__WEBPACK_IMPORTED_MODULE_3__.cn)(_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["mt-1"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default().absolute,_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["rounded-md"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["bg-white"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default().border,_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["border-gray-300"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["shadow-lg"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["z-50"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["w-full"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["max-h-96"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["overflow-hidden"]),style:{zIndex:1e3}},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:(0,_utils__WEBPACK_IMPORTED_MODULE_3__.cn)(_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["p-3"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["border-b"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["border-gray-200"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["bg-gray-50"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["text-sm"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["font-medium"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["text-gray-700"])},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:(0,_utils__WEBPACK_IMPORTED_MODULE_3__.cn)(_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default().flex,_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["justify-between"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["items-center"])},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,Object.keys(groupedOptions).length," ",groupField?.toUpperCase(),", ",totalItems," ",totalItemName?.toUpperCase()),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"flex items-center gap-2"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:(0,_utils__WEBPACK_IMPORTED_MODULE_3__.cn)(_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["text-blue-600"])},getSelectedCount()," Selected"),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:(0,_utils__WEBPACK_IMPORTED_MODULE_3__.cn)(_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default().flex,_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["gap-2"])},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",className:(0,_utils__WEBPACK_IMPORTED_MODULE_3__.cn)(_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["text-xs"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["px-3"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["py-1"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["bg-blue-600"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["text-white"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default().rounded,_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["hover:bg-blue-700"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["transition-colors"]),onClick:()=>{const selectedGroups=getSelectedGroups();onSelect(selectedGroups),setIsListOpen(!1),setValue("")}},"OK"))))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:(0,_utils__WEBPACK_IMPORTED_MODULE_3__.cn)(_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["max-h-80"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["overflow-y-auto"])},showSelectedSection&&getSelectedCount()>0&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:(0,_utils__WEBPACK_IMPORTED_MODULE_3__.cn)(_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["border-b"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["border-gray-200"])},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:(0,_utils__WEBPACK_IMPORTED_MODULE_3__.cn)(_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["p-3"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["bg-blue-50"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["border-b"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["border-blue-200"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["font-semibold"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["text-sm"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["text-blue-700"])},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:(0,_utils__WEBPACK_IMPORTED_MODULE_3__.cn)(_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default().flex,_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["items-center"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["gap-2"])},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_1__.I,{nameIcon:"FaCheck",propsIcon:{size:12,color:"#1976d2"}}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,"Selected Items (",getSelectedCount(),")"))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:(0,_utils__WEBPACK_IMPORTED_MODULE_3__.cn)(_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["max-h-48"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["overflow-y-auto"])},selectedItems?.map(((item,index)=>react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{key:`selected-${item[uniqueField]||index}`,className:(0,_utils__WEBPACK_IMPORTED_MODULE_3__.cn)(_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default().flex,_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["items-center"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["gap-3"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["p-3"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["hover:bg-blue-50"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["border-l-4"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["border-blue-500"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["bg-blue-25"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["transition-colors"])},react__WEBPACK_IMPORTED_MODULE_0__.createElement("label",{className:(0,_utils__WEBPACK_IMPORTED_MODULE_3__.cn)(_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default().flex,_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["items-center"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["cursor-pointer"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["w-full"])},react__WEBPACK_IMPORTED_MODULE_0__.createElement("input",{type:"checkbox",checked:!0,onChange:()=>{return itemToDeselect=item,setSelectedItems((prev=>prev.filter((item=>item[uniqueField]!==itemToDeselect[uniqueField])))),void Object.keys(groupedOptions).forEach((groupKey=>{const updatedGroupItems=groupedOptions[groupKey].map((item=>item[uniqueField]===itemToDeselect[uniqueField]?{...item,selected:!1}:item));setGroupedOptions((prev=>({...prev,[groupKey]:updatedGroupItems}))),setOriginalGroupedOptions((prev=>({...prev,[groupKey]:updatedGroupItems})))}));var itemToDeselect},className:(0,_utils__WEBPACK_IMPORTED_MODULE_3__.cn)(_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["h-4"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["w-4"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["text-blue-600"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["border-gray-300"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default().rounded,_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["focus:ring-blue-500"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["cursor-pointer"])}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:(0,_utils__WEBPACK_IMPORTED_MODULE_3__.cn)(_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["ml-3"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default().flex,_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["flex-col"])},renderItem?renderItem(item):react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:(0,_utils__WEBPACK_IMPORTED_MODULE_3__.cn)(_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["text-sm"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["font-medium"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["text-blue-700"])},getItemDisplayText(item)),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:(0,_utils__WEBPACK_IMPORTED_MODULE_3__.cn)(_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["text-xs"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["text-gray-500"])},item[groupField]||defaultGroupName))))))))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",null,(()=>{const groupNames=Object.keys(groupedOptions).sort();return 0===groupNames.length?react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:(0,_utils__WEBPACK_IMPORTED_MODULE_3__.cn)(_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["p-4"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["text-center"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["text-gray-500"])},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_1__.I,{nameIcon:"FaSearch",propsIcon:{size:24,color:"#ccc"}}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",{className:(0,_utils__WEBPACK_IMPORTED_MODULE_3__.cn)(_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["mt-2"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["text-sm"])},emptyStateMessage),react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",{className:(0,_utils__WEBPACK_IMPORTED_MODULE_3__.cn)(_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["text-xs"])},emptyStateDescription)):groupNames.map((groupName=>{const groupItems=groupedOptions[groupName]||[],isCollapsed=collapsedGroups.has(groupName),selectedInGroup=groupItems.filter((item=>item.selected)).length,unselectedInGroup=groupItems.filter((item=>!item.selected));return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{key:groupName,className:(0,_utils__WEBPACK_IMPORTED_MODULE_3__.cn)(_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["border-b"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["border-gray-200"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["last:border-b-0"])},showGroupHeaders&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:(0,_utils__WEBPACK_IMPORTED_MODULE_3__.cn)(_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default().flex,_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["items-center"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["justify-between"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["p-3"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["bg-gray-50"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["border-b"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["border-gray-200"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["font-semibold"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["text-sm"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["text-gray-700"],collapsibleGroups&&_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["cursor-pointer"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["hover:bg-gray-100"]),onClick:()=>collapsibleGroups&&(groupName=>{const newCollapsedGroups=new Set(collapsedGroups);newCollapsedGroups.has(groupName)?newCollapsedGroups.delete(groupName):newCollapsedGroups.add(groupName),setCollapsedGroups(newCollapsedGroups)})(groupName)},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:(0,_utils__WEBPACK_IMPORTED_MODULE_3__.cn)(_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default().flex,_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["items-center"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["gap-2"])},collapsibleGroups&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_Icon_Icon__WEBPACK_IMPORTED_MODULE_1__.I,{nameIcon:isCollapsed?"FaChevronRight":"FaChevronDown",propsIcon:{size:12,color:"#666"}}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:(0,_utils__WEBPACK_IMPORTED_MODULE_3__.cn)(_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["font-bold"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["text-blue-700"])},((groupName,count)=>renderGroupName?renderGroupName(groupName,count):groupName)(groupName,groupItems.length)),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:(0,_utils__WEBPACK_IMPORTED_MODULE_3__.cn)(_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["text-xs"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["bg-blue-100"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["text-blue-800"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["px-2"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["py-1"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["rounded-full"])},selectedInGroup,"/",groupItems.length)),showSelectAllButtons&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:(0,_utils__WEBPACK_IMPORTED_MODULE_3__.cn)(_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default().flex,_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["gap-1"])},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",onClick:e=>{e.stopPropagation(),handleGroupSelectAll(groupName,groupItems,!0)},className:(0,_utils__WEBPACK_IMPORTED_MODULE_3__.cn)(_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["text-xs"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["px-2"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["py-1"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["bg-green-500"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["text-white"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default().rounded,_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["hover:bg-green-600"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["transition-colors"],selectedInGroup===groupItems.length&&_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["opacity-50"],selectedInGroup===groupItems.length&&_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["cursor-not-allowed"]),title:`Select all in ${groupName}`,disabled:selectedInGroup===groupItems.length},"All"),react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{type:"button",onClick:e=>{e.stopPropagation(),handleGroupSelectAll(groupName,groupItems,!1)},className:(0,_utils__WEBPACK_IMPORTED_MODULE_3__.cn)(_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["text-xs"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["px-2"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["py-1"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["bg-gray-500"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["text-white"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default().rounded,_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["hover:bg-gray-600"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["transition-colors"],0===selectedInGroup&&_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["opacity-50"],0===selectedInGroup&&_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["cursor-not-allowed"]),title:`Deselect all in ${groupName}`,disabled:0===selectedInGroup},"None"))),(!collapsibleGroups||!isCollapsed)&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:(0,_utils__WEBPACK_IMPORTED_MODULE_3__.cn)(_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["max-h-60"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["overflow-y-auto"])},unselectedInGroup.map(((item,index)=>react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{key:`${groupName}-${item[uniqueField]||index}`,className:(0,_utils__WEBPACK_IMPORTED_MODULE_3__.cn)(_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default().flex,_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["items-center"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["gap-3"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["p-3"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["hover:bg-blue-50"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["border-l-4"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["border-transparent"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["transition-colors"])},react__WEBPACK_IMPORTED_MODULE_0__.createElement("label",{className:(0,_utils__WEBPACK_IMPORTED_MODULE_3__.cn)(_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default().flex,_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["items-center"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["cursor-pointer"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["w-full"])},react__WEBPACK_IMPORTED_MODULE_0__.createElement("input",{id:`${groupName}-${index}`,className:(0,_utils__WEBPACK_IMPORTED_MODULE_3__.cn)(_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["h-4"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["w-4"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["text-blue-600"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["border-gray-300"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default().rounded,_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["focus:ring-blue-500"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["cursor-pointer"]),type:"checkbox",checked:!1,onChange:()=>{const itemIndex=groupedOptions[groupName].findIndex((grpItem=>grpItem[uniqueField]===item[uniqueField]));((groupName,isSelected,itemIndex)=>{const item=groupedOptions[groupName][itemIndex],updatedGroupItems=groupedOptions[groupName].map(((grpItem,index)=>index===itemIndex?{...grpItem,selected:!isSelected}:grpItem));setGroupedOptions((prev=>({...prev,[groupName]:updatedGroupItems}))),setOriginalGroupedOptions((prev=>({...prev,[groupName]:updatedGroupItems}))),setSelectedItems(isSelected?prev=>prev.filter((selectedItem=>selectedItem[uniqueField]!==item[uniqueField])):prev=>[...prev,{...item,selected:!0}])})(groupName,!1,itemIndex)}}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:(0,_utils__WEBPACK_IMPORTED_MODULE_3__.cn)(_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["ml-3"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default().flex,_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["flex-col"])},renderItem?renderItem(item):react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:(0,_utils__WEBPACK_IMPORTED_MODULE_3__.cn)(_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["text-sm"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["font-medium"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["text-gray-700"])},getItemDisplayText(item))))))),0===unselectedInGroup.length&&groupItems.length>0&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:(0,_utils__WEBPACK_IMPORTED_MODULE_3__.cn)(_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["p-3"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["text-center"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["text-gray-500"],_tc_module_css__WEBPACK_IMPORTED_MODULE_2___default()["text-sm"])},"All items in this group are selected")))}))})())))))}}}]);